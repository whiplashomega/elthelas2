import{I as B,k as V,s as z,B as M,l as $,_ as A,g as _,o as r,c as i,h,w as y,a as t,H as m,F as T,r as L,e as n,n as g,E as I,v as k,t as o,d as u,q as N,x as P}from"./index.js";const R={setup(){const e=B(),l=V(),{isAdmin:d}=l,{getCreature:b,getAllCreatures:p}=e,{creatures:c}=z(e);return M({title:"Bestiary"}),{admin:d,creatures:c,getCreature:b,getAllCreatures:p}},components:{modal:$},computed:{filteredcreatures(){return this.creatures.filter(e=>{var l=this.creaturestable.filterValue.split(" ");let d=!0;return this.typeFilter!==""&&e.type!==this.typeFilter||this.sizeFilter!==""&&e.size!==this.sizeFilter||this.crFilterMin>e.cr||this.crFilterMax<e.cr?!1:(l.forEach(b=>{let p=this.creaturestable.filterBy.some(function(c){for(var f in e)if(c===f&&e[f].toString().toLowerCase().includes(b.toLowerCase()))return!0});this.creaturestable.filterValue&&!p&&(d=!1)}),!!d)}).sort((e,l)=>e[this.creaturestable.sortBy]>l[this.creaturestable.sortBy]&&this.creaturestable.sortDesc===!1||e[this.creaturestable.sortBy]<l[this.creaturestable.sortBy]&&this.creaturestable.sortDesc===!0?1:-1)}},data(){return{modalProps:{title:"",isActive:!1},typeFilter:"",sizeFilter:"",crFilterMin:0,crFilterMax:40,creaturestable:{fields:[{key:"name",label:"Name",sortable:!0},{key:"size",label:"Size",sortable:!0},{key:"cr",label:"CR",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"subtype",label:"Subtype",sortable:!0},{key:"alignment",label:"Alignment",sortable:!0}],filterValue:"",sortBy:"name",sortDesc:!1,filterBy:["name","size","cr","type","subtype","alignment","description"],modalInfo:{name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""}}}},methods:{async info(e){var l=await this.getCreature(e._id);this.creaturestable.modalInfo=l,this.modalProps={title:l.name,isActive:!0}},resetModal(){this.creaturestable.modalInfo={name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""}},filter(e){var l=this.creaturestable.filterBy,d=this.creaturestable.filterValue,b=l.some(function(p){for(var c in e)if(p===c&&e[c].toString().toLowerCase().includes(d.toLowerCase()))return!0});return!!(!d||b)},edit(e){confirm("are you sure you want to edit "+e.name+"?")+this.admin&&this.$router.push("/tools/creaturebuilder/"+e._id)}},mounted(){this.getAllCreatures()}};const s=e=>(N("data-v-346b6cbb"),e=e(),P(),e),U={class:"col-sm-12"},H=s(()=>t("option",{value:""},"All",-1)),E=s(()=>t("option",{value:"aberration"},"Aberration",-1)),O=s(()=>t("option",{value:"beast"},"Beast",-1)),X=s(()=>t("option",{value:"celestial"},"Celestial",-1)),j=s(()=>t("option",{value:"construct"},"Construct",-1)),q=s(()=>t("option",{value:"dragon"},"Dragon",-1)),G=s(()=>t("option",{value:"elemental"},"Elemental",-1)),W=s(()=>t("option",{value:"fey"},"Fey",-1)),J=s(()=>t("option",{value:"fiend"},"Fiend",-1)),K=s(()=>t("option",{value:"giant"},"Giant",-1)),Q=s(()=>t("option",{value:"humanoid"},"Humanoid",-1)),Y=s(()=>t("option",{value:"monstrosity"},"Monstrosity",-1)),Z=s(()=>t("option",{value:"plant"},"Plant",-1)),x=s(()=>t("option",{value:"ooze"},"Ooze",-1)),ee=s(()=>t("option",{value:"undead"},"Undead",-1)),te=[H,E,O,X,j,q,G,W,J,K,Q,Y,Z,x,ee],se=s(()=>t("br",null,null,-1)),le=s(()=>t("option",{value:""},"All",-1)),oe=s(()=>t("option",{value:"tiny"},"tiny",-1)),ne=s(()=>t("option",{value:"small"},"small",-1)),ae=s(()=>t("option",{value:"medium"},"medium",-1)),re=s(()=>t("option",{value:"large"},"large",-1)),ie=s(()=>t("option",{value:"huge"},"huge",-1)),ue=s(()=>t("option",{value:"gargantuan"},"gargantuan",-1)),de=s(()=>t("option",{value:"colossal"},"colossal",-1)),ce=[le,oe,ne,ae,re,ie,ue,de],me=s(()=>t("br",null,null,-1)),be=s(()=>t("br",null,null,-1)),pe=s(()=>t("br",null,null,-1)),he=s(()=>t("div",{class:"col-2"},null,-1)),fe=s(()=>t("div",{class:"col-sm-2"},null,-1)),_e=["disabled"],ye={class:"table table-striped table-responsive",id:"creaturetable"},ge=["onClick"],ve=["onClick"],Ie=["onClick"],ke={key:0},Ce=s(()=>t("strong",null,"Armor Class:",-1)),Se=s(()=>t("br",null,null,-1)),Fe=s(()=>t("strong",null,"Hit Points:",-1)),De=s(()=>t("br",null,null,-1)),we=s(()=>t("strong",null,"Speed:",-1)),Be={class:"table table-striped"},Ve=s(()=>t("thead",null,[t("tr",null,[t("th",null,"STR"),t("th",null,"DEX"),t("th",null,"CON"),t("th",null,"INT"),t("th",null,"WIS"),t("th",null,"CHA")])],-1)),ze={key:0},Me={key:0},$e={key:0},Ae={key:0},Te={key:0},Le={key:0},Ne={key:0},Pe=s(()=>t("strong",null,"Saving Throws:",-1)),Re=s(()=>t("br",null,null,-1)),Ue={key:1},He=s(()=>t("strong",null,"Skills:",-1)),Ee=s(()=>t("br",null,null,-1)),Oe=s(()=>t("strong",null,"Senses:",-1)),Xe=s(()=>t("br",null,null,-1)),je={key:2},qe=s(()=>t("strong",null,"Damage Resistances:",-1)),Ge=s(()=>t("br",null,null,-1)),We={key:3},Je=s(()=>t("strong",null,"Damage Immunities:",-1)),Ke=s(()=>t("br",null,null,-1)),Qe={key:4},Ye=s(()=>t("strong",null,"Condition Immunities:",-1)),Ze=s(()=>t("br",null,null,-1)),xe=s(()=>t("strong",null,"Languages:",-1)),et=s(()=>t("br",null,null,-1)),tt=s(()=>t("strong",null,"Challenge:",-1)),st=["innerHTML"];function lt(e,l,d,b,p,c){const f=_("b-col"),C=_("b-form-input"),S=_("b-input-group"),F=_("b-row"),D=_("modal");return r(),i("div",U,[h(F,null,{default:y(()=>[h(f,{md:"2"},{default:y(()=>[t("label",null,[n(" Type "),g(t("select",{"onUpdate:modelValue":l[0]||(l[0]=a=>e.typeFilter=a)},te,512),[[I,e.typeFilter]]),n(),se,n(" Size "),g(t("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>e.sizeFilter=a)},ce,512),[[I,e.sizeFilter]]),n(),me,n(" CR Min "),g(t("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=a=>e.crFilterMin=a),class:"charsheet-num"},null,512),[[k,e.crFilterMin]]),n(),be,n(" Max "),g(t("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=a=>e.crFilterMax=a),class:"charsheet-num"},null,512),[[k,e.crFilterMax]]),pe])]),_:1}),he,fe,h(f,{md:"4",class:"my-1"},{default:y(()=>[h(S,null,{default:y(()=>[h(C,{modelValue:e.creaturestable.filterValue,"onUpdate:modelValue":l[4]||(l[4]=a=>e.creaturestable.filterValue=a),placeholder:"Type to Search"},null,8,["modelValue"]),t("button",{class:"btn btn-primary",disabled:!e.creaturestable.filterValue,onClick:l[5]||(l[5]=a=>e.creaturestable.filterValue="")},"Clear",8,_e)]),_:1}),n(" Results: "+o(e.filteredcreatures.length),1)]),_:1})]),_:1}),t("table",ye,[t("thead",null,[t("tr",null,[t("th",null,[t("a",{href:"#",onClick:l[6]||(l[6]=m(a=>{e.creaturestable.sortBy="name",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Name")]),t("th",null,[t("a",{href:"#",onClick:l[7]||(l[7]=m(a=>{e.creaturestable.sortBy="size",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Size")]),t("th",null,[t("a",{href:"#",onClick:l[8]||(l[8]=m(a=>{e.creaturestable.sortBy="cr",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"CR")]),t("th",null,[t("a",{href:"#",onClick:l[9]||(l[9]=m(a=>{e.creaturestable.sortBy="type",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Type")]),t("th",null,[t("a",{href:"#",onClick:l[10]||(l[10]=m(a=>{e.creaturestable.sortBy="subtype",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Subtype")]),t("th",null,[t("a",{href:"#",onClick:l[11]||(l[11]=m(a=>{e.creaturestable.sortBy="alignment",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Alignment")])])]),t("tbody",null,[(r(!0),i(T,null,L(e.filteredcreatures,(a,w)=>(r(),i("tr",{key:a._id},[t("td",null,[t("span",null,[t("a",{href:"#",onClick:m(v=>e.info(a,w,v.target),["stop"])},o(a.name),9,ge),e.admin?(r(),i("button",{key:0,class:"btn btn-warning btn-sm",onClick:v=>e.edit(a)},"\u270E",8,ve)):u("",!0),e.admin?(r(),i("button",{key:1,class:"btn btn-sm btn-danger",onClick:v=>e.del(a)},"X",8,Ie)):u("",!0)])]),t("td",null,o(a.size),1),t("td",null,o(a.cr),1),t("td",null,o(a.type),1),t("td",null,o(a.subtype),1),t("td",null,o(a.alignment),1)]))),128))])]),h(D,{id:"creaturemodal",modalProps:e.modalProps,"ok-only":""},{default:y(()=>[t("h4",null,[n(o(e.creaturestable.modalInfo.size)+" "+o(e.creaturestable.modalInfo.type),1),e.creaturestable.modalInfo.subtype?(r(),i("span",ke," ("+o(e.creaturestable.modalInfo.subtype)+")",1)):u("",!0),n(", "+o(e.creaturestable.modalInfo.alignment),1)]),t("p",null,[Ce,n(" "+o(e.creaturestable.modalInfo.acdesc)+" ",1),Se,Fe,n(o(e.creaturestable.modalInfo.hpdesc)+" ",1),De,we,n(" "+o(e.creaturestable.modalInfo.speed),1)]),t("table",Be,[Ve,t("tbody",null,[t("tr",null,[t("td",null,[n(o(e.creaturestable.modalInfo.str)+" (",1),e.creaturestable.modalInfo.strmod>0?(r(),i("span",ze,"+")):u("",!0),n(o(e.creaturestable.modalInfo.strmod)+")",1)]),t("td",null,[n(o(e.creaturestable.modalInfo.dex)+" (",1),e.creaturestable.modalInfo.dexmod>0?(r(),i("span",Me,"+")):u("",!0),n(o(e.creaturestable.modalInfo.dexmod)+")",1)]),t("td",null,[n(o(e.creaturestable.modalInfo.con)+" (",1),e.creaturestable.modalInfo.conmod>0?(r(),i("span",$e,"+")):u("",!0),n(o(e.creaturestable.modalInfo.conmod)+")",1)]),t("td",null,[n(o(e.creaturestable.modalInfo.int)+" (",1),e.creaturestable.modalInfo.intmod>0?(r(),i("span",Ae,"+")):u("",!0),n(o(e.creaturestable.modalInfo.intmod)+")",1)]),t("td",null,[n(o(e.creaturestable.modalInfo.wis)+" (",1),e.creaturestable.modalInfo.wismod>0?(r(),i("span",Te,"+")):u("",!0),n(o(e.creaturestable.modalInfo.wismod)+")",1)]),t("td",null,[n(o(e.creaturestable.modalInfo.cha)+" (",1),e.creaturestable.modalInfo.chamod>0?(r(),i("span",Le,"+")):u("",!0),n(o(e.creaturestable.modalInfo.chamod)+")",1)])])])]),t("p",null,[e.creaturestable.modalInfo.saves?(r(),i("span",Ne,[Pe,n(" "+o(e.creaturestable.modalInfo.saves)+" ",1),Re])):u("",!0),e.creaturestable.modalInfo.skills.length>0?(r(),i("span",Ue,[He,n(" "+o(e.creaturestable.modalInfo.skills.join(", "))+" ",1),Ee])):u("",!0),Oe,n(" "+o(e.creaturestable.modalInfo.senses)+" ",1),Xe,e.creaturestable.modalInfo.damageresistances?(r(),i("span",je,[qe,n(" "+o(e.creaturestable.modalInfo.damageresistances)+" ",1),Ge])):u("",!0),e.creaturestable.modalInfo.damageimmunities?(r(),i("span",We,[Je,n(" "+o(e.creaturestable.modalInfo.damageimmunities)+" ",1),Ke])):u("",!0),e.creaturestable.modalInfo.conditionimmunities?(r(),i("span",Qe,[Ye,n(" "+o(e.creaturestable.modalInfo.conditionimmunities)+" ",1),Ze])):u("",!0),xe,n(" "+o(e.creaturestable.modalInfo.languages)+" ",1),et,tt,n(" "+o(e.creaturestable.modalInfo.cr),1)]),t("div",{innerHTML:e.creaturestable.modalInfo.descr},null,8,st)]),_:1},8,["modalProps"])])}const nt=A(R,[["render",lt],["__scopeId","data-v-346b6cbb"]]);export{nt as default};
