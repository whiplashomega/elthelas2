import{E as w,j as B,s as T,B as $,_ as z,g as m,o as l,c as n,h as r,w as u,e as s,a as t,G as N,t as a,d as i,p as A,f as D}from"./index.js";const H={setup(){const e=w(),d=B(),{isAdmin:b}=d,{getCreature:p,getAllCreatures:h}=e,{creatures:_}=T(e);return $({title:"Bestiary"}),{admin:b,creatures:_,getCreature:p,getAllCreatures:h}},data(){return{creaturestable:{fields:[{key:"name",label:"Name",sortable:!0},{key:"size",label:"Size",sortable:!0},{key:"cr",label:"CR",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"subtype",label:"Subtype",sortable:!0},{key:"alignment",label:"Alignment",sortable:!0}],filterValue:"",sortBy:null,sortDesc:!1,filterBy:["name","size","cr","type","subtype","alignment","description"],modalInfo:{name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""}}}},methods:{async info(e,d,b){var p=await this.getCreature(e._id);this.creaturestable.modalInfo=p,this.$root.$emit("bv::show::modal","creaturemodal",b)},resetModal(){this.creaturestable.modalInfo={name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""}},filter(e){var d=this.creaturestable.filterBy,b=this.creaturestable.filterValue,p=d.some(function(h){for(var _ in e)if(h===_&&e[_].toString().toLowerCase().includes(b.toLowerCase()))return!0});return!!(!b||p)},edit(e){confirm("are you sure you want to edit "+e.name+"?")+this.admin&&this.$router.push("/tools/creaturebuilder/"+e._id)}},mounted(){this.getAllCreatures()}};const o=e=>(A("data-v-8a1c38a8"),e=e(),D(),e),L={class:"col-sm-12"},M=["disabled"],R=["onClick"],E=["onClick"],U=["onClick"],j={key:0},X=o(()=>t("strong",null,"Armor Class:",-1)),G=o(()=>t("br",null,null,-1)),O=o(()=>t("strong",null,"Hit Points:",-1)),P=o(()=>t("br",null,null,-1)),W=o(()=>t("strong",null,"Speed:",-1)),q={class:"table table-striped"},F=o(()=>t("thead",null,[t("tr",null,[t("th",null,"STR"),t("th",null,"DEX"),t("th",null,"CON"),t("th",null,"INT"),t("th",null,"WIS"),t("th",null,"CHA")])],-1)),J={key:0},K={key:0},Q={key:0},Y={key:0},Z={key:0},x={key:0},ee={key:0},te=o(()=>t("strong",null,"Saving Throws:",-1)),se=o(()=>t("br",null,null,-1)),ae={key:1},oe=o(()=>t("strong",null,"Skills:",-1)),le=o(()=>t("br",null,null,-1)),ne=o(()=>t("strong",null,"Senses:",-1)),re=o(()=>t("br",null,null,-1)),ue={key:2},ie=o(()=>t("strong",null,"Damage Resistances:",-1)),de=o(()=>t("br",null,null,-1)),ce={key:3},me=o(()=>t("strong",null,"Damage Immunities:",-1)),be=o(()=>t("br",null,null,-1)),fe={key:4},pe=o(()=>t("strong",null,"Condition Immunities:",-1)),_e=o(()=>t("br",null,null,-1)),he=o(()=>t("strong",null,"Languages:",-1)),ge=o(()=>t("br",null,null,-1)),ye=o(()=>t("strong",null,"Challenge:",-1)),Ie=["innerHTML"];function ke(e,d,b,p,h,_){const f=m("b-form-checkbox"),I=m("b-form-checkbox-group"),y=m("b-col"),k=m("b-form-input"),v=m("b-input-group"),C=m("b-row"),S=m("b-table"),V=m("b-modal");return l(),n("div",L,[r(C,null,{default:u(()=>[r(y,{md:"8"},{default:u(()=>[r(I,{modelValue:e.creaturestable.filterBy,"onUpdate:modelValue":d[0]||(d[0]=c=>e.creaturestable.filterBy=c)},{default:u(()=>[r(f,{value:"name"},{default:u(()=>[s("Name")]),_:1}),r(f,{value:"size"},{default:u(()=>[s("Size")]),_:1}),r(f,{value:"cr"},{default:u(()=>[s("CR")]),_:1}),r(f,{value:"type"},{default:u(()=>[s("Type")]),_:1}),r(f,{value:"subtype"},{default:u(()=>[s("Subtype")]),_:1}),r(f,{value:"alignment"},{default:u(()=>[s("Alignment")]),_:1}),r(f,{value:"description"},{default:u(()=>[s("Description")]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(y,{md:"4",class:"my-1"},{default:u(()=>[r(v,null,{default:u(()=>[r(k,{modelValue:e.creaturestable.filterValue,"onUpdate:modelValue":d[1]||(d[1]=c=>e.creaturestable.filterValue=c),placeholder:"Type to Search"},null,8,["modelValue"]),t("button",{disabled:!e.creaturestable.filterValue,onClick:d[2]||(d[2]=c=>e.creaturestable.filterValue=""),class:"btn btn-primary"},"Clear",8,M)]),_:1})]),_:1})]),_:1}),r(S,{"show-empty":"",striped:!0,bordered:!1,responsive:!0,stacked:"sm",items:e.creatures,fields:e.creaturestable.fields,filter:e.filter,"sort-by":e.creaturestable.sortBy,"sort-desc":e.creaturestable.sortDesc},{"cell(name)":u(c=>[t("span",null,[t("a",{href:"#",onClick:N(g=>e.info(c.item,c.index,g.target),["stop"])},a(c.value),9,R),s(),e.admin?(l(),n("button",{key:0,class:"btn btn-warning btn-sm",onClick:g=>e.edit(c.item)},"\u270E",8,E)):i("",!0),e.admin?(l(),n("button",{key:1,class:"btn btn-sm btn-danger",onClick:g=>e.del(c.item)},"X",8,U)):i("",!0)])]),_:1},8,["items","fields","filter","sort-by","sort-desc"]),r(V,{id:"creaturemodal",size:"lg",onHide:e.resetModal,title:e.creaturestable.modalInfo.name,"ok-only":""},{default:u(()=>[t("h4",null,[s(a(e.creaturestable.modalInfo.size)+" "+a(e.creaturestable.modalInfo.type),1),e.creaturestable.modalInfo.subtype?(l(),n("span",j," ("+a(e.creaturestable.modalInfo.subtype)+")",1)):i("",!0),s(", "+a(e.creaturestable.modalInfo.alignment),1)]),t("p",null,[X,s(" "+a(e.creaturestable.modalInfo.acdesc)+" ",1),G,O,s(a(e.creaturestable.modalInfo.hpdesc)+" ",1),P,W,s(" "+a(e.creaturestable.modalInfo.speed),1)]),t("table",q,[F,t("tbody",null,[t("tr",null,[t("td",null,[s(a(e.creaturestable.modalInfo.str)+" (",1),e.creaturestable.modalInfo.strmod>0?(l(),n("span",J,"+")):i("",!0),s(a(e.creaturestable.modalInfo.strmod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.dex)+" (",1),e.creaturestable.modalInfo.dexmod>0?(l(),n("span",K,"+")):i("",!0),s(a(e.creaturestable.modalInfo.dexmod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.con)+" (",1),e.creaturestable.modalInfo.conmod>0?(l(),n("span",Q,"+")):i("",!0),s(a(e.creaturestable.modalInfo.conmod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.int)+" (",1),e.creaturestable.modalInfo.intmod>0?(l(),n("span",Y,"+")):i("",!0),s(a(e.creaturestable.modalInfo.intmod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.wis)+" (",1),e.creaturestable.modalInfo.wismod>0?(l(),n("span",Z,"+")):i("",!0),s(a(e.creaturestable.modalInfo.wismod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.cha)+" (",1),e.creaturestable.modalInfo.chamod>0?(l(),n("span",x,"+")):i("",!0),s(a(e.creaturestable.modalInfo.chamod)+")",1)])])])]),t("p",null,[e.creaturestable.modalInfo.saves?(l(),n("span",ee,[te,s(" "+a(e.creaturestable.modalInfo.saves)+" ",1),se])):i("",!0),e.creaturestable.modalInfo.skills.length>0?(l(),n("span",ae,[oe,s(" "+a(e.creaturestable.modalInfo.skills.join(", "))+" ",1),le])):i("",!0),ne,s(" "+a(e.creaturestable.modalInfo.senses)+" ",1),re,e.creaturestable.modalInfo.damageresistances?(l(),n("span",ue,[ie,s(" "+a(e.creaturestable.modalInfo.damageresistances)+" ",1),de])):i("",!0),e.creaturestable.modalInfo.damageimmunities?(l(),n("span",ce,[me,s(" "+a(e.creaturestable.modalInfo.damageimmunities)+" ",1),be])):i("",!0),e.creaturestable.modalInfo.conditionimmunities?(l(),n("span",fe,[pe,s(" "+a(e.creaturestable.modalInfo.conditionimmunities)+" ",1),_e])):i("",!0),he,s(" "+a(e.creaturestable.modalInfo.languages)+" ",1),ge,ye,s(" "+a(e.creaturestable.modalInfo.cr),1)]),t("div",{innerHTML:e.creaturestable.modalInfo.descr},null,8,Ie)]),_:1},8,["onHide","title"])])}const Ce=z(H,[["render",ke],["__scopeId","data-v-8a1c38a8"]]);export{Ce as default};
