import{e as w,a as B,_ as T}from"./index.js";import{i as $,u as z,j as c,o,e as n,k as r,w as u,l as s,g as t,N,t as a,h as i,I as A,J as D}from"./vendor.js";var H={setup(){const e=w(),d=B(),{isAdmin:b}=d,{getCreature:p,getAllCreatures:h}=e,{creatures:_}=$(e);return z({title:"Bestiary"}),{admin:b,creatures:_,getCreature:p,getAllCreatures:h}},data(){return{creaturestable:{fields:[{key:"name",label:"Name",sortable:!0},{key:"size",label:"Size",sortable:!0},{key:"cr",label:"CR",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"subtype",label:"Subtype",sortable:!0},{key:"alignment",label:"Alignment",sortable:!0}],filterValue:"",sortBy:null,sortDesc:!1,filterBy:["name","size","cr","type","subtype","alignment","description"],modalInfo:{name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""}}}},methods:{async info(e,d,b){var p=await this.getCreature(e._id);this.creaturestable.modalInfo=p,this.$root.$emit("bv::show::modal","creaturemodal",b)},resetModal(){this.creaturestable.modalInfo={name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""}},filter(e){var d=this.creaturestable.filterBy,b=this.creaturestable.filterValue,p=d.some(function(h){for(var _ in e)if(h===_&&e[_].toString().toLowerCase().includes(b.toLowerCase()))return!0});return!!(!b||p)},edit(e){confirm("are you sure you want to edit "+e.name+"?")+this.admin&&this.$router.push("/tools/creaturebuilder/"+e._id)}},mounted(){this.getAllCreatures()}};const l=e=>(A("data-v-8a1c38a8"),e=e(),D(),e),M={class:"col-sm-12"},L=["disabled"],R=["onClick"],U=["onClick"],j=["onClick"],E={key:0},X=l(()=>t("strong",null,"Armor Class:",-1)),J=l(()=>t("br",null,null,-1)),O=l(()=>t("strong",null,"Hit Points:",-1)),P=l(()=>t("br",null,null,-1)),W=l(()=>t("strong",null,"Speed:",-1)),q={class:"table table-striped"},F=l(()=>t("thead",null,[t("tr",null,[t("th",null,"STR"),t("th",null,"DEX"),t("th",null,"CON"),t("th",null,"INT"),t("th",null,"WIS"),t("th",null,"CHA")])],-1)),G={key:0},K={key:0},Q={key:0},Y={key:0},Z={key:0},x={key:0},ee={key:0},te=l(()=>t("strong",null,"Saving Throws:",-1)),se=l(()=>t("br",null,null,-1)),ae={key:1},le=l(()=>t("strong",null,"Skills:",-1)),oe=l(()=>t("br",null,null,-1)),ne=l(()=>t("strong",null,"Senses:",-1)),re=l(()=>t("br",null,null,-1)),ue={key:2},ie=l(()=>t("strong",null,"Damage Resistances:",-1)),de=l(()=>t("br",null,null,-1)),me={key:3},ce=l(()=>t("strong",null,"Damage Immunities:",-1)),be=l(()=>t("br",null,null,-1)),fe={key:4},pe=l(()=>t("strong",null,"Condition Immunities:",-1)),_e=l(()=>t("br",null,null,-1)),he=l(()=>t("strong",null,"Languages:",-1)),ge=l(()=>t("br",null,null,-1)),ye=l(()=>t("strong",null,"Challenge:",-1)),Ie=["innerHTML"];function ke(e,d,b,p,h,_){const f=c("b-form-checkbox"),I=c("b-form-checkbox-group"),y=c("b-col"),k=c("b-form-input"),v=c("b-input-group"),C=c("b-row"),S=c("b-table"),V=c("b-modal");return o(),n("div",M,[r(C,null,{default:u(()=>[r(y,{md:"8"},{default:u(()=>[r(I,{modelValue:e.creaturestable.filterBy,"onUpdate:modelValue":d[0]||(d[0]=m=>e.creaturestable.filterBy=m)},{default:u(()=>[r(f,{value:"name"},{default:u(()=>[s("Name")]),_:1}),r(f,{value:"size"},{default:u(()=>[s("Size")]),_:1}),r(f,{value:"cr"},{default:u(()=>[s("CR")]),_:1}),r(f,{value:"type"},{default:u(()=>[s("Type")]),_:1}),r(f,{value:"subtype"},{default:u(()=>[s("Subtype")]),_:1}),r(f,{value:"alignment"},{default:u(()=>[s("Alignment")]),_:1}),r(f,{value:"description"},{default:u(()=>[s("Description")]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(y,{md:"4",class:"my-1"},{default:u(()=>[r(v,null,{default:u(()=>[r(k,{modelValue:e.creaturestable.filterValue,"onUpdate:modelValue":d[1]||(d[1]=m=>e.creaturestable.filterValue=m),placeholder:"Type to Search"},null,8,["modelValue"]),t("button",{disabled:!e.creaturestable.filterValue,onClick:d[2]||(d[2]=m=>e.creaturestable.filterValue=""),class:"btn btn-primary"},"Clear",8,L)]),_:1})]),_:1})]),_:1}),r(S,{"show-empty":"",striped:!0,bordered:!1,responsive:!0,stacked:"sm",items:e.creatures,fields:e.creaturestable.fields,filter:e.filter,"sort-by":e.creaturestable.sortBy,"sort-desc":e.creaturestable.sortDesc},{"cell(name)":u(m=>[t("span",null,[t("a",{href:"#",onClick:N(g=>e.info(m.item,m.index,g.target),["stop"])},a(m.value),9,R),s(),e.admin?(o(),n("button",{key:0,class:"btn btn-warning btn-sm",onClick:g=>e.edit(m.item)},"\u270E",8,U)):i("",!0),e.admin?(o(),n("button",{key:1,class:"btn btn-sm btn-danger",onClick:g=>e.del(m.item)},"X",8,j)):i("",!0)])]),_:1},8,["items","fields","filter","sort-by","sort-desc"]),r(V,{id:"creaturemodal",size:"lg",onHide:e.resetModal,title:e.creaturestable.modalInfo.name,"ok-only":""},{default:u(()=>[t("h4",null,[s(a(e.creaturestable.modalInfo.size)+" "+a(e.creaturestable.modalInfo.type),1),e.creaturestable.modalInfo.subtype?(o(),n("span",E," ("+a(e.creaturestable.modalInfo.subtype)+")",1)):i("",!0),s(", "+a(e.creaturestable.modalInfo.alignment),1)]),t("p",null,[X,s(" "+a(e.creaturestable.modalInfo.acdesc)+" ",1),J,O,s(a(e.creaturestable.modalInfo.hpdesc)+" ",1),P,W,s(" "+a(e.creaturestable.modalInfo.speed),1)]),t("table",q,[F,t("tbody",null,[t("tr",null,[t("td",null,[s(a(e.creaturestable.modalInfo.str)+" (",1),e.creaturestable.modalInfo.strmod>0?(o(),n("span",G,"+")):i("",!0),s(a(e.creaturestable.modalInfo.strmod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.dex)+" (",1),e.creaturestable.modalInfo.dexmod>0?(o(),n("span",K,"+")):i("",!0),s(a(e.creaturestable.modalInfo.dexmod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.con)+" (",1),e.creaturestable.modalInfo.conmod>0?(o(),n("span",Q,"+")):i("",!0),s(a(e.creaturestable.modalInfo.conmod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.int)+" (",1),e.creaturestable.modalInfo.intmod>0?(o(),n("span",Y,"+")):i("",!0),s(a(e.creaturestable.modalInfo.intmod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.wis)+" (",1),e.creaturestable.modalInfo.wismod>0?(o(),n("span",Z,"+")):i("",!0),s(a(e.creaturestable.modalInfo.wismod)+")",1)]),t("td",null,[s(a(e.creaturestable.modalInfo.cha)+" (",1),e.creaturestable.modalInfo.chamod>0?(o(),n("span",x,"+")):i("",!0),s(a(e.creaturestable.modalInfo.chamod)+")",1)])])])]),t("p",null,[e.creaturestable.modalInfo.saves?(o(),n("span",ee,[te,s(" "+a(e.creaturestable.modalInfo.saves)+" ",1),se])):i("",!0),e.creaturestable.modalInfo.skills.length>0?(o(),n("span",ae,[le,s(" "+a(e.creaturestable.modalInfo.skills.join(", "))+" ",1),oe])):i("",!0),ne,s(" "+a(e.creaturestable.modalInfo.senses)+" ",1),re,e.creaturestable.modalInfo.damageresistances?(o(),n("span",ue,[ie,s(" "+a(e.creaturestable.modalInfo.damageresistances)+" ",1),de])):i("",!0),e.creaturestable.modalInfo.damageimmunities?(o(),n("span",me,[ce,s(" "+a(e.creaturestable.modalInfo.damageimmunities)+" ",1),be])):i("",!0),e.creaturestable.modalInfo.conditionimmunities?(o(),n("span",fe,[pe,s(" "+a(e.creaturestable.modalInfo.conditionimmunities)+" ",1),_e])):i("",!0),he,s(" "+a(e.creaturestable.modalInfo.languages)+" ",1),ge,ye,s(" "+a(e.creaturestable.modalInfo.cr),1)]),t("div",{innerHTML:e.creaturestable.modalInfo.descr},null,8,Ie)]),_:1},8,["onHide","title"])])}var Se=T(H,[["render",ke],["__scopeId","data-v-8a1c38a8"]]);export{Se as default};
