import{E as w,k as D,s as B,u as V,l as $,_ as T,h as p,o as n,c as u,i as b,w as h,a as t,G as m,F as z,r as A,f as l,t as s,e as i,p as L,g as N}from"./index.js";var P={setup(){const e=w(),a=D(),{isAdmin:c}=a,{getCreature:d,getAllCreatures:y}=e,{creatures:f}=B(e);return V({title:"Bestiary"}),{admin:c,creatures:f,getCreature:d,getAllCreatures:y}},components:{modal:$},computed:{filteredcreatures(){return this.creatures.filter(e=>{for(let a in e)if(e[a].toString().toLowerCase().includes(this.creaturestable.filterValue.toLowerCase()))return!0;return!1}).sort((e,a)=>e[this.creaturestable.sortBy]>a[this.creaturestable.sortBy]&&this.creaturestable.sortDesc===!1||e[this.creaturestable.sortBy]<a[this.creaturestable.sortBy]&&this.creaturestable.sortDesc===!0?1:-1)}},data(){return{modalProps:{title:"",isActive:!1},creaturestable:{fields:[{key:"name",label:"Name",sortable:!0},{key:"size",label:"Size",sortable:!0},{key:"cr",label:"CR",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"subtype",label:"Subtype",sortable:!0},{key:"alignment",label:"Alignment",sortable:!0}],filterValue:"",sortBy:"name",sortDesc:!1,filterBy:["name","size","cr","type","subtype","alignment","description"],modalInfo:{name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""}}}},methods:{async info(e,a,c){var d=await this.getCreature(e._id);this.creaturestable.modalInfo=d,this.modalProps={title:d.name,isActive:!0}},resetModal(){this.creaturestable.modalInfo={name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""}},filter(e){var a=this.creaturestable.filterBy,c=this.creaturestable.filterValue,d=a.some(function(y){for(var f in e)if(y===f&&e[f].toString().toLowerCase().includes(c.toLowerCase()))return!0});return!!(!c||d)},edit(e){confirm("are you sure you want to edit "+e.name+"?")+this.admin&&this.$router.push("/tools/creaturebuilder/"+e._id)}},mounted(){this.getAllCreatures()}};const r=e=>(L("data-v-85d74f6c"),e=e(),N(),e),M={class:"col-sm-12"},R=["disabled"],H={class:"table table-striped table-responsive",id:"creaturetable"},E=["onClick"],F=["onClick"],U=["onClick"],X={key:0},j=r(()=>t("strong",null,"Armor Class:",-1)),G=r(()=>t("br",null,null,-1)),O=r(()=>t("strong",null,"Hit Points:",-1)),W=r(()=>t("br",null,null,-1)),q=r(()=>t("strong",null,"Speed:",-1)),J={class:"table table-striped"},K=r(()=>t("thead",null,[t("tr",null,[t("th",null,"STR"),t("th",null,"DEX"),t("th",null,"CON"),t("th",null,"INT"),t("th",null,"WIS"),t("th",null,"CHA")])],-1)),Q={key:0},Y={key:0},Z={key:0},x={key:0},ee={key:0},te={key:0},se={key:0},ae=r(()=>t("strong",null,"Saving Throws:",-1)),le=r(()=>t("br",null,null,-1)),re={key:1},oe=r(()=>t("strong",null,"Skills:",-1)),ne=r(()=>t("br",null,null,-1)),ue=r(()=>t("strong",null,"Senses:",-1)),ie=r(()=>t("br",null,null,-1)),de={key:2},me=r(()=>t("strong",null,"Damage Resistances:",-1)),ce=r(()=>t("br",null,null,-1)),be={key:3},fe=r(()=>t("strong",null,"Damage Immunities:",-1)),pe=r(()=>t("br",null,null,-1)),he={key:4},ye=r(()=>t("strong",null,"Condition Immunities:",-1)),ge=r(()=>t("br",null,null,-1)),Ie=r(()=>t("strong",null,"Languages:",-1)),ke=r(()=>t("br",null,null,-1)),_e=r(()=>t("strong",null,"Challenge:",-1)),Ce=["innerHTML"];function ve(e,a,c,d,y,f){const I=p("b-col"),k=p("b-form-input"),_=p("b-input-group"),C=p("b-row"),v=p("modal");return n(),u("div",M,[b(C,null,{default:h(()=>[b(I,{md:"8"},{default:h(()=>[l(" \xA0 ")]),_:1}),b(I,{md:"4",class:"my-1"},{default:h(()=>[b(_,null,{default:h(()=>[b(k,{modelValue:e.creaturestable.filterValue,"onUpdate:modelValue":a[0]||(a[0]=o=>e.creaturestable.filterValue=o),placeholder:"Type to Search"},null,8,["modelValue"]),t("button",{disabled:!e.creaturestable.filterValue,onClick:a[1]||(a[1]=o=>e.creaturestable.filterValue=""),class:"btn btn-primary"},"Clear",8,R)]),_:1})]),_:1})]),_:1}),t("table",H,[t("thead",null,[t("tr",null,[t("th",null,[t("a",{href:"#",onClick:a[2]||(a[2]=m(o=>{e.creaturestable.sortBy="name",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Name")]),t("th",null,[t("a",{href:"#",onClick:a[3]||(a[3]=m(o=>{e.creaturestable.sortBy="size",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Size")]),t("th",null,[t("a",{href:"#",onClick:a[4]||(a[4]=m(o=>{e.creaturestable.sortBy="cr",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"CR")]),t("th",null,[t("a",{href:"#",onClick:a[5]||(a[5]=m(o=>{e.creaturestable.sortBy="type",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Type")]),t("th",null,[t("a",{href:"#",onClick:a[6]||(a[6]=m(o=>{e.creaturestable.sortBy="subtype",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Subtype")]),t("th",null,[t("a",{href:"#",onClick:a[7]||(a[7]=m(o=>{e.creaturestable.sortBy="alignment",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Alignment")])])]),t("tbody",null,[(n(!0),u(z,null,A(e.filteredcreatures,(o,S)=>(n(),u("tr",{key:o._id},[t("td",null,[t("span",null,[t("a",{href:"#",onClick:m(g=>e.info(o,S,g.target),["stop"])},s(o.name),9,E),e.admin?(n(),u("button",{key:0,class:"btn btn-warning btn-sm",onClick:g=>e.edit(o)},"\u270E",8,F)):i("",!0),e.admin?(n(),u("button",{key:1,class:"btn btn-sm btn-danger",onClick:g=>e.del(o)},"X",8,U)):i("",!0)])]),t("td",null,s(o.size),1),t("td",null,s(o.cr),1),t("td",null,s(o.type),1),t("td",null,s(o.subtype),1),t("td",null,s(o.alignment),1)]))),128))])]),b(v,{id:"creaturemodal",modalProps:e.modalProps,"ok-only":""},{default:h(()=>[t("h4",null,[l(s(e.creaturestable.modalInfo.size)+" "+s(e.creaturestable.modalInfo.type),1),e.creaturestable.modalInfo.subtype?(n(),u("span",X," ("+s(e.creaturestable.modalInfo.subtype)+")",1)):i("",!0),l(", "+s(e.creaturestable.modalInfo.alignment),1)]),t("p",null,[j,l(" "+s(e.creaturestable.modalInfo.acdesc)+" ",1),G,O,l(s(e.creaturestable.modalInfo.hpdesc)+" ",1),W,q,l(" "+s(e.creaturestable.modalInfo.speed),1)]),t("table",J,[K,t("tbody",null,[t("tr",null,[t("td",null,[l(s(e.creaturestable.modalInfo.str)+" (",1),e.creaturestable.modalInfo.strmod>0?(n(),u("span",Q,"+")):i("",!0),l(s(e.creaturestable.modalInfo.strmod)+")",1)]),t("td",null,[l(s(e.creaturestable.modalInfo.dex)+" (",1),e.creaturestable.modalInfo.dexmod>0?(n(),u("span",Y,"+")):i("",!0),l(s(e.creaturestable.modalInfo.dexmod)+")",1)]),t("td",null,[l(s(e.creaturestable.modalInfo.con)+" (",1),e.creaturestable.modalInfo.conmod>0?(n(),u("span",Z,"+")):i("",!0),l(s(e.creaturestable.modalInfo.conmod)+")",1)]),t("td",null,[l(s(e.creaturestable.modalInfo.int)+" (",1),e.creaturestable.modalInfo.intmod>0?(n(),u("span",x,"+")):i("",!0),l(s(e.creaturestable.modalInfo.intmod)+")",1)]),t("td",null,[l(s(e.creaturestable.modalInfo.wis)+" (",1),e.creaturestable.modalInfo.wismod>0?(n(),u("span",ee,"+")):i("",!0),l(s(e.creaturestable.modalInfo.wismod)+")",1)]),t("td",null,[l(s(e.creaturestable.modalInfo.cha)+" (",1),e.creaturestable.modalInfo.chamod>0?(n(),u("span",te,"+")):i("",!0),l(s(e.creaturestable.modalInfo.chamod)+")",1)])])])]),t("p",null,[e.creaturestable.modalInfo.saves?(n(),u("span",se,[ae,l(" "+s(e.creaturestable.modalInfo.saves)+" ",1),le])):i("",!0),e.creaturestable.modalInfo.skills.length>0?(n(),u("span",re,[oe,l(" "+s(e.creaturestable.modalInfo.skills.join(", "))+" ",1),ne])):i("",!0),ue,l(" "+s(e.creaturestable.modalInfo.senses)+" ",1),ie,e.creaturestable.modalInfo.damageresistances?(n(),u("span",de,[me,l(" "+s(e.creaturestable.modalInfo.damageresistances)+" ",1),ce])):i("",!0),e.creaturestable.modalInfo.damageimmunities?(n(),u("span",be,[fe,l(" "+s(e.creaturestable.modalInfo.damageimmunities)+" ",1),pe])):i("",!0),e.creaturestable.modalInfo.conditionimmunities?(n(),u("span",he,[ye,l(" "+s(e.creaturestable.modalInfo.conditionimmunities)+" ",1),ge])):i("",!0),Ie,l(" "+s(e.creaturestable.modalInfo.languages)+" ",1),ke,_e,l(" "+s(e.creaturestable.modalInfo.cr),1)]),t("div",{innerHTML:e.creaturestable.modalInfo.descr},null,8,Ce)]),_:1},8,["modalProps"])])}var we=T(P,[["render",ve],["__scopeId","data-v-85d74f6c"]]);export{we as default};
