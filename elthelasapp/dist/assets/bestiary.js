import{g as V,b as z,m as w,_ as $}from"./index.js";import{h as A,u as T,i as y,o as n,c as u,j as m,w as _,f as t,N as p,F as N,l as I,k as o,p as v,M as k,v as C,t as r,g as i,J as L,K as P}from"./vendor.js";import{c as R}from"./creaturecalc.js";var U={setup(){const e=V(),l=z(),{isAdmin:d}=l,{getCreature:h,getAllCreatures:b}=e,{creatures:c}=A(e);return T({title:"Bestiary"}),{admin:d,creatures:c,getCreature:h,getAllCreatures:b,creaturecalc:R}},components:{modal:w},computed:{filteredcreatures(){return this.creatures.filter(e=>{var l=this.creaturestable.filterValue.split(" ");let d=!0;return this.typeFilter!==""&&e.type!==this.typeFilter||this.sizeFilter!==""&&e.size!==this.sizeFilter||this.crFilterMin>e.cr||this.crFilterMax<e.cr?!1:(l.forEach(h=>{let b=this.creaturestable.filterBy.some(function(c){for(var f in e)if(c===f&&e[f].toString().toLowerCase().includes(h.toLowerCase()))return!0});this.creaturestable.filterValue&&!b&&(d=!1)}),!!d)}).sort((e,l)=>e[this.creaturestable.sortBy]>l[this.creaturestable.sortBy]&&this.creaturestable.sortDesc===!1||e[this.creaturestable.sortBy]<l[this.creaturestable.sortBy]&&this.creaturestable.sortDesc===!0?1:-1)}},data(){return{modalProps:{title:"",isActive:!1},typeFilter:"",sizeFilter:"",crFilterMin:0,crFilterMax:40,creaturestable:{fields:[{key:"name",label:"Name",sortable:!0},{key:"size",label:"Size",sortable:!0},{key:"cr",label:"CR",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"subtype",label:"Subtype",sortable:!0},{key:"alignment",label:"Alignment",sortable:!0}],filterValue:"",sortBy:"name",sortDesc:!1,filterBy:["name","size","cr","type","subtype","alignment","description"]},creature:{stats:[8,8,8,8,8,8],skills:[]}}},methods:{async info(e){this.creature=await this.getCreature(e._id),this.modalProps={title:this.creature.name,isActive:!0}},resetModal(){this.creature={stats:[0,0,0,0,0,0],skills:[]}},filter(e){var l=this.creaturestable.filterBy,d=this.creaturestable.filterValue,h=l.some(function(b){for(var c in e)if(b===c&&e[c].toString().toLowerCase().includes(d.toLowerCase()))return!0});return!!(!d||h)},edit(e){confirm("are you sure you want to edit "+e.name+"?")+this.admin&&this.$router.push("/tools/creaturebuilder/"+e._id)}},mounted(){this.getAllCreatures()}};const s=e=>(L("data-v-5817fe96"),e=e(),P(),e),H={class:"col-sm-12"},E=s(()=>t("option",{value:""},"All",-1)),j=s(()=>t("option",{value:"aberration"},"Aberration",-1)),O=s(()=>t("option",{value:"beast"},"Beast",-1)),X=s(()=>t("option",{value:"celestial"},"Celestial",-1)),G=s(()=>t("option",{value:"construct"},"Construct",-1)),J=s(()=>t("option",{value:"dragon"},"Dragon",-1)),K=s(()=>t("option",{value:"elemental"},"Elemental",-1)),W=s(()=>t("option",{value:"fey"},"Fey",-1)),q=s(()=>t("option",{value:"fiend"},"Fiend",-1)),Q=s(()=>t("option",{value:"giant"},"Giant",-1)),Y=s(()=>t("option",{value:"humanoid"},"Humanoid",-1)),Z=s(()=>t("option",{value:"monstrosity"},"Monstrosity",-1)),x=s(()=>t("option",{value:"plant"},"Plant",-1)),ee=s(()=>t("option",{value:"ooze"},"Ooze",-1)),te=s(()=>t("option",{value:"undead"},"Undead",-1)),se=[E,j,O,X,G,J,K,W,q,Q,Y,Z,x,ee,te],re=s(()=>t("br",null,null,-1)),le=s(()=>t("option",{value:""},"All",-1)),oe=s(()=>t("option",{value:"tiny"},"tiny",-1)),ae=s(()=>t("option",{value:"small"},"small",-1)),ne=s(()=>t("option",{value:"medium"},"medium",-1)),ue=s(()=>t("option",{value:"large"},"large",-1)),ie=s(()=>t("option",{value:"huge"},"huge",-1)),de=s(()=>t("option",{value:"gargantuan"},"gargantuan",-1)),ce=s(()=>t("option",{value:"colossal"},"colossal",-1)),pe=[le,oe,ae,ne,ue,ie,de,ce],he=s(()=>t("br",null,null,-1)),be=s(()=>t("br",null,null,-1)),me=s(()=>t("br",null,null,-1)),fe=s(()=>t("div",{class:"col-2"},null,-1)),ye=s(()=>t("div",{class:"col-sm-2"},null,-1)),_e=["disabled"],ve={class:"table table-striped table-responsive",id:"creaturetable"},ge=["onClick"],ke=["onClick"],Ce=["onClick"],Me={key:0},Se=s(()=>t("strong",null,"Armor Class:",-1)),Fe=s(()=>t("br",null,null,-1)),De=s(()=>t("strong",null,"Hit Points:",-1)),Be=s(()=>t("br",null,null,-1)),Ve=s(()=>t("strong",null,"Speed:",-1)),ze={class:"table table-striped"},we=s(()=>t("thead",null,[t("tr",null,[t("th",null,"STR"),t("th",null,"DEX"),t("th",null,"CON"),t("th",null,"INT"),t("th",null,"WIS"),t("th",null,"CHA")])],-1)),$e={key:0},Ae={key:0},Te={key:0},Ne={key:0},Ie={key:0},Le={key:0},Pe={key:0},Re=s(()=>t("strong",null,"Saving Throws:",-1)),Ue=s(()=>t("br",null,null,-1)),He={key:1},Ee=s(()=>t("strong",null,"Skills:",-1)),je=s(()=>t("br",null,null,-1)),Oe=s(()=>t("strong",null,"Senses:",-1)),Xe=s(()=>t("br",null,null,-1)),Ge={key:2},Je=s(()=>t("strong",null,"Damage Resistances:",-1)),Ke=s(()=>t("br",null,null,-1)),We={key:3},qe=s(()=>t("strong",null,"Damage Immunities:",-1)),Qe=s(()=>t("br",null,null,-1)),Ye={key:4},Ze=s(()=>t("strong",null,"Condition Immunities:",-1)),xe=s(()=>t("br",null,null,-1)),et=s(()=>t("strong",null,"Languages:",-1)),tt=s(()=>t("br",null,null,-1)),st=s(()=>t("strong",null,"Challenge:",-1)),rt=["innerHTML"];function lt(e,l,d,h,b,c){const f=y("b-col"),M=y("b-form-input"),S=y("b-input-group"),F=y("b-row"),D=y("modal");return n(),u("div",H,[m(F,null,{default:_(()=>[m(f,{md:"2"},{default:_(()=>[t("label",null,[o(" Type "),v(t("select",{"onUpdate:modelValue":l[0]||(l[0]=a=>e.typeFilter=a)},se,512),[[k,e.typeFilter]]),o(),re,o(" Size "),v(t("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>e.sizeFilter=a)},pe,512),[[k,e.sizeFilter]]),o(),he,o(" CR Min "),v(t("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=a=>e.crFilterMin=a),class:"charsheet-num"},null,512),[[C,e.crFilterMin]]),o(),be,o(" Max "),v(t("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=a=>e.crFilterMax=a),class:"charsheet-num"},null,512),[[C,e.crFilterMax]]),me])]),_:1}),fe,ye,m(f,{md:"4",class:"my-1"},{default:_(()=>[m(S,null,{default:_(()=>[m(M,{modelValue:e.creaturestable.filterValue,"onUpdate:modelValue":l[4]||(l[4]=a=>e.creaturestable.filterValue=a),placeholder:"Type to Search"},null,8,["modelValue"]),t("button",{class:"btn btn-primary",disabled:!e.creaturestable.filterValue,onClick:l[5]||(l[5]=a=>e.creaturestable.filterValue="")},"Clear",8,_e)]),_:1}),o(" Results: "+r(e.filteredcreatures.length),1)]),_:1})]),_:1}),t("table",ve,[t("thead",null,[t("tr",null,[t("th",null,[t("a",{href:"#",onClick:l[6]||(l[6]=p(a=>{e.creaturestable.sortBy="name",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Name")]),t("th",null,[t("a",{href:"#",onClick:l[7]||(l[7]=p(a=>{e.creaturestable.sortBy="size",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Size")]),t("th",null,[t("a",{href:"#",onClick:l[8]||(l[8]=p(a=>{e.creaturestable.sortBy="cr",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"CR")]),t("th",null,[t("a",{href:"#",onClick:l[9]||(l[9]=p(a=>{e.creaturestable.sortBy="type",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Type")]),t("th",null,[t("a",{href:"#",onClick:l[10]||(l[10]=p(a=>{e.creaturestable.sortBy="subtype",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Subtype")]),t("th",null,[t("a",{href:"#",onClick:l[11]||(l[11]=p(a=>{e.creaturestable.sortBy="alignment",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Alignment")])])]),t("tbody",null,[(n(!0),u(N,null,I(e.filteredcreatures,(a,B)=>(n(),u("tr",{key:a._id},[t("td",null,[t("span",null,[t("a",{href:"#",onClick:p(g=>e.info(a,B,g.target),["stop"])},r(a.name),9,ge),e.admin?(n(),u("button",{key:0,class:"btn btn-warning btn-sm",onClick:g=>e.edit(a)},"\u270E",8,ke)):i("",!0),e.admin?(n(),u("button",{key:1,class:"btn btn-sm btn-danger",onClick:g=>e.del(a)},"X",8,Ce)):i("",!0)])]),t("td",null,r(a.size),1),t("td",null,r(a.cr),1),t("td",null,r(a.type),1),t("td",null,r(a.subtype),1),t("td",null,r(a.alignment),1)]))),128))])]),m(D,{id:"creaturemodal",modalProps:e.modalProps,"ok-only":""},{default:_(()=>[t("h4",null,[o(r(e.creature.size)+" "+r(e.creature.type),1),e.creature.subtype?(n(),u("span",Me," ("+r(e.creature.subtype)+")",1)):i("",!0),o(", "+r(e.creature.alignment),1)]),t("p",null,[Se,o(" "+r(e.creature.ac)+" "+r(e.creature.acdesc)+" ",1),Fe,De,o(r(e.creaturecalc.hp(e.creature))+" ("+r(e.creaturecalc.basehp(e.creature))+" + "+r(e.creaturecalc.pp(e.creature))+") ",1),Be,Ve,o(" "+r(e.creature.speed),1)]),t("table",ze,[we,t("tbody",null,[t("tr",null,[t("td",null,[o(r(e.creature.stats[0])+" (",1),e.creaturecalc.statMod(e.creature,0)>0?(n(),u("span",$e,"+")):i("",!0),o(r(e.creaturecalc.statMod(e.creature,0))+")",1)]),t("td",null,[o(r(e.creature.stats[1])+" (",1),e.creaturecalc.statMod(e.creature,1)>0?(n(),u("span",Ae,"+")):i("",!0),o(r(e.creaturecalc.statMod(e.creature,1))+")",1)]),t("td",null,[o(r(e.creature.stats[2])+" (",1),e.creaturecalc.statMod(e.creature,2)>0?(n(),u("span",Te,"+")):i("",!0),o(r(e.creaturecalc.statMod(e.creature,2))+")",1)]),t("td",null,[o(r(e.creature.stats[3])+" (",1),e.creaturecalc.statMod(e.creature,3)>0?(n(),u("span",Ne,"+")):i("",!0),o(r(e.creaturecalc.statMod(e.creature,3))+")",1)]),t("td",null,[o(r(e.creature.stats[4])+" (",1),e.creaturecalc.statMod(e.creature,4)>0?(n(),u("span",Ie,"+")):i("",!0),o(r(e.creaturecalc.statMod(e.creature,4))+")",1)]),t("td",null,[o(r(e.creature.stats[5])+" (",1),e.creaturecalc.statMod(e.creature,5)>0?(n(),u("span",Le,"+")):i("",!0),o(r(e.creaturecalc.statMod(e.creature,5))+")",1)])])])]),t("p",null,[e.creature.saves?(n(),u("span",Pe,[Re,o(" "+r(e.creature.saves)+" ",1),Ue])):i("",!0),e.creature.skills.length>0?(n(),u("span",He,[Ee,o(" "+r(e.creature.skills.join(", "))+" ",1),je])):i("",!0),Oe,o(" "+r(e.creature.senses)+" ",1),Xe,e.creature.damageresistances?(n(),u("span",Ge,[Je,o(" "+r(e.creature.damageresistances)+" ",1),Ke])):i("",!0),e.creature.damageimmunities?(n(),u("span",We,[qe,o(" "+r(e.creature.damageimmunities)+" ",1),Qe])):i("",!0),e.creature.conditionimmunities?(n(),u("span",Ye,[Ze,o(" "+r(e.creature.conditionimmunities)+" ",1),xe])):i("",!0),et,o(" "+r(e.creature.languages)+" ",1),tt,st,o(" "+r(e.creature.cr),1)]),t("div",{innerHTML:e.creature.descr},null,8,rt)]),_:1},8,["modalProps"])])}var ut=$(U,[["render",lt],["__scopeId","data-v-5817fe96"]]);export{ut as default};
