var Ce=Object.defineProperty,Re=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var re=(l,t,m)=>t in l?Ce(l,t,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[t]=m,E=(l,t)=>{for(var m in t||(t={}))Le.call(t,m)&&re(l,m,t[m]);if(ae)for(var m of ae(t))Ne.call(t,m)&&re(l,m,t[m]);return l},ne=(l,t)=>Re(l,Ie(t));import{g as P,a as K,_ as F}from"./index.js";import{i as B,o as d,e as i,g as e,l as s,t as n,h as k,q as p,v as b,L as D,F as w,p as _,I as O,J as H,j as U,k as C,w as L,M as J,n as X,D as Me,u as Ue}from"./vendor.js";var Ve={props:["improvement","stronghold"],setup(){const l=P(),t=K(),{forestedLand:m,calcRevRatio:c,calculateIncome:y,calculateRevenue:f,guardsNeeded:o,laborersNeeded:u,servantsNeeded:r,availableLaborers:v,availableOfType:$}=B(l),{getUserInfo:I}=t;return{forestedLand:m,calcRevRatio:c,calculateIncome:y,calculateRevenue:f,guardsNeeded:o,laborersNeeded:u,servantsNeeded:r,availableLaborers:v,availableOfType:$,userinfo:I}},data(){return{}},methods:{min(l){return Math.min(...l)},removeImprovement(l){l.removeNum?(l.count-=l.removeNum,l.count<=0&&this.stronghold.improvements.splice(this.stronghold.improvements.indexOf(l),1)):alert("please select the amount to remove.")}}};const V=l=>(O("data-v-5ebac29b"),l=l(),H(),l),De={key:0},Ee={key:1},Pe=["max"],Fe={key:0},Be=V(()=>e("th",null,"Benefit",-1)),Oe=V(()=>e("th",null,"Income",-1)),He=V(()=>e("th",null,"Operational",-1)),je=V(()=>e("th",null,"Resources Produced",-1)),Ge=V(()=>e("th",null,"Population",-1)),Ye=V(()=>e("th",null,"Efficiency",-1)),qe=V(()=>e("th",null,"Employs",-1)),We=["max"],ze=V(()=>e("th",null,"Staff Required to Operate",-1)),Xe={key:0},Je=["onUpdate:modelValue","max"],Ke={key:0},Qe={key:1};function Ze(l,t,m,c,y,f){return d(),i("div",null,[e("h6",null,[s(n(l.improvement.name)+" x "+n(l.improvement.count)+" ",1),e("button",{onClick:t[0]||(t[0]=o=>l.improvement.hide=!l.improvement.hide),class:"btn btn-sm btn-primary"},[l.improvement.hide?(d(),i("span",De,"Show")):k("",!0),l.improvement.hide?k("",!0):(d(),i("span",Ee,"Hide"))]),s("\xA0 "),p(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>l.improvement.removeNum=o),style:{width:"75px",display:"inline","margin-top":"1px"},class:"form-control form-control-sm",min:"0",max:l.improvement.count,step:"1"},null,8,Pe),[[b,l.improvement.removeNum]]),s("\xA0 "),e("button",{onClick:t[2]||(t[2]=o=>l.removeImprovement(l.improvement)),class:"btn btn-sm btn-danger"}," X ")]),l.improvement.hide?k("",!0):(d(),i("table",Fe,[e("tr",null,[Be,e("td",null,n(l.improvement.benefit),1)]),e("tr",null,[Oe,e("td",null,n(l.calculateIncome(l.improvement)),1)]),e("tr",null,[He,e("td",null,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=o=>l.improvement.operating=o)},null,512),[[D,l.improvement.operating]])])]),e("tr",null,[je,e("td",null,[l.improvement.revenue[l.res]!==0?(d(!0),i(w,{key:0},_(l.calculateRevenue(l.improvement),(o,u)=>(d(),i("div",{key:u},n(u)+": "+n(o),1))),128)):k("",!0)])]),e("tr",null,[Ge,e("td",null,n(l.improvement.count*l.improvement.pop),1)]),e("tr",null,[Ye,e("td",null,n(l.calcRevRatio(l.improvement)*100)+"%",1)]),e("tr",null,[qe,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>l.improvement.laborers=o),class:"form-control",style:{"max-width":"75px",display:"inline"},min:"0",max:l.min([l.improvement.employs*l.improvement.count,Number(l.improvement.laborers)+l.availableLaborers])},null,8,We),[[b,l.improvement.laborers]]),s(" / "+n(l.improvement.employs*l.improvement.count),1)])]),e("tr",null,[ze,e("td",null,[l.improvement.staff.length===0?(d(),i("span",Xe,"None")):k("",!0),(d(!0),i(w,null,_(l.improvement.staff,o=>(d(),i("div",{key:o.name},[p(e("input",{type:"number","onUpdate:modelValue":u=>o.cur=u,style:{width:"75px",display:"inline"},class:"form-control",min:"0",max:l.min([Number(o.cur)+l.availableOfType(o.name),o.num*l.improvement.count])},null,8,Je),[[b,o.cur]]),s(" / "),o.num>0?(d(),i("span",Ke,n(o.num*l.improvement.count),1)):k("",!0),s(" "+n(o.name)+" ",1),o.num===0?(d(),i("span",Qe,"(Can be shared with another job)")):k("",!0)]))),128))])])]))])}var xe=F(Ve,[["render",Ze],["__scopeId","data-v-5ebac29b"]]),el={components:{improvement:xe},setup(){const l=P(),t=K(),{availableClearedLand:m,availableForestedLand:c,farmLand:y,forestedLand:f,improvements:o,stronghold:u,timberLand:r,totalLand:v,urbanLand:$,availableLaborers:I}=B(l),{addImprovement:N,addToTreasury:a,buyResource:g}=l,{getUserInfo:R}=t;return{availableClearedLand:m,availableForestedLand:c,farmLand:y,forestedLand:f,improvements:o,stronghold:u,timberLand:r,totalLand:v,urbanLand:$,availableLaborers:I,userinfo:R,addImprovement:N,addToTreasury:a,buyResource:g}},computed:{availableImprovements(){if(this.showAvailable){let l=this.stronghold;return this.improvements.filter(t=>{let m=!0,c=l.improvements.filter(f=>f.id===t.id)[0],y=l.construction.filter(f=>f.id===t.id);return(c&&c.count+y.length>=t.max||y.length>=t.max)&&(m=!1),t.prerequisites.forEach(f=>{let o=!1;l.improvements.forEach(u=>{u.id===f&&(o=!0)}),l.privateEnterprise.forEach(u=>{u.id===f&&(o=!0)}),o===!1&&(m=!1)}),(t.isfarm&&this.availableClearedLand<1||(t.id==="town"||t.id==="additional-district")&&this.availableForestedLand<1.25||t.id==="village"&&this.availableForestedLand<.25||(t.id==="clear-land"||t.id==="lumber-camp")&&this.availableForestedLand<1)&&(m=!1),this.tagFilter!=="all"&&(t.tags.includes(this.tagFilter)||(m=!1)),m})}else return this.tagFilter!=="all"?this.improvements.filter(l=>l.tags.includes(this.tagFilter)):this.improvements},castleImprovements(){return this.stronghold.improvements.filter(l=>l.type==="castle").sort((l,t)=>l.name>t.name?1:-1)},countrysideImprovements(){return this.stronghold.improvements.filter(l=>l.type==="countryside").sort((l,t)=>l.name>t.name?1:-1)},townImprovements(){return this.stronghold.improvements.filter(l=>l.type==="town").sort((l,t)=>l.name>t.name?1:-1)}},data(){return{addImprovementModal:!1,showAvailable:!0,dmGift:!1,addImediately:!1,tagFilter:"all"}},methods:{min(l){return Math.min(...l)},addToConstruction(l){let t=l.buildtime;this.addImediately&&(t=0),t>0?this.stronghold.construction.push(ne(E({},l),{resourceCost:E({},l.resourceCost),laborersassigned:0})):this.addImprovement(l),l.dmGift=!1,!this.dmGift&&!l.private&&this.addToTreasury({changeby:-l.goldCost,record:"Begin construction on "+l.name}),this.dmGift&&(l.dmGift=!0),this.addImprovementModal=!1}}};const S=l=>(O("data-v-68a24067"),l=l(),H(),l),ll={class:"row"},tl={class:"col-sm-3"},nl={class:"col-sm-3"},ol=S(()=>e("h4",null,"Countryside Improvements",-1)),sl={key:0},al={class:"col-sm-3"},rl={class:"col-sm-3"},dl=S(()=>e("h4",null,"Under Construction",-1)),il={class:"table table-sm table-striped"},ul=S(()=>e("thead",null,[e("tr",null,[e("th",null,"Improvement"),e("th",{title:"number of days remaining if you have 10 laborers working construction on the building"},"LabDays Rem."),e("th",null,"Laborers")])],-1)),hl={key:0},ml=["onUpdate:modelValue"],cl=["onUpdate:modelValue","max"],pl=S(()=>e("option",{value:"all"},"All",-1)),gl=S(()=>e("option",{value:"infrastructure"},"Infrastructure",-1)),bl=S(()=>e("option",{value:"income"},"Income",-1)),fl=S(()=>e("option",{value:"player-benefit"},"Player Benefit",-1)),vl=S(()=>e("option",{value:"housing"},"Housing",-1)),yl=S(()=>e("option",{value:"defense"},"Defense",-1)),wl=S(()=>e("option",{value:"faction-base"},"Potential Base",-1)),_l=[pl,gl,bl,fl,vl,yl,wl],$l={style:{"overflow-y":"scroll",height:"600px"}},kl={class:"table table-striped table-responsive",style:{width:"100%"}},Sl=S(()=>e("colgroup",null,[e("col",{style:{width:"10%"}}),e("col"),e("col",{style:{width:"30%"}}),e("col",{style:{width:"10%"}}),e("col"),e("col"),e("col"),e("col"),e("col")],-1)),Tl=S(()=>e("thead",null,[e("tr",null,[e("th",null,"Improvement"),e("th",null,"Private"),e("th",null,"Benefit"),e("th",null,"Staff"),e("th",null,"Revenue"),e("th",null,"Pop / Beds"),e("th",null,"Employs"),e("th",null,"Cost"),e("th",null,"Build Time")])],-1)),Al=["onClick"],Cl=["onUpdate:modelValue"],Rl={key:0},Il={key:0},Ll={key:0},Nl=S(()=>e("tfoot",null,[e("tr",null,[e("th",null,"Improvement"),e("th",null,"Benefit"),e("th",null,"Staff"),e("th",null,"Revenue"),e("th",null,"Pop"),e("th",null,"Employs"),e("th",null,"Cost"),e("th",null,"Build Time")])],-1)),Ml=S(()=>e("h4",null,"Land Details",-1)),Ul={class:"row"},Vl={class:"col-sm-3"},Dl=S(()=>e("br",null,null,-1)),El=S(()=>e("br",null,null,-1)),Pl={class:"col-sm-3"},Fl=S(()=>e("br",null,null,-1)),Bl=S(()=>e("br",null,null,-1)),Ol=S(()=>e("br",null,null,-1)),Hl={class:"col-sm-3"},jl=S(()=>e("br",null,null,-1)),Gl=S(()=>e("br",null,null,-1)),Yl=S(()=>e("br",null,null,-1));function ql(l,t,m,c,y,f){const o=U("improvement"),u=U("b-modal");return d(),i("div",null,[e("h2",null,[s("Improvements \xA0"),e("button",{onClick:t[0]||(t[0]=r=>l.addImprovementModal=!0),class:"btn btn-success"},"+")]),e("div",ll,[e("div",tl,[e("h4",null,n(l.stronghold.castleName)+" Castle Improvements",1),(d(!0),i(w,null,_(l.castleImprovements,r=>(d(),i("div",{key:r.id},[C(o,{improvement:r,stronghold:l.stronghold},null,8,["improvement","stronghold"])]))),128))]),e("div",nl,[ol,(d(!0),i(w,null,_(l.countrysideImprovements,r=>(d(),i("div",{key:r.id},[r.id!=="new-land"&&r.id!=="clear-land"?(d(),i("div",sl,[C(o,{improvement:r,stronghold:l.stronghold},null,8,["improvement","stronghold"])])):k("",!0)]))),128))]),e("div",al,[e("h4",null,n(l.stronghold.townName)+" Town Improvements",1),(d(!0),i(w,null,_(l.townImprovements,r=>(d(),i("div",{key:r.id},[C(o,{improvement:r,stronghold:l.stronghold},null,8,["improvement","stronghold"])]))),128))]),e("div",rl,[dl,e("table",il,[ul,e("tbody",null,[(d(!0),i(w,null,_(l.stronghold.construction,(r,v)=>(d(),i("tr",{key:r.id+v},[e("td",null,[s(n(r.name)+" ",1),r.private?(d(),i("span",hl,"(private)")):k("",!0)]),e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":$=>r.buildtime=$,min:"0",style:{"max-width":"75px"}},null,8,ml),[[b,r.buildtime]])]),e("td",null,[r.private?k("",!0):p((d(),i("input",{key:0,type:"number","onUpdate:modelValue":$=>r.laborersassigned=$,min:"0",max:l.min([r.buildtime,l.availableLaborers+r.laborersassigned]),style:{"max-width":"75px"}},null,8,cl)),[[b,r.laborersassigned]])])]))),128))])])]),C(u,{modelValue:l.addImprovementModal,"onUpdate:modelValue":t[5]||(t[5]=r=>l.addImprovementModal=r),title:"Add Improvement",size:"xl"},{default:L(()=>[p(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=r=>l.showAvailable=r)},null,512),[[D,l.showAvailable]]),s(" Only Show Available Improvements "),p(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=r=>l.dmGift=r)},null,512),[[D,l.dmGift]]),s(" DM Gift (added without cost) "),p(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=r=>l.addImediately=r)},null,512),[[D,l.addImediately]]),s(" Ignore Construction Time "),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>l.tagFilter=r)},_l,512),[[J,l.tagFilter]]),e("div",$l,[e("table",kl,[Sl,Tl,e("tbody",null,[(d(!0),i(w,null,_(l.availableImprovements,r=>(d(),i("tr",{key:r.id},[e("td",null,[e("a",{href:"#",onClick:v=>l.addToConstruction(r)},n(r.name),9,Al)]),e("td",null,[p(e("input",{type:"checkbox","onUpdate:modelValue":v=>r.private=v},null,8,Cl),[[D,r.private]])]),e("td",null,n(r.benefit),1),e("td",null,[(d(!0),i(w,null,_(r.staff,v=>(d(),i("span",{key:v.name},[v.num>0?(d(),i("span",Rl,n(v.num),1)):k("",!0),s(" "+n(v.name),1)]))),128))]),e("td",null,[e("div",null,"Gold: "+n(r.income),1),(d(!0),i(w,null,_(r.revenue,(v,$)=>(d(),i("div",{key:$},[v!==0?(d(),i("div",Il,n($)+": "+n(v),1)):k("",!0)]))),128))]),e("td",null,n(r.pop)+" / "+n(r.staffpop),1),e("td",null,n(r.employs),1),e("td",null,[e("div",null,"Gold: "+n(r.goldCost),1),(d(!0),i(w,null,_(r.resourceCost,(v,$)=>(d(),i("div",{key:$},[v!==0?(d(),i("div",Ll,n($)+": "+n(v),1)):k("",!0)]))),128))]),e("td",null,n(r.buildtime),1)]))),128))]),Nl])])]),_:1},8,["modelValue"])]),Ml,e("div",Ul,[e("div",Vl,[s(" Total Land: "+n(l.totalLand),1),Dl,s(" Total Cleared Land: "+n(l.availableClearedLand+l.farmLand+l.urbanLand),1),El]),e("div",Pl,[s(" Total Forested Land: "+n(l.forestedLand),1),Fl,s(" Land Used For Timber Harvesting: "+n(l.timberLand),1),Bl,s(" Available Forested Land: "+n(l.availableForestedLand),1),Ol]),e("div",Hl,[s(" Available Cleared Land: "+n(l.availableClearedLand),1),jl,s(" Farm Land: "+n(l.farmLand),1),Gl,s(" Urban Land: "+n(l.urbanLand),1),Yl])])])}var Wl=F(el,[["render",ql],["__scopeId","data-v-68a24067"]]),zl={setup(){const l=P(),t=K(),{guardsNeeded:m,totalSalary:c,getPop:y,stronghold:f,servantsNeeded:o,laborersNeeded:u,staffSummary:r,maxLaborers:v,availableStaffBeds:$,unmetStaffNeed:I,staffTypes:N,totalHousing:a}=B(l),{getUserInfo:g}=t;return{guardsNeeded:m,totalSalary:c,getPop:y,stronghold:f,servantsNeeded:o,laborersNeeded:u,staffSummary:r,maxLaborers:v,availableStaffBeds:$,unmetStaffNeed:I,staffTypes:N,totalHousing:a,userinfo:g}},computed:{staffList(){return[...this.stronghold.staff].sort((l,t)=>this.staffSort==="job"?l.job.name>t.job.name?1:-1:l[this.staffSort]>t[this.staffSort]?1:-1)}},data(){return{newstaff:{name:"",job:{name:"",typicalSalary:0,bonus:"",subtype:""},salary:0},staffSort:"name"}},methods:{addStaff(){this.stronghold.staff.push(ne(E({id:Date.now()},this.newstaff),{job:E({},this.newstaff.job)})),this.newstaff={name:"",job:{name:"",typicalSalary:0,bonus:""},salary:0}},fireStaff(l){this.stronghold.staff.splice(this.stronghold.staff.indexOf(l),1)}}};const T=l=>(O("data-v-adcb1430"),l=l(),H(),l),Xl=T(()=>e("h2",null,"Staff",-1)),Jl={class:"row"},Kl={class:"col-sm-5"},Ql=T(()=>e("h4",null,"Population",-1)),Zl={class:"table table-striped table-sm"},xl=T(()=>e("colgroup",null,[e("col"),e("col",{style:{wdith:"15%"}})],-1)),et=T(()=>e("td",null,"Healthy Adults",-1)),lt=T(()=>e("td",null,"Children",-1)),tt=T(()=>e("td",null,"Sick",-1)),nt=T(()=>e("td",null,"Total Population",-1)),ot=T(()=>e("h4",null,"Staff Summary",-1)),st={class:"table table-striped table-sm"},at=T(()=>e("colgroup",null,[e("col"),e("col",{style:{width:"15%"}})],-1)),rt=T(()=>e("thead",null,[e("th",null,"Job"),e("th",null,"Total"),e("th",null,"Needed"),e("th",null,"Bonus")],-1)),dt=T(()=>e("td",null,"Guards",-1)),it=["max"],ut=T(()=>e("td",null,"Protects your stronghold from attack, can also collect taxes.",-1)),ht=T(()=>e("td",null,"Servants",-1)),mt=["max"],ct=T(()=>e("td",null,"Handles common household tasks like cleaning and cooking.",-1)),pt=T(()=>e("td",null,"Laborers",-1)),gt=["max"],bt=T(()=>e("td",null,"Does manual labor in many employments, from a blacksmiths apprentice/journeyman to cutting down trees.",-1)),ft={key:0},vt={key:0,class:"red"},yt={key:1,class:"red"},wt={class:"col-sm-2"},_t=T(()=>e("h4",null,"Unmet Needs",-1)),$t=T(()=>e("h4",null,"Add Staff",-1)),kt=["value"],St={key:0},Tt=["value"],At=T(()=>e("br",null,null,-1)),Ct=T(()=>e("br",null,null,-1)),Rt=["disabled"],It={class:"col-sm-5"},Lt=T(()=>e("h4",null,"Staff List",-1)),Nt={class:"table table-striped table-sm"},Mt=T(()=>e("th",null,"Fire",-1)),Ut={key:0},Vt=["onClick"];function Dt(l,t,m,c,y,f){return d(),i("div",null,[Xl,e("div",Jl,[e("div",Kl,[Ql,e("table",Zl,[xl,e("tbody",null,[e("tr",null,[et,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=o=>l.stronghold.population.adults=o),class:"form-control",min:"0"},null,512),[[b,l.stronghold.population.adults]])])]),e("tr",null,[lt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>l.stronghold.population.children=o),class:"form-control",min:"0"},null,512),[[b,l.stronghold.population.children]])])]),e("tr",null,[tt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>l.stronghold.population.invalid=o),class:"form-control",min:"0"},null,512),[[b,l.stronghold.population.invalid]])])]),e("tr",null,[nt,e("td",null,n(l.getPop),1)])])]),ot,s(" Total Staff Salary: "+n(l.totalSalary)+" ",1),e("table",st,[at,rt,e("tbody",null,[e("tr",null,[dt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>l.stronghold.guards=o),class:"form-control",min:"0",max:l.availableStaffBeds+Number(l.stronghold.guards)},null,8,it),[[b,l.stronghold.guards]])]),e("td",null,n(l.guardsNeeded),1),ut]),e("tr",null,[ht,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>l.stronghold.servants=o),class:"form-control",min:"0",max:l.availableStaffBeds+Number(l.stronghold.servants)},null,8,mt),[[b,l.stronghold.servants]])]),e("td",null,n(l.servantsNeeded),1),ct]),e("tr",null,[pt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=o=>l.stronghold.laborers=o),class:"form-control",min:"0",max:l.maxLaborers,title:"You can hire laborers up to the number of healthy adults (not including staff, the other 30% are kids too young to work), private enterprises will suck up a certain percentage of the labor market though."},null,8,gt),[[b,l.stronghold.laborers]])]),e("td",null,n(l.laborersNeeded),1),bt]),(d(!0),i(w,null,_(l.staffSummary,o=>(d(),i("tr",{key:o.job.name+o.job.subtype},[e("td",null,[s(n(o.job.name)+" ",1),o.job.subtype?(d(),i("span",ft,"("+n(o.job.subtype)+")",1)):k("",!0)]),e("td",null,n(o.count),1),e("td",null,n(o.needed),1),e("td",null,n(o.job.bonus),1)]))),128))])]),l.stronghold.laborers>=l.maxLaborers?(d(),i("div",vt,"Not Enough Housing or Healthy Adults To Hire Additional Laborers")):k("",!0),l.availableStaffBeds<=0?(d(),i("div",yt,"Not Enough Beds To House Additional Skilled Staff")):k("",!0)]),e("div",wt,[_t,(d(!0),i(w,null,_(l.unmetStaffNeed,o=>(d(),i("div",{key:o.name},n(o.name)+" x "+n(o.num),1))),128)),$t,e("div",null,[e("label",null,[s(" Name "),p(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>l.newstaff.name=o),class:"form-control form-control-sm"},null,512),[[b,l.newstaff.name]])])]),e("div",null,[e("label",null,[s(" Job "),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.newstaff.job=o),class:"form-control form-control-sm"},[(d(!0),i(w,null,_(l.staffTypes,o=>(d(),i("option",{value:o,key:o.name},n(o.name),9,kt))),128))],512),[[J,l.newstaff.job]])]),typeof l.newstaff.job.subtypes!="undefined"?(d(),i("label",St,[s(" Sub Type "),p(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.newstaff.job.subtype=o),class:"form-control form-control-sm"},[(d(!0),i(w,null,_(l.newstaff.job.subtypes,o=>(d(),i("option",{value:o,key:o},n(o),9,Tt))),128))],512),[[J,l.newstaff.job.subtype]])])):k("",!0),At,s(" Bonus: "+n(l.newstaff.job.bonus),1)]),e("div",null,[e("label",null,[s(" Salary "),p(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=o=>l.newstaff.salary=o),class:"form-control form-control-sm"},null,512),[[b,l.newstaff.salary]])]),Ct,s(" Typical: "+n(l.newstaff.job.typicalSalary)+" gp ",1)]),e("div",null,[e("button",{onClick:t[10]||(t[10]=o=>l.addStaff()),class:"btn btn-success btn-sm",disabled:!l.availableStaffBeds},"Add",8,Rt)])]),e("div",It,[Lt,e("table",Nt,[e("thead",null,[e("th",{class:X(l.staffSort==="name"?"bold":""),onClick:t[11]||(t[11]=o=>l.staffSort="name")},"Name",2),e("th",{class:X(l.staffSort==="job"?"bold":""),onClick:t[12]||(t[12]=o=>l.staffSort="job")},"Job",2),e("th",{class:X(l.staffSort==="salary"?"bold":""),onClick:t[13]||(t[13]=o=>l.staffSort="salary")},"Salary",2),Mt]),e("tbody",null,[(d(!0),i(w,null,_(l.staffList,o=>(d(),i("tr",{key:o.id},[e("td",null,n(o.name),1),e("td",null,[s(n(o.job.name)+" ",1),o.job.subtype?(d(),i("span",Ut,"("+n(o.job.subtype)+")",1)):k("",!0)]),e("td",null,n(o.salary),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:u=>l.fireStaff(o)},"X",8,Vt)])]))),128))])])])])])}var Et=F(zl,[["render",Dt],["__scopeId","data-v-adcb1430"]]);function de(){let l=0,t=0;for(;l===0;)l=Math.random();for(;t===0;)t=Math.random();let m=Math.sqrt(-2*Math.log(l))*Math.cos(2*Math.PI*t);return m=m/10+.5,m>1||m<0?de():m}var Pt={setup(){const l=P(),t=K(),{strongholds:m,availableStaffBeds:c,calcTotalRevenue:y,gameDate:f,maxLaborers:o,netRevenue:u,stronghold:r,totalStorage:v,unrest:$,usedStorage:I,totalHousing:N,getPop:a,staffList:g,nonstaffPop:R,staffBeds:j}=B(l),{getUserInfo:G}=t,{newStronghold:Y,buyResource:q,getStrongholds:W,loadStronghold:z,loadStrongholdById:Q,saveStronghold:Z,saveNewStronghold:x,deleteStronghold:ee,addToTreasury:le,addImprovement:te}=l;return{allStrongholds:m,availableStaffBeds:c,calcTotalRevenue:y,gameDate:f,maxLaborers:o,netRevenue:u,stronghold:r,totalStorage:v,unrest:$,usedStorage:I,totalHousing:N,getPop:a,staffList:g,nonstaffPop:R,staffBeds:j,userinfo:G,newStronghold:Y,buyResource:q,getStrongholds:W,loadStronghold:z,loadStrongholdById:Q,saveStronghold:Z,saveNewStronghold:x,deleteStronghold:ee,addToTreasury:le,addImprovement:te}},data(){return{newmodal:!0,dayofweek:"Godsday",dayNames:["Godsday","Elvesday","Gnomesday","Dragonsday","Mansday","Dwarvesday","Orcsday"],monthNames:["Neradan","Dorunor","Trimalan","Sylvanus","Gaiana","Alohiman","Coranus","Moltyr","Saris","Maridia","Tockra","Amatherin"]}},methods:{newDay(){this.stronghold.laws.foodSubsidies>this.stronghold.resources.food&&(this.stronghold.laws.foodSubsidies=this.stronghold.resources.food),this.stronghold.laws.todaysExports-=this.exportLimit,this.stronghold.laws.todaysExports<0&&(this.stronghold.laws.todaysExports=0);for(let c in this.stronghold.autoSell)-Number(this.stronghold.autoSell[c])>this.stronghold.resources[c]&&(this.stronghold.autoSell[c]=-this.stronghold.resources[c]);this.addToTreasury({changeby:this.netRevenue,record:"daily net revenue"});let l=this.calcTotalRevenue;for(let c in this.stronghold.resources)this.stronghold.resources[c]=Math.round((this.stronghold.resources[c]+Number(l[c]))*100)/100,this.stronghold.resources[c]<0&&(this.stronghold.resources[c]=0);this.stronghold.gameDay+=1,this.stronghold.gameDay>30&&(this.stronghold.gameDay=1,this.stronghold.gameMonth+=1),this.stronghold.gameMonth>12&&(this.stronghold.gameMonth=1,this.stronghold.gameYear+=1);let t=[];this.stronghold.construction.forEach(c=>{c.laborersassigned||(c.laborersassigned=0);let y=Me(c.laborersassigned);if(!c.private&&!c.dmGift){let f=y.div(c.buildtime);for(let o in c.resourceCost){let u=f.mul(c.resourceCost[o]).toFixed(2);c.resourceCost[o]-=u}c.buildtime-=y}else c.private?c.buildtime-=20:c.build-=y;c.buildtime<=0&&(t.push(c),this.addImprovement(c))}),t.forEach(c=>{this.stronghold.construction.splice(this.stronghold.construction.indexOf(c),1)}),this.calcWeather();let m=this.stronghold.gameYear*365+this.stronghold.gameMonth*30+this.stronghold.gameDay;this.dayofweek=this.dayNames[m%7],this.month=this.monthNames[this.stronghold.gameMonth-1],alert("A new day has begun. It is the "+this.stronghold.gameDay+"th day of "+this.month+", "+this.dayofweek+". it is "+this.stronghold.currentTemperature+" degrees outside. "+this.stronghold.rainString+". The average windspeed is "+this.stronghold.windSpeed+" mph")},calcWeather(){let l=3,t=Number(this.stronghold.laws.temperature);this.stronghold.gameMonth<3||this.stronghold.gameMonth>11?l=4:this.stronghold.gameMonth<2&&this.stronghold.gameMonth<6?l=1:this.stronghold.gameMonth>5&&this.stronghold.gameMonth<9&&(l=2),l===2&&this.stronghold.laws.lattitude>=0||l===4&&this.stronghold.laws.lattitude<0?(t+=20,this.stronghold.laws.continental&&Math.abs(this.stronghold.laws.lattitude)>30&&(t+=15)):(l===4||l===2)&&(t-=20,this.stronghold.laws.continental&&Math.abs(this.stronghold.laws.lattitude)>30&&(t-=15));let m=t-30-this.stronghold.laws.continental*10,y=t+30+this.stronghold.laws.continental*10-m,f=Math.floor(de()*y)+m,o=2.75*this.stronghold.laws.rainfall/365,u="No precipitation";if(Math.random()<o){let r=Math.random();r<.33?(u="Scattered showers occur throughout the day",f<32&&(u="Snow flurries occur throughout the day")):r<.5?(u="A steady rain falls throughout the day",f<32&&(u="An inch or two of snow falls over the course of the day")):r<.67?(u="A storm passed through overnight",f<40&&(u="A snowstorm passes through overnight")):(u="A large thunderstorm sweeps into the area",f<32&&(u="A major blizzard passes through the area"))}this.stronghold.currentTemperature=f,this.stronghold.rainString=u,this.stronghold.windSpeed=Math.floor(Math.random()*20)+(Math.random()>.75?Math.floor(Math.random()*30):0)}}};const M=l=>(O("data-v-7906f898"),l=l(),H(),l),Ft={class:"row"},Bt={class:"col-sm-5"},Ot={class:"btn-group"},Ht=M(()=>e("a",{href:"/tools/strongholdbuilder",class:"btn btn-warning"},"New / Load",-1)),jt={class:"col-sm-7"},Gt={class:"row"},Yt=M(()=>e("strong",null,"Gold: ",-1)),qt={key:0},Wt={class:"col-sm-3"},zt=M(()=>e("strong",null,"Available Beds: ",-1)),Xt={class:"col-sm-3"},Jt=M(()=>e("strong",null,"Total Staff Beds:",-1)),Kt={class:"col-sm-3"},Qt=M(()=>e("strong",null,"Unrest: ",-1)),Zt={class:"row"},xt={class:"col-sm-3"},en=M(()=>e("strong",null,"Total Population: ",-1)),ln={class:"col-sm-3"},tn=M(()=>e("strong",null,"Non-Staff Population: ",-1)),nn={class:"col-sm-3"},on=M(()=>e("strong",null,"Non-Staff Housing: ",-1)),sn={class:"col-sm-3"},an=M(()=>e("strong",null,"Max Laborers: ",-1)),rn={class:"row"},dn={key:0},un={key:0,class:"alert alert-danger"},hn=M(()=>e("h5",null,"Start Date",-1)),mn={class:"row"},cn={class:"col-sm-4"},pn={class:"col-sm-4"},gn={class:"col-sm-4"},bn={class:"row"},fn={class:"col-sm-12"},vn=M(()=>e("h4",null,"Load Stronghold",-1)),yn=["onClick"],wn=["onClick"];function _n(l,t,m,c,y,f){const o=U("b-modal");return d(),i("div",null,[e("div",Ft,[e("h1",Bt,[e("div",Ot,[Ht,e("button",{class:"btn btn-success",onClick:t[0]||(t[0]=u=>l.saveNewStronghold())},"Save New"),l.stronghold._id?(d(),i("button",{key:0,class:"btn btn-primary",onClick:t[1]||(t[1]=u=>l.saveStronghold())},"Save")):k("",!0)]),s(" "+n(l.stronghold.castleName)+" : "+n(l.stronghold.townName)+" "+n(l.gameDate)+" "+n(l.dayofweek)+"\xA0\xA0",1),e("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=u=>l.newDay())},"New Day")]),e("div",jt,[e("div",Gt,[e("div",{class:X([l.netRevenue<0?"red":"","col-sm-3"])},[Yt,s(" "+n(l.stronghold.treasury)+" (",1),l.netRevenue>=0?(d(),i("span",qt,"+")):k("",!0),s(n(l.netRevenue)+") ",1)],2),e("div",Wt,[zt,s(" "+n(l.availableStaffBeds),1)]),e("div",Xt,[Jt,s(" "+n(l.staffBeds),1)]),e("div",Kt,[Qt,s(" "+n(l.unrest)+"% ",1)])]),e("div",Zt,[e("div",xt,[en,s(" "+n(l.getPop),1)]),e("div",ln,[tn,s(" "+n(l.nonstaffPop),1)]),e("div",nn,[on,s(" "+n(l.totalHousing),1)]),e("div",sn,[an,s(" "+n(l.maxLaborers),1)])]),e("div",rn,[(d(!0),i(w,null,_(l.stronghold.resources,(u,r)=>(d(),i("div",{key:r,class:X(["col-sm-3",l.calcTotalRevenue[r]<0?"red":""])},[e("strong",null,n(r),1),s(": "+n(u)+" (",1),l.calcTotalRevenue[r]>=0?(d(),i("span",dn,"+")):k("",!0),s(n(l.calcTotalRevenue[r])+") ",1)],2))),128))])])]),l.usedStorage>=l.totalStorage?(d(),i("div",un,"At Maximum Storage, newly stockpiled resources may be discarded")):k("",!0),C(o,{modelValue:l.newmodal,"onUpdate:modelValue":t[9]||(t[9]=u=>l.newmodal=u)},{default:L(()=>[s(" Castle Name "),p(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=u=>l.stronghold.castleName=u),class:"form-control"},null,512),[[b,l.stronghold.castleName]]),s(" Town Name "),p(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=u=>l.stronghold.townName=u),class:"form-control"},null,512),[[b,l.stronghold.townName]]),hn,e("div",mn,[e("label",cn,[s(" Month "),p(e("input",{type:"number",min:"1",max:"12",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=u=>l.stronghold.gameMonth=u)},null,512),[[b,l.stronghold.gameMonth]])]),e("label",pn,[s(" Day "),p(e("input",{type:"number",min:"1",max:"30",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=u=>l.stronghold.gameDay=u)},null,512),[[b,l.stronghold.gameDay]])]),e("label",gn,[s(" Year "),p(e("input",{type:"number",min:"1800",max:"1846",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=u=>l.stronghold.gameYear=u)},null,512),[[b,l.stronghold.gameYear]])])]),e("div",bn,[e("div",fn,[s(" Starting Land (km^2) "),p(e("input",{type:"number",min:"1",max:"100",step:"1",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=u=>l.stronghold.improvements[0].count=u)},null,512),[[b,l.stronghold.improvements[0].count]])])]),vn,e("ul",null,[(d(!0),i(w,null,_(l.allStrongholds,u=>(d(),i("li",{key:u._id},[e("a",{href:"#",onClick:r=>{l.newmodal=!1,l.loadStronghold(u)}},n(u.castleName),9,yn),s("\xA0\xA0 "),e("button",{class:"btn btn-danger",onClick:r=>l.deleteStronghold({stronghold:u})},"X",8,wn)]))),128))])]),_:1},8,["modelValue"])])}var $n=F(Pt,[["render",_n],["__scopeId","data-v-7906f898"]]),kn={setup(){const l=P(),{availableClearedLand:t,availableForestedLand:m,availableStaffBeds:c,farmLand:y,forestedLand:f,getPop:o,getInvalid:u,getChildren:r,getEmployable:v,privateEmployees:$,privateLaborers:I,staffBeds:N,stronghold:a,timberLand:g,totalLand:R,totalEmployees:j,unemploymentRate:G,unrest:Y,urbanLand:q}=B(l),W=K(),{getUserInfo:z}=W;return{availableClearedLand:t,availableForestedLand:m,availableStaffBeds:c,farmLand:y,forestedLand:f,getPop:o,getInvalid:u,getChildren:r,getEmployable:v,privateEmployees:$,privateLaborers:I,staffBeds:N,stronghold:a,timberLand:g,totalLand:R,totalEmployees:j,unemploymentRate:G,unrest:Y,urbanLand:q,userinfo:z}}};const A=l=>(O("data-v-ce5bc5cc"),l=l(),H(),l),Sn={class:"row"},Tn={class:"col-sm-3"},An=A(()=>e("h4",null,"Land Details",-1)),Cn=A(()=>e("br",null,null,-1)),Rn=A(()=>e("br",null,null,-1)),In=A(()=>e("br",null,null,-1)),Ln=A(()=>e("br",null,null,-1)),Nn=A(()=>e("br",null,null,-1)),Mn=A(()=>e("br",null,null,-1)),Un=A(()=>e("br",null,null,-1)),Vn=A(()=>e("br",null,null,-1)),Dn={class:"col-sm-3"},En=A(()=>e("h4",null,"Population Statistics",-1)),Pn=A(()=>e("br",null,null,-1)),Fn=A(()=>e("br",null,null,-1)),Bn=A(()=>e("br",null,null,-1)),On=A(()=>e("br",null,null,-1)),Hn=A(()=>e("br",null,null,-1)),jn=A(()=>e("br",null,null,-1)),Gn=A(()=>e("br",null,null,-1)),Yn=A(()=>e("br",null,null,-1)),qn=A(()=>e("br",null,null,-1)),Wn=A(()=>e("br",null,null,-1)),zn={class:"col-sm-6"},Xn=A(()=>e("h4",null,"Notes",-1));function Jn(l,t,m,c,y,f){return d(),i("div",Sn,[e("div",Tn,[An,s(" Total Land: "+n(l.totalLand),1),Cn,s(" Total Forested Land: "+n(l.forestedLand),1),Rn,s(" Land Used For Timber Harvesting: "+n(l.timberLand),1),In,s(" Available Forested Land: "+n(l.availableForestedLand),1),Ln,s(" Total Cleared Land: "+n(l.availableClearedLand+l.farmLand+l.urbanLand),1),Nn,s(" Available Cleared Land: "+n(l.availableClearedLand),1),Mn,s(" Farm Land: "+n(l.farmLand),1),Un,s(" Urban Land: "+n(l.urbanLand),1),Vn]),e("div",Dn,[En,s(" Total Population: "+n(l.getPop),1),Pn,s(" Your Employees: "+n(l.totalEmployees),1),Fn,s(" Total Number Employed: "+n(l.totalEmployees+l.privateLaborers+l.stronghold.privateEmployees.length),1),Bn,s(" Adults in Good Health: "+n(l.getEmployable),1),On,s(" Children: "+n(l.getChildren),1),Hn,s(" Sick, Disabled, and Elderly: "+n(l.getInvalid),1),jn,s(" Unemployment Rate: "+n(l.unemploymentRate)+"%",1),Gn,s(" Beds for Staff: "+n(l.staffBeds),1),Yn,s(" Available Beds: "+n(l.availableStaffBeds),1),qn,s(" Unrest: "+n(l.unrest)+"%",1),Wn]),e("div",zn,[Xn,p(e("textarea",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=o=>l.stronghold.notes=o),style:{"min-height":"400px"}},null,512),[[b,l.stronghold.notes]])])])}var Kn=F(kn,[["render",Jn],["__scopeId","data-v-ce5bc5cc"]]),Qn={components:{improvements:Wl,staff:Et,strongholdSummary:$n,generalInformation:Kn},setup(){const l=P(),{bankRevenue:t,buildingMaintenance:m,getBuyTable:c,calcRevRatio:y,calcTotalRevenue:f,calculateIncome:o,calculateRevenue:u,calcGrossRevenue:r,expenses:v,getPop:$,grossRevenue:I,headTax:N,improvementRevenue:a,incomeTax:g,neededStaff:R,privateLaborers:j,propertyTax:G,rents:Y,resourceCost:q,resourceRevenue:W,sellTable:z,staffBeds:Q,staffTypes:Z,staffSummary:x,stronghold:ee,taxRevenue:le,taxEfficiency:te,totalEmployees:ie,totalPrivateEmployed:ue,totalSalary:he,totalStorage:me,unemploymentRate:ce,unrest:pe,getPopNeeds:ge,getPrivateProduction:be,usedStorage:fe,vassalTax:ve}=B(l),{getAllImprovements:oe,newStronghold:ye,getAllStrongholds:se,loadStronghold:we,loadStrongholdById:_e,saveStronghold:$e,saveNewStronghold:ke,deleteStronghold:Se,addToTreasury:Te,buyResource:Ae}=l;return oe(),se(),Ue({title:"Stronghold Builder"}),{bankRevenue:t,buildingMaintenance:m,buyTable:c,calcRevRatio:y,calcTotalRevenue:f,calculateIncome:o,calculateRevenue:u,calcGrossRevenue:r,expenses:v,getPop:$,grossRevenue:I,headTax:N,improvementRevenue:a,incomeTax:g,neededStaff:R,privateLaborers:j,propertyTax:G,rents:Y,resourceCost:q,resourceRevenue:W,sellTable:z,staffBeds:Q,staffTypes:Z,staffSummary:x,stronghold:ee,taxRevenue:le,taxEfficiency:te,totalEmployees:ie,totalPrivateEmployed:ue,totalSalary:he,totalStorage:me,unemploymentRate:ce,unrest:pe,popNeeds:ge,privateProduced:be,usedStorage:fe,vassalTax:ve,getAllImprovements:oe,newStronghold:ye,getAllStrongholds:se,loadStronghold:we,loadStrongholdById:_e,saveStronghold:$e,saveNewStronghold:ke,deleteStronghold:Se,addToTreasury:Te,buyResource:Ae}},computed:{reverseTransactions(){return this.stronghold.transactionrecord.slice().reverse()},sanctuaryAnimals(){return this.stronghold.animals.filter(l=>l.livesat==="animal-sanctuary").sort()},stableAnimals(){return this.stronghold.animals.filter(l=>l.livesat==="stable").sort()},ayrieAnimals(){return this.stronghold.animals.filter(l=>l.livesat==="ayrie").sort()},homelessAnimals(){return this.stronghold.animals.filter(l=>l.livesat==="homeless").sort()}},data(){return{resourceChange:{alcohol:0,arcanum:0,brick:0,clay:0,cloth:0,coal:0,coffee:0,consumergoods:0,cotton:0,food:0,furniture:0,horses:0,iron:0,leather:0,lumber:0,paper:0,pottery:0,raremetal:0,steel:0,stone:0,sugar:0,timber:0,wool:0},changeby:0,record:"",showTransactionRecord:!1,newanimal:{name:"",livesat:"stables",species:"",foodcost:0}}},methods:{deletePrivateEnterprise(l){let t=this.stronghold.privateEnterprise.filter(m=>m.id===l.id)[0];t&&t.count>1?t.count--:(l.count--,this.stronghold.privateEnterprise.splice(this.stronghold.privateEnterprise.indexOf(l),1)),l.staff.forEach(m=>{this.stronghold.privateEmployees.splice(this.stronghold.privateEmployees.findIndex(c=>c.name===m.name),1)})},sellResource(l,t){let m=this.stronghold.laws.todaysExports+Number(t)*this.unitWeightMod[l];this.stronghold.resources[l]-=Number(t),this.stronghold.laws.todaysExports=m,this.addToTreasury({changeby:Number(t)*this.sellTable[l],record:"Sell "+t+" "+l})},addAnimal(){this.stronghold.animals.push(E({id:Date.now()+Math.random()},this.newanimal)),this.newanimal={name:"",livesat:"stables",species:"",foodcost:0}},removeAnimal(l){this.stronghold.animals.splice(this.stronghold.animals.indexOf(l),1)},addResource(l,t){this.stronghold.resources[l]+=Number(t)},addVassal(){Array.isArray(this.stronghold.vassals)||(this.stronghold.vassals=[]),this.stronghold.vassals.push({id:Date.now()+Math.random(),name:"",income:0})}}};const h=l=>(O("data-v-7bd5a568"),l=l(),H(),l),Zn={class:"col-sm-12 strongholdbuilder"},xn={class:"row"},eo={class:"col-sm-7"},lo=h(()=>e("h4",null,"Current Treasury",-1)),to=h(()=>e("h6",null,"Gold Transactions",-1)),no={class:"btn-group"},oo=h(()=>e("br",null,null,-1)),so={class:"table table-striped"},ao=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Amount"),e("th",null,"Description"),e("th",null,"Balance")])],-1)),ro={class:"table table-striped"},io=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Resource"),e("th",null,"On Hand"),e("th",null,"Sell"),e("th",null,"Buy"),e("th",null,"Pop Needs"),e("th",null,"Your Production"),e("th",null,"Private Production"),e("th",null,"Daily Sell/Buy"),e("th",null,"Change By"),e("th",null,"Actions")])],-1)),uo=["onUpdate:modelValue","min"],ho=["onUpdate:modelValue"],mo={class:"btn-group"},co=["onClick"],po=["onClick"],go=["onClick"],bo={class:"col-sm-2"},fo=h(()=>e("h4",null,"Revenue",-1)),vo=h(()=>e("br",null,null,-1)),yo=h(()=>e("br",null,null,-1)),wo=h(()=>e("br",null,null,-1)),_o=h(()=>e("br",null,null,-1)),$o=h(()=>e("br",null,null,-1)),ko=h(()=>e("br",null,null,-1)),So=h(()=>e("br",null,null,-1)),To=h(()=>e("br",null,null,-1)),Ao=h(()=>e("br",null,null,-1)),Co=h(()=>e("h4",null,"Expenses",-1)),Ro=h(()=>e("br",null,null,-1)),Io=h(()=>e("br",null,null,-1)),Lo=h(()=>e("br",null,null,-1)),No=h(()=>e("h4",null,"Storage",-1)),Mo=h(()=>e("br",null,null,-1)),Uo={class:"col-sm-3"},Vo=h(()=>e("h4",null,"Taxes",-1)),Do=h(()=>e("p",null," Collecting taxes requires a steward to be employed. Further, tax efficiency is determined by the rule of law in your demense, which is increased by hiring constables and guards. The higher the population, the more constables and guards you need. Constables require a constables office to do their job effectively, but are much more efficient at enforcing taxes and handling petty crime than guards. For maximum tax efficiency you need at least 1 guard for every 100 people or at least 1 constable for every 500 people, combined. So if you have a population of 600, you would have maximum tax efficiency with 2 constables, 1 constable and 1 guard, or 6 guards. ",-1)),Eo=h(()=>e("br",null,null,-1)),Po=h(()=>e("br",null,null,-1)),Fo=h(()=>e("br",null,null,-1)),Bo=h(()=>e("br",null,null,-1)),Oo=h(()=>e("h4",null,"Other Laws",-1)),Ho=["max"],jo=h(()=>e("br",null,null,-1)),Go={class:"row"},Yo={class:"col-sm-3"},qo={class:"col-sm-3"},Wo={class:"col-sm-3"},zo=h(()=>e("option",{value:"homeless"},"Homeless",-1)),Xo=h(()=>e("option",{value:"stable"},"Stable",-1)),Jo=h(()=>e("option",{value:"animal-sanctuary"},"Animal Sanctuary",-1)),Ko=h(()=>e("option",{value:"ayrie"},"Ayrie",-1)),Qo=[zo,Xo,Jo,Ko],Zo={class:"col-sm-2"},xo={class:"col-sm-1"},es={class:"row"},ls={class:"col-sm-12"},ts=h(()=>e("h4",null,"Homeless",-1)),ns={class:"table table-sm table-striped"},os=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Species"),e("th",null,"Food Cost"),e("th",null,"Delete")])],-1)),ss=["onClick"],as={class:"row"},rs={class:"col-sm-12"},ds=h(()=>e("h4",null,"Stables",-1)),is={class:"table table-sm table-striped"},us=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Species"),e("th",null,"Food Cost"),e("th",null,"Delete")])],-1)),hs=["onClick"],ms={class:"row"},cs={class:"col-sm-12"},ps=h(()=>e("h4",null,"Animal Sanctuary",-1)),gs={class:"table table-sm table-striped"},bs=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Species"),e("th",null,"Food Cost"),e("th",null,"Delete")])],-1)),fs=["onClick"],vs={class:"row"},ys={class:"col-sm-12"},ws=h(()=>e("h4",null,"Ayrie",-1)),_s={class:"table table-sm table-striped"},$s=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Species"),e("th",null,"Food Cost"),e("th",null,"Delete")])],-1)),ks=["onClick"],Ss=h(()=>e("div",{class:"row"},[e("div",{class:"col-sm-12"},[e("h4",null,"Typical Food Costs by Diet and Size (in units of food)"),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Size"),e("th",null,"Diet"),e("th",null,"Typical Food Cost")])]),e("tbody",null,[e("tr",null,[e("td",null,"Tiny"),e("td",null,"Any"),e("td",null,"0.05")]),e("tr",null,[e("td",null,"Small"),e("td",null,"Herbivore/Frugivore"),e("td",null,"0.1")]),e("tr",null,[e("td",null,"Small"),e("td",null,"Omnivore/Carnivore"),e("td",null,"0.5")]),e("tr",null,[e("td",null,"Medium"),e("td",null,"Herbivore"),e("td",null,"0.25")]),e("tr",null,[e("td",null,"Medium"),e("td",null,"Frugivore"),e("td",null,"0.5")]),e("tr",null,[e("td",null,"Medium"),e("td",null,"Omnivore/Carnivore"),e("td",null,"1")]),e("tr",null,[e("td",null,"Large"),e("td",null,"Herbivore"),e("td",null,"1")]),e("tr",null,[e("td",null,"Large"),e("td",null,"Frugivore"),e("td",null,"2")]),e("tr",null,[e("td",null,"Large"),e("td",null,"Omnivore/Carnivore"),s("4")]),e("tr",null,[e("td",null,"Huge"),e("td",null,"Herbivore"),e("td",null,"4")]),e("tr",null,[e("td",null,"Huge"),e("td",null,"Frugivore"),e("td",null,"8")]),e("tr",null,[e("td",null,"Huge"),e("td",null,"Omnivore/Carnivore"),e("td",null,"16")])])]),e("h4",null,"Multipliers for Other Traits"),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Trait"),e("th",null,"Multiplier")])]),e("tbody",null,[e("tr",null,[e("td",null,"Flying Speed"),e("td",null,"2")]),e("tr",null,[e("td",null,"Monstrous Type"),e("td",null,"2")]),e("tr",null,[e("td",null,"Size Greater than Huge"),e("td",null,"4")])])])])],-1)),Ts={class:"row"},As={class:"col-sm-4"},Cs=["onClick"],Rs={class:"col-sm-4"},Is=h(()=>e("h4",null,"Private Staff",-1)),Ls={class:"col-sm-4"},Ns=h(()=>e("h4",null,"Vassals",-1)),Ms={class:"table table-striped"},Us=h(()=>e("tr",null,[e("th",null,"Name"),e("th",null,"Income")],-1)),Vs=["onUpdate:modelValue"],Ds=["onUpdate:modelValue"],Es={class:"btn-group"},Ps=h(()=>e("p",null," Roll 2d100 + Unrest and consult the table below. ",-1)),Fs=h(()=>e("table",{style:{}},[e("thead",null,[e("tr",null,[e("th",null,"Roll"),e("th",null,"Event")])]),e("tbody",null,[e("tr",null,[e("td",null,"1"),e("td",null,"You gain 5 levels instantly and find 100000 gold.")]),e("tr",null,[e("td",null,"2"),e("td",null,"Roll twice more and use both results. This event can stack.")]),e("tr",null,[e("td",null,"3"),e("td",null,"Your people, grateful for your kind rule, give you gifts worth d20 * 20 gp")]),e("tr",null,[e("td",null,"4"),e("td",null,"A wandering mercenary arrives in town looking for work. (Fighter level = 2d4 + 1, max of the player level)")]),e("tr",null,[e("td",null,"5"),e("td",null,"A wandering cleric arrives in town looking for work. (Cleric level = 2d4 + 1, max of the player level)")]),e("tr",null,[e("td",null,"6"),e("td",null,"Unbranded cattle have wandered into town and are captured by the townspeople. Add 200 food to your stockpiles.")]),e("tr",null,[e("td",null,"7-10"),e("td",null,"A wealthy family moves into town, building a manor house and a new random business (private enterprises).")]),e("tr",null,[e("td",null,"11"),e("td",null,"5d6 Kobold prospectors show up at your keep shouting about how they have discovered gold or a rare metal! They offer to mine it for you in exchange for the rights to live in town. (Build a Gold Mine).")]),e("tr",null,[e("td",null,"12"),e("td",null,"5d6 Kobold prospectors show up at your keep shouting about how they have discovered iron or coal! They offer to mine it for you in exchange for the rights to live in town. (Build an Iron Mine or Coal Mine).")]),e("tr",null,[e("td",null,"13-14"),e("td",null,"A wandering prospector arrives and excitedly proclaims that he has found valuable minerals on your land (1d100, 1-5 rare metal, 6-15 gold, 16-50 coal, 51-90 coal, 91-100, something bad).")]),e("tr",null,[e("td",null,"15-18"),e("td",null,"Your people find rare edible fruits and mushrooms in the forests. Roll 3d20 and gain that many units of food.")]),e("tr",null,[e("td",null,"19"),e("td",null,"You find a cache of money in an unexpected place. Roll 2d100 and gain that much gold.")]),e("tr",null,[e("td",null,"20-23"),e("td",null,"8d8 (3d8 children, 5d8 adults) colonists arrive unexpectedly from one of the Alliance nations (roll randomly), hoping for a place to settle. They bring enough materials and money to build 3 houses and a large farm.")]),e("tr",null,[e("td",null,"24-27"),e("td",null,"A family moves into town. (2 adults, 1d6-1 children)")]),e("tr",null,[e("td",null,"28-31"),e("td",null,"Workers are particularly productive. Increase revenue by 25% today.")]),e("tr",null,[e("td",null,"32"),e("td",null,"Your miners stumble on a cache of buried treasure.")]),e("tr",null,[e("td",null,"33-36"),e("td",null,"A merchant arrives in town offering special wares, including a selection of magic items.")]),e("tr",null,[e("td",null,"37-43"),e("td",null,"A middle class family moves to town and builds a house.")]),e("tr",null,[e("td",null,"44"),e("td",null,"Your workers discover an old shed in the woods, filled with booze. Gain 100 alcohol.")]),e("tr",null,[e("td",null,"45-46"),e("td",null,"A wandering cleric comes through town and heals 3d4 people before moving on.")]),e("tr",null,[e("td",null,"47-50"),e("td",null,"An invitation from a neighboring Lord arrives to join them for a feast.")]),e("tr",null,[e("td",null,"51"),e("td",null,"A wandering druid casts Plant Growth on one of your farms, doubling its yield for the day.")]),e("tr",null,[e("td",null,"52-53"),e("td",null,"Mercenaries arrive in town and offer their services.")]),e("tr",null,[e("td",null,"54"),e("td",null,"An Artificer arrives in town offering to sell a device he has invented.")]),e("tr",null,[e("td",null,"55-57"),e("td",null,"A rare animal is spotted in the woods.")]),e("tr",null,[e("td",null,"58"),e("td",null,"One of the townspeople is convinced a family member is a doppleganger.")]),e("tr",null,[e("td",null,"59"),e("td",null,"A pair of mages arrive in town separately, begin dueling in the town square, the residents are terrified.")]),e("tr",null,[e("td",null,"60"),e("td",null,"A mysterious stranger arrives in town selling cursed items to townsfolk.")]),e("tr",null,[e("td",null,"61"),e("td",null,"One of the townsfolk finds a treasure map in the attic left behind by his recently deceased grandfather.")]),e("tr",null,[e("td",null,"62-64"),e("td",null,"An adventurer arrives in town with tales of a lost treasure. His companions fell trying to claim it.")]),e("tr",null,[e("td",null,"65"),e("td",null,"A dragon lands in the center of town and takes a nap.")]),e("tr",null,[e("td",null,"66"),e("td",null,"A wandering duelist comes to town and challenges one of the players to a duel of honor (to the blood, not the death)")]),e("tr",null,[e("td",null,"67-72"),e("td",null,"1d6 sick people recover naturally.")]),e("tr",null,[e("td",null,"73"),e("td",null,"A worker is injured in an accident (1 adult becomes invalid).")]),e("tr",null,[e("td",null,"74"),e("td",null,"If the number of adults is greater than 450 a worker is injured in an accident (1 adult becomes invalid).")]),e("tr",null,[e("td",null,"75"),e("td",null,"If the number of adults is greater than 900 a worker is injured in an accident (1 adult becomes invalid).")]),e("tr",null,[e("td",null,"76"),e("td",null,"A worker has retired.")]),e("tr",null,[e("td",null,"77"),e("td",null,"A baby is born in town.")]),e("tr",null,[e("td",null,"78"),e("td",null,"If number of adults is greater than 150 A baby is born in town. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"79"),e("td",null,"If the number of adults is greater than 300 a worker has retired. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"80"),e("td",null,"If number of adults is greater than 300 A baby is born in town. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"81"),e("td",null,"If number of adults is greater than 450 A baby is born in town. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"82"),e("td",null,"If the number of adults is greater than 600 a worker has retired. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"83"),e("td",null,"If number of adults is greater than 600 A baby is born in town. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"84"),e("td",null,"If number of adults is greater than 750 A baby is born in town. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"85"),e("td",null,"If the number of adults is greater than 900 a worker has retired. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"86"),e("td",null,"If number of adults is greater than 900 A baby is born in town. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"87"),e("td",null,"If number of adults is greater than 1050 A baby is born in town. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"88"),e("td",null,"If the number of adults is greater than 1200 a worker has retired. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"89"),e("td",null,"If number of adults is greater than 1200 A baby is born in town. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"91-95"),e("td",null,"If number of homeless people is greater than 0, your people build a house (private enterprise), otherwise nothing happens.")]),e("tr",null,[e("td",null,"96-100"),e("td",null,"If number of available staff beds is less than 3, your people build a staff house (private enterprise), otherwise nothing happens.")]),e("tr",null,[e("td",null,"101-105"),e("td",null,"If number of homeless people is greater than 0, your people build a log cabin (private enterprise), otherwise nothing happens.")]),e("tr",null,[e("td",null,"106-110"),e("td",null,"Nothing interesting happens.")]),e("tr",null,[e("td",null,"111"),e("td",null,"If number of sick/elderly is greater than 1200, an elderly person dies. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"112"),e("td",null,"If the number of children is greater than 1200 a child has reached adulthood (1 child becomes an adult). Otherwise nothing happens.")]),e("tr",null,[e("td",null,"113"),e("td",null,"If the number of children is greater than 1050 a child has reached adulthood (1 child becomes an adult). Otherwise nothing happens.")]),e("tr",null,[e("td",null,"114"),e("td",null,"If number of sick/elderly is greater than 900, an elderly person dies. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"115"),e("td",null,"If the number of children is greater than 900 a child has reached adulthood (1 child becomes an adult). Otherwise nothing happens.")]),e("tr",null,[e("td",null,"116"),e("td",null,"If the number of children is greater than 750 a child has reached adulthood (1 child becomes an adult). Otherwise nothing happens.")]),e("tr",null,[e("td",null,"117"),e("td",null,"If number of sick/elderly is greater than 600, an elderly person dies. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"118"),e("td",null,"If the number of children is greater than 600 a child has reached adulthood (1 child becomes an adult). Otherwise nothing happens.")]),e("tr",null,[e("td",null,"119"),e("td",null,"If the number of children is greater than 450 a child has reached adulthood (1 child becomes an adult). Otherwise nothing happens.")]),e("tr",null,[e("td",null,"120"),e("td",null,"If number of sick/elderly is greater than 300, an elderly person dies. Otherwise nothing happens.")]),e("tr",null,[e("td",null,"121"),e("td",null,"If the number of children is greater than 300 a child has reached adulthood (1 child becomes an adult). Otherwise nothing happens.")]),e("tr",null,[e("td",null,"122"),e("td",null,"An elderly person in town dies.")]),e("tr",null,[e("td",null,"123"),e("td",null,"A child has reached adulthood (1 child becomes an adult).")]),e("tr",null,[e("td",null,"124"),e("td",null,"A Tax Collector from a ruler arrives and demands a tax payment of d20 * 25 gp")]),e("tr",null,[e("td",null,"125"),e("td",null,"A Tax Collector from a ruler arrives and demands a tax payment of d20 * 50 gp")]),e("tr",null,[e("td",null,"126"),e("td",null,"A Tax Collector from a ruler arrives and demands a tax payment of d20 * 75 gp")]),e("tr",null,[e("td",null,"127"),e("td",null,"A Tax Collector from a ruler arrives and demands a tax payment of d20 * 100 gp")]),e("tr",null,[e("td",null,"128"),e("td",null,"A Tax Collector from a ruler arrives and demands a tax payment of d20 * 125 gp")]),e("tr",null,[e("td",null,"129"),e("td",null,"A Tax Collector from a ruler arrives and demands a tax payment of d20 * 150 gp")]),e("tr",null,[e("td",null,"130"),e("td",null,"3d4 (1d4 children, 1d4 adults, 1d4 invalids) Refugees arrive at your town begging for a place to live.")]),e("tr",null,[e("td",null,"131"),e("td",null,"3d6 (1d6 children, 1d6 adults, 1d6 invalids) Refugees arrive at your town begging for a place to live.")]),e("tr",null,[e("td",null,"132"),e("td",null,"3d8 (1d8 children, 1d8 adults, 1d8 invalids) Refugees arrive at your town begging for a place to live.")]),e("tr",null,[e("td",null,"133"),e("td",null,"6d4 (2d4 children, 2d4 adults, 2d4 invalids) Refugees arrive at your town begging for a place to live.")]),e("tr",null,[e("td",null,"134"),e("td",null,"6d6 (2d6 children, 2d6 adults, 2d6 invalids) Refugees arrive at your town begging for a place to live.")]),e("tr",null,[e("td",null,"135"),e("td",null,"6d8 (2d8 children, 2d8 adults, 2d8 invalids) Refugees arrive at your town begging for a place to live.")]),e("tr",null,[e("td",null,"136-138"),e("td",null,"Exceptionally beautiful weather has left the townsfolk in a good mood, reduce the effect of unrest on your next roll by 2.")]),e("tr",null,[e("td",null,"139-140"),e("td",null,"Your construction workers have been unusually productive, any buildings you actively have under construction progress an extra day towards completion.")]),e("tr",null,[e("td",null,"141-142"),e("td",null,"The local children snuck away to go fishing, and had a bumper catch. Gain 1d10 food.")]),e("tr",null,[e("td",null,"143-144"),e("td",null,"A lost but apparently domesticated animal wanders into town.")]),e("tr",null,[e("td",null,"145-146"),e("td",null,"A traveling bard passes through town.")]),e("tr",null,[e("td",null,"147-149"),e("td",null,"A wandering cleric passes through town and gives a sermon in town.")]),e("tr",null,[e("td",null,"150"),e("td",null,"A wandering wizard comes through town looking for work and a place to study.")]),e("tr",null,[e("td",null,"151"),e("td",null,"A skilled fighter wanders through town.")]),e("tr",null,[e("td",null,"152-153"),e("td",null,"A creepy looking mage wanders into town. He says he means no harm, but the people find him unsettling.")]),e("tr",null,[e("td",null,"154-156"),e("td",null,"An ill omen appears, unsettling the townsfolk. The effect of unrest on your next roll is increased by 2.")]),e("tr",null,[e("td",null,"157"),e("td",null,"A chromatic dragon attacks and demands tribute from the town.")]),e("tr",null,[e("td",null,"158"),e("td",null,"A townsperson made a deal with a hag that they regret, they will give anything to have it undone.")]),e("tr",null,[e("td",null,"159-160"),e("td",null,"River pirates attack the town.")]),e("tr",null,[e("td",null,"161"),e("td",null,"A necromancer has raided the town graveyard and loosed his creations on the town.")]),e("tr",null,[e("td",null,"162"),e("td",null,"A random magical occurance causes an abberation to appear in the middle of town and start causing havoc.")]),e("tr",null,[e("td",null,"163-164"),e("td",null,"A leak springs in the roof of the keep, right above one of your beds. Roll to determine which party member has a bad nights sleep.")]),e("tr",null,[e("td",null,"165-167"),e("td",null,"A sudden illness kills some of your livestock, lose 2d20 food.")]),e("tr",null,[e("td",null,"168-170"),e("td",null,"A large storm causes damage to some buildings. It will cost 2d100 for repairs.")]),e("tr",null,[e("td",null,"171"),e("td",null,"A person falls out of the sky, splattering on the ground. No one saw what happened.")]),e("tr",null,[e("td",null,"172-173"),e("td",null,"Apparently its a local holiday, all the shops in town are closed.")]),e("tr",null,[e("td",null,"174"),e("td",null,"Some of the children have gone missing. The parents beg you to help them.")]),e("tr",null,[e("td",null,"175-176"),e("td",null,"Your construction workers are delayed by an accident, any buildings you actively have under construction are delayed by a day.")]),e("tr",null,[e("td",null,"177"),e("td",null,"Some nearby fey folk are causing trouble for the towns lumberjacks.")]),e("tr",null,[e("td",null,"178-179"),e("td",null,"Slave hunters arrive claiming some of your townsfolk are escaped slaves. They are beligerent and insistent.")]),e("tr",null,[e("td",null,"180"),e("td",null,"There is a murder in town! The people beg the players to investigate.")]),e("tr",null,[e("td",null,"181"),e("td",null,"A wolf pack has killed some sheep on a farm you own. Lose 100 food, and it has a 25% chance of happening again each day until the wolves are found and dealt with.")]),e("tr",null,[e("td",null,"182"),e("td",null,"People die in a tragic accident, 1d6 people die.")]),e("tr",null,[e("td",null,"183-185"),e("td",null,"There is a Monster lurking near town (roll randomly to determine type).")]),e("tr",null,[e("td",null,"186"),e("td",null,"A large group of townspeople have joined a suspicious cult, your steward is concerned.")]),e("tr",null,[e("td",null,"187"),e("td",null,"A large group of townspeople have converted to a new religion.")]),e("tr",null,[e("td",null,"188-189"),e("td",null,"Flooding in town causes damage to several buildings.")]),e("tr",null,[e("td",null,"190"),e("td",null,"Some of your people are convinced by wandering adventurers to join their quest. 1d4 adults leave town.")]),e("tr",null,[e("td",null,"191"),e("td",null,"Plague sweeps into town, sickening 2d6 people per day until it is dealt with.")]),e("tr",null,[e("td",null,"192-193"),e("td",null,"Robbery! Robbers break into the keep in the night and attempt to make off with any stored gold.")]),e("tr",null,[e("td",null,"194"),e("td",null,"A chromatic dragon demands tribute or it will burn the town.")]),e("tr",null,[e("td",null,"195"),e("td",null,"Graves have been dug up in the night, the Steward suspects a necromancer.")]),e("tr",null,[e("td",null,"196-199"),e("td",null,"People leave your town. 3d6 people (1d6 children and 2d6 adults) leave town to find a new home.")]),e("tr",null,[e("td",null,"200"),e("td",null,"Roll twice more and use both results. This event can stack.")]),e("tr",null,[e("td",null,"201-202"),e("td",null,"One of the loyalists in town is attacked by a mob and killed.")]),e("tr",null,[e("td",null,"203-205"),e("td",null,"Revolutionaries attack and attempt to take the town!")]),e("tr",null,[e("td",null,"206-207"),e("td",null,"Work strike happens. 50% of yesterdays income lost. Will continue until demands are met or otherwise dealt with.")]),e("tr",null,[e("td",null,"208-210"),e("td",null,"Revolt. The people in your village are taking up arms to attack you!")]),e("tr",null,[e("td",null,"211-213"),e("td",null,"Drug problems are sweeping through town causing working adults to become sick. 1d6 people each day become sick until it is dealt with.")]),e("tr",null,[e("td",null,"214-215"),e("td",null,"Starving people have begun to grow sick, 2d6 adults become invalids")]),e("tr",null,[e("td",null,"216-218"),e("td",null,"An Assassin strikes in the night attempting to kill one of the players or a member of their staff.")]),e("tr",null,[e("td",null,"219"),e("td",null,"A lycanthrope has bitten some people in your town. If not dealt with, it is likely to spread.")]),e("tr",null,[e("td",null,"220"),e("td",null,"Arsonists strike in the night burning down a random building. The cost to rebuild depends on the building and the effectiveness of the response.")]),e("tr",null,[e("td",null,"221-222"),e("td",null,"Petty criminals plague the town, robbing houses and picking pockets. Tax revenues are reduced by 25% until they are dealt with, and things in storage may randomly disappear.")]),e("tr",null,[e("td",null,"223-224"),e("td",null,"Starving people have raided your storehouses, stealing all of your stored food.")]),e("tr",null,[e("td",null,"225+"),e("td",null,"Revolt. The people in your village are taking up arms to attack you!")])])],-1)),Bs=h(()=>e("h2",null,"Actions",-1)),Os=h(()=>e("p",null,"This is not a final and complete list. Players are encouraged to think creatively about what to do with their time.",-1)),Hs=h(()=>e("table",{class:"table table-striped"},[e("tbody",null,[e("tr",null,[e("th",null,"Action"),e("th",null,"Cost"),e("th",null,"Time")]),e("tr",null,[e("td",null,"Recruit Colonists from the Homeland (1d6 kids, 2d6 adults)."),e("td",null,"100 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Get local refugees to join the town. (1d6 kids, 1d6 adults, 1d6 invalids)"),e("td",null,"10 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Recruit skilled worker from the population. Requires an investigation check for success. DC = 10 + base salary"),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Encourage people to leave town (1d6 kids, 2d6 adults)."),e("td",null,"50-unrest gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Recruit skilled worker from out of town."),e("td",null,"5 * typical salary signing bonus"),e("td",null,"2 days")]),e("tr",null,[e("td",null,"Hold a Feast (roll a DC 12 Persuasion check). Success reduces effect of unrest on next 7 random event rolls by half."),e("td",null,"100 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Patrol the area. Who knows what could happen?"),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Send an emissary to another Lord"),e("td",null,"20 gp"),e("td",null,"1/2 day")]),e("tr",null,[e("td",null,"Hire Prospector to Search for Minerals. Roll 1d100, 1-10 something bad happens. 11-50, they find nothing. 51-75, they find coal. 76-95, you find iron. 96-99, you find gold (or silver). 100 you find a rare metal, roll a 1d3, on 1 it is Orichalcum, on a 2 it is Adamantium, on a 3 it is Mithril."),e("td",null,"200 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Hire druids/clerics to tend to the sick. Heal 2d6 sick people in town."),e("td",null,"200 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Search for rare medicinal herbs in the woods. (roll a DC 20 Nature check). On a success you find enough herbs to heal 1d6 sick people."),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Seek guidance from a God via omens or prayer. Roll a DC 12 religion check. On a success gain advantage on two skill checks of your choice in the next day. If you fail by five or more, get disadvantage instead on a check of the DMs choice."),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Hire spies to dig up information on another Lord. The DM will roll an investigation check in secret on the spies behalf, depending on the result you may or may not get useful information. Spy returns after enough time to travel to the Lord's home and back has passed."),e("td",null,"200 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Go Hunting. Roll a survival check. Result determines how much is gained. 1-9: 1 unit of food (caught a rabbit, found some berries). 10-14: 2-5 units of food. 15-20: 10 units of food and 1 leather (a deer). 21+: 20 units of food and 2 leather."),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Research a topic. Make a relevant knowledge check, result determines how much information is discovered. DC determined by DM."),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Aid Construction Efforts. Requires a Carpenters Tools check (if the building is mostly wood) or Mason's tools check if it is mostly stone. DC 5: Reduce labor-days required by 1. DC 10: Reduce labor-days required by 2. DC 15+: Reduce labor days required by 3 + the amount over 15. This also reduces the total material costs of the building as a result."),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Hold Court"),e("td",null,"0 gp"),e("td",null,"Roll a random event roll. The second roll may have limited effect.")]),e("tr",null,[e("td",null,"Calm the People"),e("td",null,"0 gp"),e("td",null,"Spend your day with the people of the town helping to calm them and make your presence known. Make a DC 20 Persuasion check, reducing the effect of unrest on he next random event roll by 2.")])])],-1)),js=h(()=>e("option",{value:0},"Supernatural Desert (0 rain)",-1)),Gs=h(()=>e("option",{value:5},"Desert (1-10 inches rain)",-1)),Ys=h(()=>e("option",{value:17},"Dry Grassland (11-25 inches rain)",-1)),qs=h(()=>e("option",{value:33},"Grassland or Savannah (26-40 inches rain)",-1)),Ws=h(()=>e("option",{value:48},"Forest (41-55 inches rain)",-1)),zs=h(()=>e("option",{value:65},"Wet Forest, Marsh or Swamp (56-80 inches rain)",-1)),Xs=h(()=>e("option",{value:100},"Rainforest (80+ inches rain)",-1)),Js=[js,Gs,Ys,qs,Ws,zs,Xs],Ks=h(()=>e("p",null,"\xA0",-1)),Qs=h(()=>e("p",null,"\xA0",-1));function Zs(l,t,m,c,y,f){const o=U("stronghold-summary"),u=U("general-information"),r=U("b-tab"),v=U("improvements"),$=U("staff"),I=U("b-modal"),N=U("b-tabs");return d(),i("div",Zn,[C(o),C(N,null,{default:L(()=>[C(r,{title:"General Information"},{default:L(()=>[C(u)]),_:1}),C(r,{title:"Improvements"},{default:L(()=>[C(v)]),_:1}),C(r,{title:"Staff"},{default:L(()=>[C($)]),_:1}),C(r,{title:"Budget"},{default:L(()=>[e("div",xn,[e("div",eo,[lo,to,e("p",null,[p(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=a=>l.changeby=a),class:"form-control",style:{width:"15%",display:"inline"}},null,512),[[b,l.changeby]]),s(" \xA0\xA0 "),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>l.record=a),type:"text",class:"form-control",placeholder:"transaction record",style:{width:"70%",display:"inline"}},null,512),[[b,l.record]])]),e("div",no,[e("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=a=>l.addToTreasury({changeby:l.changeby,record:l.record}))},"Add to Treasury"),e("button",{class:"btn btn-success",onClick:t[3]||(t[3]=a=>l.showTransactionRecord=!0)},"Transaction Record")]),oo,C(I,{modelValue:l.showTransactionRecord,"onUpdate:modelValue":t[4]||(t[4]=a=>l.showTransactionRecord=a),title:"Transaction Record"},{default:L(()=>[e("table",so,[ao,e("tbody",null,[(d(!0),i(w,null,_(l.reverseTransactions,a=>(d(),i("tr",{key:a.id},[e("td",null,n(a.amount),1),e("td",null,n(a.description),1),e("td",null,n(a.balance),1),e("td",null,n(a.date),1)]))),128))])])]),_:1},8,["modelValue"]),e("table",ro,[io,e("tbody",null,[(d(!0),i(w,null,_(l.stronghold.resources,(a,g)=>(d(),i("tr",{key:g},[e("th",null,n(g),1),e("td",null,n(a),1),e("td",null,[e("span",null,n(l.sellTable[g]),1)]),e("td",null,[e("span",null,n(l.buyTable[g]),1)]),e("td",null,[e("span",null,n(l.popNeeds[g]),1)]),e("td",null,[e("span",null,n(l.calcGrossRevenue[g]),1)]),e("td",null,[e("span",null,n(l.privateProduced[g]),1)]),e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":R=>l.stronghold.autoSell[g]=R,class:"form-control",style:{width:"75px"},min:-l.stronghold.resources[g]},null,8,uo),[[b,l.stronghold.autoSell[g]]])]),e("td",null,[p(e("input",{type:"number",class:"form-control",style:{width:"75px",display:"inline"},min:"0","onUpdate:modelValue":R=>l.resourceChange[g]=R},null,8,ho),[[b,l.resourceChange[g]]])]),e("td",null,[e("div",mo,[e("button",{class:"btn btn-primary",onClick:R=>l.sellResource(g,l.resourceChange[g])},"Sell",8,co),e("button",{class:"btn btn-primary",onClick:R=>l.buyResource({type:g,amount:l.resourceChange[g]})},"Buy",8,po),e("button",{class:"btn btn-primary",onClick:R=>l.addResource(g,l.resourceChange[g])},"Add",8,go)])])]))),128))])])]),e("div",bo,[fo,s(" Total Revenue: "+n(l.grossRevenue),1),vo,s(" Direct Income: "+n(l.improvementRevenue),1),yo,s(" Resource Sales: "+n(l.resourceRevenue),1),wo,s(" Total Tax Revenue: "+n(l.taxRevenue),1),_o,s(" Income Tax Revenue: "+n(l.incomeTax),1),$o,s(" Head Tax Revenue: "+n(l.headTax),1),ko,s(" Property Tax Revenue: "+n(l.propertyTax),1),So,s(" Vassal Tax Revenue: "+n(l.vassalTax),1),To,s(" Rents Revenue: "+n(l.rents),1),Ao,s(" Bank Revenue: "+n(l.bankRevenue)+" ",1),Co,s(" Total Expenses: "+n(l.expenses),1),Ro,s(" Employee Salaries: "+n(l.totalSalary),1),Io,s(" Building Maintenance: "+n(l.buildingMaintenance),1),Lo,s(" Resource Purchases: "+n(l.resourceCost)+" ",1),No,s(" Current Stored Goods: "+n(l.usedStorage),1),Mo,s(" Total Storage Space: "+n(l.totalStorage),1)]),e("div",Uo,[Vo,Do,e("p",null,[s(" Current Tax Efficiency: "),e("strong",null,n(l.taxEfficiency*100)+"%",1)]),p(e("input",{type:"number",class:"form-control",min:"0",max:"0.5",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[5]||(t[5]=a=>l.stronghold.laws.headTaxRate=a),step:"0.1",title:"Head taxes are a flat tax on every person living on your land, these taxes are common, but are considered oppressive by the populace, particularly the poor or unemployed, who may not have the ability to pay."},null,512),[[b,l.stronghold.laws.headTaxRate]]),s(" Head Tax Rate (gp / person) "),Eo,p(e("input",{type:"number",class:"form-control",min:"0",max:"100",step:"1",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[6]||(t[6]=a=>l.stronghold.laws.incomeTaxRate=a),title:"income taxes tax a percentage of the populations income, low income taxes are easily tolerated, but higher than 10% or so and people start to feel upset"},null,512),[[b,l.stronghold.laws.incomeTaxRate]]),s(" Income Tax Rate (%) "),Po,p(e("input",{type:"number",class:"form-control",min:"0",max:"1",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[7]||(t[7]=a=>l.stronghold.laws.propertyTaxRate=a),step:"0.1",title:"property taxes return a portion of the value of private property built on your land. The daily assessment cannot exceed 1% or property owners will simply sell out and leave."},null,512),[[b,l.stronghold.laws.propertyTaxRate]]),s(" Property Tax Rate (%) "),Fo,p(e("input",{type:"number",class:"form-control",min:"0",max:"0.5",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[8]||(t[8]=a=>l.stronghold.laws.rentRate=a),step:"0.01",title:"rents on public owned housing."},null,512),[[b,l.stronghold.laws.rentRate]]),s(" Daily Rent for Laborers (Middle Class housing pays 5 times this amount) "),Bo,p(e("input",{type:"number",class:"form-control",min:"0",max:"50",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[9]||(t[9]=a=>l.stronghold.laws.vassalTaxRate=a),step:"1",title:"vassal taxes enforce taxes on your vassals. Enforcing vassal taxes requires hiring a tax collector. Additionally, vassal tax rates above 10% increase the amount of vassal unrest by the amount above 10%"},null,512),[[b,l.stronghold.laws.vassalTaxRate]]),s(" Vassal Tax Rate (%) "),Oo,p(e("input",{type:"number",class:"form-control",min:"0",max:l.stronghold.resources.food,style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[10]||(t[10]=a=>l.stronghold.laws.foodSubsidies=a),step:"1",title:"Food subsidies are expensive, but reduce unrest."},null,8,Ho),[[b,l.stronghold.laws.foodSubsidies]]),s(" Food Subsidies (person days of food) "),jo,p(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=a=>l.stronghold.laws.conscription=a),title:"conscription involves forcing people to work as soldiers. It enables you to make any portion of your population guards, and reduces the cost of guards to the cost of laborers. However, your unrest will increase by the percentage of your population that is guards."},null,512),[[D,l.stronghold.laws.conscription]]),s(" Conscription ")])])]),_:1}),C(r,{title:"Animals"},{default:L(()=>[e("div",Go,[e("div",Yo,[s(" Name "),p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=a=>l.newanimal.name=a)},null,512),[[b,l.newanimal.name]])]),e("div",qo,[s(" Species "),p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=a=>l.newanimal.species=a)},null,512),[[b,l.newanimal.species]])]),e("div",Wo,[s(" Lives At "),p(e("select",{class:"form-control","onUpdate:modelValue":t[14]||(t[14]=a=>l.newanimal.livesat=a)},Qo,512),[[J,l.newanimal.livesat]])]),e("div",Zo,[s(" Daily Food Cost "),p(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=a=>l.newanimal.foodcost=a),title:"see bottom of page for typical food costs by animal size and diet."},null,512),[[b,l.newanimal.foodcost]])]),e("div",xo,[e("button",{onClick:t[16]||(t[16]=a=>l.addAnimal()),class:"btn btn-success",style:{"margin-top":"22px"}},"Add")])]),e("div",es,[e("div",ls,[ts,e("table",ns,[os,e("tbody",null,[(d(!0),i(w,null,_(l.homelessAnimals,a=>(d(),i("tr",{key:a.id},[e("td",null,n(a.name),1),e("td",null,n(a.species),1),e("td",null,n(a.foodcost*2)+" (base "+n(a.foodcost)+")",1),e("td",null,[e("button",{class:"btn btn-danger",onClick:g=>l.removeAnimal(a)},"X",8,ss)])]))),128))])])])]),e("div",as,[e("div",rs,[ds,e("table",is,[us,e("tbody",null,[(d(!0),i(w,null,_(l.stableAnimals,a=>(d(),i("tr",{key:a.id},[e("td",null,n(a.name),1),e("td",null,n(a.species),1),e("td",null,n(a.foodcost),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:g=>l.removeAnimal(a)},"X",8,hs)])]))),128))])])])]),e("div",ms,[e("div",cs,[ps,e("table",gs,[bs,e("tbody",null,[(d(!0),i(w,null,_(l.sanctuaryAnimals,a=>(d(),i("tr",{key:a.id},[e("td",null,n(a.name),1),e("td",null,n(a.species),1),e("td",null,n(a.foodcost),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:g=>l.removeAnimal(a)},"X",8,fs)])]))),128))])])])]),e("div",vs,[e("div",ys,[ws,e("table",_s,[$s,e("tbody",null,[(d(!0),i(w,null,_(l.ayrieAnimals,a=>(d(),i("tr",{key:a.id},[e("td",null,n(a.name),1),e("td",null,n(a.species),1),e("td",null,n(a.foodcost),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:g=>l.removeAnimal(a)},"X",8,ks)])]))),128))])])])]),Ss]),_:1}),C(r,{title:"Private Enterprises and Vassals"},{default:L(()=>[e("div",Ts,[e("div",As,[e("h4",null,n(l.stronghold.townName)+" Private Enterprises",1),(d(!0),i(w,null,_(l.stronghold.privateEnterprise,a=>(d(),i("div",{key:a.id},[e("h5",null,[s(n(a.name)+" x "+n(a.count)+" ",1),e("button",{onClick:g=>l.deletePrivateEnterprise(a),class:"btn btn-danger"},"X",8,Cs)])]))),128))]),e("div",Rs,[Is,e("p",null,[e("strong",null,"Laborers: "+n(l.privateLaborers),1)]),(d(!0),i(w,null,_(l.stronghold.privateEmployees,a=>(d(),i("p",{key:a.id},n(a.name),1))),128))]),e("div",Ls,[Ns,e("table",Ms,[Us,(d(!0),i(w,null,_(l.stronghold.vassals,a=>(d(),i("tr",{key:a.id},[e("td",null,[p(e("input",{type:"text","onUpdate:modelValue":g=>a.name=g},null,8,Vs),[[b,a.name]])]),e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":g=>a.income=g},null,8,Ds),[[b,a.income]])])]))),128))]),e("div",Es,[e("button",{onClick:t[17]||(t[17]=a=>l.addVassal()),class:"btn btn-sm btn-primary"},"+")])])])]),_:1}),C(r,{title:"Random Events"},{default:L(()=>[Ps,Fs]),_:1}),C(r,{title:"Actions"},{default:L(()=>[Bs,Os,Hs]),_:1}),C(r,{title:"Weather"},{default:L(()=>[e("p",null," Today's Weather: "+n(l.stronghold.currentTemperature)+" Degrees Farenheit. "+n(l.stronghold.rainString)+". Average Windspeed: "+n(l.stronghold.windSpeed),1),e("label",null,[s("Typical Yearly Rainfall: "),p(e("select",{"onUpdate:modelValue":t[18]||(t[18]=a=>l.stronghold.laws.rainfall=a),class:"form-control"},Js,512),[[J,l.stronghold.laws.rainfall]])]),e("label",null,[s("Annual Mean Temperature (F): "),p(e("input",{type:"number",min:"-70",max:"120","onUpdate:modelValue":t[19]||(t[19]=a=>l.stronghold.laws.temperature=a)},null,512),[[b,l.stronghold.laws.temperature]])]),e("label",null,[s(" Continental (More than 200 miles from the coast): "),p(e("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=a=>l.stronghold.laws.continental=a)},null,512),[[D,l.stronghold.laws.continental]])]),e("label",null,[s("Lattitiude: "),p(e("input",{type:"number",min:"-90",max:"90","onUpdate:modelValue":t[21]||(t[21]=a=>l.stronghold.laws.lattitude=a)},null,512),[[b,l.stronghold.laws.lattitude]])])]),_:1})]),_:1}),Ks,Qs])}var ta=F(Qn,[["render",Zs],["__scopeId","data-v-7bd5a568"]]);export{ta as default};
