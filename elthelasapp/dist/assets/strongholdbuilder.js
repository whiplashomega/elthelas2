var Re=Object.defineProperty,Ae=Object.defineProperties;var Le=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var re=(l,t,m)=>t in l?Re(l,t,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[t]=m,O=(l,t)=>{for(var m in t||(t={}))Ne.call(t,m)&&re(l,m,t[m]);if(ae)for(var m of ae(t))Me.call(t,m)&&re(l,m,t[m]);return l},ne=(l,t)=>Ae(l,Le(t));import{n as Y,b as Z,_ as q,m as Ie}from"./index.js";import{h as W,o as d,c as i,f as e,k as a,t as n,g as C,p,v as g,L as j,F as k,l as S,J as z,K as X,i as E,j as N,w as V,M as Q,n as K,D as Ue,u as Ve}from"./vendor.js";var De={props:["improvement","stronghold"],setup(){const l=Y(),t=Z(),{forestedLand:m,calcRevRatio:y,calculateIncome:_,calculateRevenue:f,guardsNeeded:o,laborersNeeded:u,servantsNeeded:r,availableLaborers:v,availableOfType:w}=W(l),{getUserInfo:L}=t;return{forestedLand:m,calcRevRatio:y,calculateIncome:_,calculateRevenue:f,guardsNeeded:o,laborersNeeded:u,servantsNeeded:r,availableLaborers:v,availableOfType:w,userinfo:L}},data(){return{}},methods:{min(l){return Math.min(...l)},removeImprovement(l){l.removeNum?(l.count-=l.removeNum,l.count<=0&&this.stronghold.improvements.splice(this.stronghold.improvements.indexOf(l),1)):alert("please select the amount to remove.")}}};const B=l=>(z("data-v-5ebac29b"),l=l(),X(),l),Pe={key:0},Ee={key:1},Fe=["max"],Be={key:0},He=B(()=>e("th",null,"Benefit",-1)),je=B(()=>e("th",null,"Income",-1)),Ge=B(()=>e("th",null,"Operational",-1)),Oe=B(()=>e("th",null,"Resources Produced",-1)),Ye=B(()=>e("th",null,"Population",-1)),qe=B(()=>e("th",null,"Efficiency",-1)),We=B(()=>e("th",null,"Employs",-1)),ze=["max"],Xe=B(()=>e("th",null,"Staff Required to Operate",-1)),Je={key:0},Ke=["onUpdate:modelValue","max"],Qe={key:0},Ze={key:1};function xe(l,t,m,y,_,f){return d(),i("div",null,[e("h6",null,[a(n(l.improvement.name)+" x "+n(l.improvement.count)+" ",1),e("button",{onClick:t[0]||(t[0]=o=>l.improvement.hide=!l.improvement.hide),class:"btn btn-sm btn-primary"},[l.improvement.hide?(d(),i("span",Pe,"Show")):C("",!0),l.improvement.hide?C("",!0):(d(),i("span",Ee,"Hide"))]),a("\xA0 "),p(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>l.improvement.removeNum=o),style:{width:"75px",display:"inline","margin-top":"1px"},class:"form-control form-control-sm",min:"0",max:l.improvement.count,step:"1"},null,8,Fe),[[g,l.improvement.removeNum]]),a("\xA0 "),e("button",{onClick:t[2]||(t[2]=o=>l.removeImprovement(l.improvement)),class:"btn btn-sm btn-danger"}," X ")]),l.improvement.hide?C("",!0):(d(),i("table",Be,[e("tr",null,[He,e("td",null,n(l.improvement.benefit),1)]),e("tr",null,[je,e("td",null,n(l.calculateIncome(l.improvement)),1)]),e("tr",null,[Ge,e("td",null,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=o=>l.improvement.operating=o)},null,512),[[j,l.improvement.operating]])])]),e("tr",null,[Oe,e("td",null,[l.improvement.revenue[l.res]!==0?(d(!0),i(k,{key:0},S(l.calculateRevenue(l.improvement),(o,u)=>(d(),i("div",{key:u},n(u)+": "+n(o),1))),128)):C("",!0)])]),e("tr",null,[Ye,e("td",null,n(l.improvement.count*l.improvement.pop),1)]),e("tr",null,[qe,e("td",null,n(l.calcRevRatio(l.improvement)*100)+"%",1)]),e("tr",null,[We,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>l.improvement.laborers=o),class:"form-control",style:{"max-width":"75px",display:"inline"},min:"0",max:l.min([l.improvement.employs*l.improvement.count,Number(l.improvement.laborers)+l.availableLaborers])},null,8,ze),[[g,l.improvement.laborers]]),a(" / "+n(l.improvement.employs*l.improvement.count),1)])]),e("tr",null,[Xe,e("td",null,[l.improvement.staff.length===0?(d(),i("span",Je,"None")):C("",!0),(d(!0),i(k,null,S(l.improvement.staff,o=>(d(),i("div",{key:o.name},[p(e("input",{type:"number","onUpdate:modelValue":u=>o.cur=u,style:{width:"75px",display:"inline"},class:"form-control",min:"0",max:l.min([Number(o.cur)+l.availableOfType(o.name),o.num*l.improvement.count])},null,8,Ke),[[g,o.cur]]),a(" / "),o.num>0?(d(),i("span",Qe,n(o.num*l.improvement.count),1)):C("",!0),a(" "+n(o.name)+" ",1),o.num===0?(d(),i("span",Ze,"(Can be shared with another job)")):C("",!0)]))),128))])])]))])}var el=q(De,[["render",xe],["__scopeId","data-v-5ebac29b"]]),ll={components:{improvement:el},setup(){const l=Y(),t=Z(),{availableClearedLand:m,availableForestedLand:y,farmLand:_,forestedLand:f,improvements:o,stronghold:u,timberLand:r,totalLand:v,urbanLand:w,availableLaborers:L}=W(l),{addImprovement:I,addToTreasury:s,buyResource:c}=l,{getUserInfo:M}=t;return{availableClearedLand:m,availableForestedLand:y,farmLand:_,forestedLand:f,improvements:o,stronghold:u,timberLand:r,totalLand:v,urbanLand:w,availableLaborers:L,userinfo:M,addImprovement:I,addToTreasury:s,buyResource:c}},computed:{availableImprovements(){if(this.showAvailable){let l=this.stronghold;return this.improvements.filter(t=>{let m=!0,y=l.improvements.filter(f=>f.id===t.id)[0],_=l.construction.filter(f=>f.id===t.id);return(y&&y.count+_.length>=t.max||_.length>=t.max)&&(m=!1),t.prerequisites.forEach(f=>{let o=!1;l.improvements.forEach(u=>{u.id===f&&(o=!0)}),l.privateEnterprise.forEach(u=>{u.id===f&&(o=!0)}),o===!1&&(m=!1)}),(t.isfarm&&this.availableClearedLand<1||(t.id==="town"||t.id==="additional-district")&&this.availableForestedLand<1.25||t.id==="village"&&this.availableForestedLand<.25||(t.id==="clear-land"||t.id==="lumber-camp")&&this.availableForestedLand<1)&&(m=!1),this.tagFilter!=="all"&&(t.tags.includes(this.tagFilter)||(m=!1)),m})}else return this.tagFilter!=="all"?this.improvements.filter(l=>l.tags.includes(this.tagFilter)):this.improvements},castleImprovements(){return this.stronghold.improvements.filter(l=>l.type==="castle").sort((l,t)=>l.name>t.name?1:-1)},countrysideImprovements(){return this.stronghold.improvements.filter(l=>l.type==="countryside").sort((l,t)=>l.name>t.name?1:-1)},townImprovements(){return this.stronghold.improvements.filter(l=>l.type==="town").sort((l,t)=>l.name>t.name?1:-1)}},data(){return{addImprovementModal:!1,showAvailable:!0,dmGift:!1,addImediately:!1,tagFilter:"all"}},methods:{min(l){return Math.min(...l)},addToConstruction(l){let t=l.buildtime;this.addImediately&&(t=0),t>0?this.stronghold.construction.push(ne(O({},l),{resourceCost:O({},l.resourceCost),laborersassigned:0})):this.addImprovement(l),l.dmGift=!1,!this.dmGift&&!l.private&&this.addToTreasury({changeby:-l.goldCost,record:"Begin construction on "+l.name}),this.dmGift&&(l.dmGift=!0),this.addImprovementModal=!1}}};const R=l=>(z("data-v-68a24067"),l=l(),X(),l),tl={class:"row"},nl={class:"col-sm-3"},ol={class:"col-sm-3"},sl=R(()=>e("h4",null,"Countryside Improvements",-1)),al={key:0},rl={class:"col-sm-3"},dl={class:"col-sm-3"},il=R(()=>e("h4",null,"Under Construction",-1)),ul={class:"table table-sm table-striped"},hl=R(()=>e("thead",null,[e("tr",null,[e("th",null,"Improvement"),e("th",{title:"number of days remaining if you have 10 laborers working construction on the building"},"LabDays Rem."),e("th",null,"Laborers")])],-1)),ml={key:0},pl=["onUpdate:modelValue"],cl=["onUpdate:modelValue","max"],gl=R(()=>e("option",{value:"all"},"All",-1)),bl=R(()=>e("option",{value:"infrastructure"},"Infrastructure",-1)),fl=R(()=>e("option",{value:"income"},"Income",-1)),vl=R(()=>e("option",{value:"player-benefit"},"Player Benefit",-1)),yl=R(()=>e("option",{value:"housing"},"Housing",-1)),wl=R(()=>e("option",{value:"defense"},"Defense",-1)),_l=R(()=>e("option",{value:"faction-base"},"Potential Base",-1)),$l=[gl,bl,fl,vl,yl,wl,_l],kl={style:{"overflow-y":"scroll",height:"600px"}},Sl={class:"table table-striped table-responsive",style:{width:"100%"}},Tl=R(()=>e("colgroup",null,[e("col",{style:{width:"10%"}}),e("col"),e("col",{style:{width:"30%"}}),e("col",{style:{width:"10%"}}),e("col"),e("col"),e("col"),e("col"),e("col")],-1)),Cl=R(()=>e("thead",null,[e("tr",null,[e("th",null,"Improvement"),e("th",null,"Private"),e("th",null,"Benefit"),e("th",null,"Staff"),e("th",null,"Revenue"),e("th",null,"Pop / Beds"),e("th",null,"Employs"),e("th",null,"Cost"),e("th",null,"Build Time")])],-1)),Rl=["onClick"],Al=["onUpdate:modelValue"],Ll={key:0},Nl={key:0},Ml={key:0},Il=R(()=>e("tfoot",null,[e("tr",null,[e("th",null,"Improvement"),e("th",null,"Benefit"),e("th",null,"Staff"),e("th",null,"Revenue"),e("th",null,"Pop"),e("th",null,"Employs"),e("th",null,"Cost"),e("th",null,"Build Time")])],-1)),Ul=R(()=>e("h4",null,"Land Details",-1)),Vl={class:"row"},Dl={class:"col-sm-3"},Pl=R(()=>e("br",null,null,-1)),El=R(()=>e("br",null,null,-1)),Fl={class:"col-sm-3"},Bl=R(()=>e("br",null,null,-1)),Hl=R(()=>e("br",null,null,-1)),jl=R(()=>e("br",null,null,-1)),Gl={class:"col-sm-3"},Ol=R(()=>e("br",null,null,-1)),Yl=R(()=>e("br",null,null,-1)),ql=R(()=>e("br",null,null,-1));function Wl(l,t,m,y,_,f){const o=E("improvement"),u=E("b-modal");return d(),i("div",null,[e("h2",null,[a("Improvements \xA0"),e("button",{onClick:t[0]||(t[0]=r=>l.addImprovementModal=!0),class:"btn btn-success"},"+")]),e("div",tl,[e("div",nl,[e("h4",null,n(l.stronghold.castleName)+" Castle Improvements",1),(d(!0),i(k,null,S(l.castleImprovements,r=>(d(),i("div",{key:r.id},[N(o,{improvement:r,stronghold:l.stronghold},null,8,["improvement","stronghold"])]))),128))]),e("div",ol,[sl,(d(!0),i(k,null,S(l.countrysideImprovements,r=>(d(),i("div",{key:r.id},[r.id!=="new-land"&&r.id!=="clear-land"?(d(),i("div",al,[N(o,{improvement:r,stronghold:l.stronghold},null,8,["improvement","stronghold"])])):C("",!0)]))),128))]),e("div",rl,[e("h4",null,n(l.stronghold.townName)+" Town Improvements",1),(d(!0),i(k,null,S(l.townImprovements,r=>(d(),i("div",{key:r.id},[N(o,{improvement:r,stronghold:l.stronghold},null,8,["improvement","stronghold"])]))),128))]),e("div",dl,[il,e("table",ul,[hl,e("tbody",null,[(d(!0),i(k,null,S(l.stronghold.construction,(r,v)=>(d(),i("tr",{key:r.id+v},[e("td",null,[a(n(r.name)+" ",1),r.private?(d(),i("span",ml,"(private)")):C("",!0)]),e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":w=>r.buildtime=w,min:"0",style:{"max-width":"75px"}},null,8,pl),[[g,r.buildtime]])]),e("td",null,[r.private?C("",!0):p((d(),i("input",{key:0,type:"number","onUpdate:modelValue":w=>r.laborersassigned=w,min:"0",max:l.min([r.buildtime,l.availableLaborers+r.laborersassigned]),style:{"max-width":"75px"}},null,8,cl)),[[g,r.laborersassigned]])])]))),128))])])]),N(u,{modelValue:l.addImprovementModal,"onUpdate:modelValue":t[5]||(t[5]=r=>l.addImprovementModal=r),title:"Add Improvement",size:"xl"},{default:V(()=>[p(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=r=>l.showAvailable=r)},null,512),[[j,l.showAvailable]]),a(" Only Show Available Improvements "),p(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=r=>l.dmGift=r)},null,512),[[j,l.dmGift]]),a(" DM Gift (added without cost) "),p(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=r=>l.addImediately=r)},null,512),[[j,l.addImediately]]),a(" Ignore Construction Time "),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>l.tagFilter=r)},$l,512),[[Q,l.tagFilter]]),e("div",kl,[e("table",Sl,[Tl,Cl,e("tbody",null,[(d(!0),i(k,null,S(l.availableImprovements,r=>(d(),i("tr",{key:r.id},[e("td",null,[e("a",{href:"#",onClick:v=>l.addToConstruction(r)},n(r.name),9,Rl)]),e("td",null,[p(e("input",{type:"checkbox","onUpdate:modelValue":v=>r.private=v},null,8,Al),[[j,r.private]])]),e("td",null,n(r.benefit),1),e("td",null,[(d(!0),i(k,null,S(r.staff,v=>(d(),i("span",{key:v.name},[v.num>0?(d(),i("span",Ll,n(v.num),1)):C("",!0),a(" "+n(v.name),1)]))),128))]),e("td",null,[e("div",null,"Gold: "+n(r.income),1),(d(!0),i(k,null,S(r.revenue,(v,w)=>(d(),i("div",{key:w},[v!==0?(d(),i("div",Nl,n(w)+": "+n(v),1)):C("",!0)]))),128))]),e("td",null,n(r.pop)+" / "+n(r.staffpop),1),e("td",null,n(r.employs),1),e("td",null,[e("div",null,"Gold: "+n(r.goldCost),1),(d(!0),i(k,null,S(r.resourceCost,(v,w)=>(d(),i("div",{key:w},[v!==0?(d(),i("div",Ml,n(w)+": "+n(v),1)):C("",!0)]))),128))]),e("td",null,n(r.buildtime),1)]))),128))]),Il])])]),_:1},8,["modelValue"])]),Ul,e("div",Vl,[e("div",Dl,[a(" Total Land: "+n(l.totalLand),1),Pl,a(" Total Cleared Land: "+n(l.availableClearedLand+l.farmLand+l.urbanLand),1),El]),e("div",Fl,[a(" Total Forested Land: "+n(l.forestedLand),1),Bl,a(" Land Used For Timber Harvesting: "+n(l.timberLand),1),Hl,a(" Available Forested Land: "+n(l.availableForestedLand),1),jl]),e("div",Gl,[a(" Available Cleared Land: "+n(l.availableClearedLand),1),Ol,a(" Farm Land: "+n(l.farmLand),1),Yl,a(" Urban Land: "+n(l.urbanLand),1),ql])])])}var zl=q(ll,[["render",Wl],["__scopeId","data-v-68a24067"]]),Xl={setup(){const l=Y(),t=Z(),{guardsNeeded:m,totalSalary:y,getPop:_,stronghold:f,servantsNeeded:o,laborersNeeded:u,staffSummary:r,maxLaborers:v,availableStaffBeds:w,unmetStaffNeed:L,staffTypes:I,totalHousing:s}=W(l),{getUserInfo:c}=t;return{guardsNeeded:m,totalSalary:y,getPop:_,stronghold:f,servantsNeeded:o,laborersNeeded:u,staffSummary:r,maxLaborers:v,availableStaffBeds:w,unmetStaffNeed:L,staffTypes:I,totalHousing:s,userinfo:c}},computed:{staffList(){return[...this.stronghold.staff].sort((l,t)=>this.staffSort==="job"?l.job.name>t.job.name?1:-1:l[this.staffSort]>t[this.staffSort]?1:-1)}},data(){return{newstaff:{name:"",job:{name:"",typicalSalary:0,bonus:"",subtype:""},salary:0},staffSort:"name"}},methods:{addStaff(){this.stronghold.staff.push(ne(O({id:Date.now()},this.newstaff),{job:O({},this.newstaff.job)})),this.newstaff={name:"",job:{name:"",typicalSalary:0,bonus:""},salary:0}},fireStaff(l){this.stronghold.staff.splice(this.stronghold.staff.indexOf(l),1)}}};const T=l=>(z("data-v-6a320414"),l=l(),X(),l),Jl=T(()=>e("h2",null,"Staff",-1)),Kl={class:"row"},Ql={class:"col-sm-5"},Zl=T(()=>e("h4",null,"Population",-1)),xl={class:"table table-striped table-sm"},et=T(()=>e("colgroup",null,[e("col"),e("col",{style:{wdith:"15%"}})],-1)),lt=T(()=>e("td",null,"Healthy Adults",-1)),tt=T(()=>e("td",null,"Children",-1)),nt=T(()=>e("td",null,"Sick",-1)),ot=T(()=>e("td",null,"Elderly",-1)),st=T(()=>e("td",null,"Total Population",-1)),at=T(()=>e("h4",null,"Staff Summary",-1)),rt={class:"table table-striped table-sm"},dt=T(()=>e("colgroup",null,[e("col"),e("col",{style:{width:"15%"}})],-1)),it=T(()=>e("thead",null,[e("th",null,"Job"),e("th",null,"Total"),e("th",null,"Needed"),e("th",null,"Bonus")],-1)),ut=T(()=>e("td",null,"Guards",-1)),ht=["max"],mt=T(()=>e("td",null,"Protects your stronghold from attack, can also collect taxes.",-1)),pt=T(()=>e("td",null,"Servants",-1)),ct=["max"],gt=T(()=>e("td",null,"Handles common household tasks like cleaning and cooking.",-1)),bt=T(()=>e("td",null,"Laborers",-1)),ft=["max"],vt=T(()=>e("td",null,"Does manual labor in many employments, from a blacksmiths apprentice/journeyman to cutting down trees.",-1)),yt={key:0},wt={key:0,class:"red"},_t={key:1,class:"red"},$t={class:"col-sm-2"},kt=T(()=>e("h4",null,"Unmet Needs",-1)),St=T(()=>e("h4",null,"Add Staff",-1)),Tt=["value"],Ct={key:0},Rt=["value"],At=T(()=>e("br",null,null,-1)),Lt=T(()=>e("br",null,null,-1)),Nt=["disabled"],Mt={class:"col-sm-5"},It=T(()=>e("h4",null,"Staff List",-1)),Ut={class:"table table-striped table-sm"},Vt=T(()=>e("th",null,"Fire",-1)),Dt={key:0},Pt=["onClick"];function Et(l,t,m,y,_,f){return d(),i("div",null,[Jl,e("div",Kl,[e("div",Ql,[Zl,e("table",xl,[et,e("tbody",null,[e("tr",null,[lt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=o=>l.stronghold.population.adults=o),class:"form-control",min:"0"},null,512),[[g,l.stronghold.population.adults]])])]),e("tr",null,[tt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>l.stronghold.population.children=o),class:"form-control",min:"0"},null,512),[[g,l.stronghold.population.children]])])]),e("tr",null,[nt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>l.stronghold.population.invalid=o),class:"form-control",min:"0"},null,512),[[g,l.stronghold.population.invalid]])])]),e("tr",null,[ot,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>l.stronghold.population.elderly=o),class:"form-control",min:"0"},null,512),[[g,l.stronghold.population.elderly]])])]),e("tr",null,[st,e("td",null,n(l.getPop),1)])])]),at,a(" Total Staff Salary: "+n(l.totalSalary)+" ",1),e("table",rt,[dt,it,e("tbody",null,[e("tr",null,[ut,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>l.stronghold.guards=o),class:"form-control",min:"0",max:l.availableStaffBeds+Number(l.stronghold.guards)},null,8,ht),[[g,l.stronghold.guards]])]),e("td",null,n(l.guardsNeeded),1),mt]),e("tr",null,[pt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=o=>l.stronghold.servants=o),class:"form-control",min:"0",max:l.availableStaffBeds+Number(l.stronghold.servants)},null,8,ct),[[g,l.stronghold.servants]])]),e("td",null,n(l.servantsNeeded),1),gt]),e("tr",null,[bt,e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=o=>l.stronghold.laborers=o),class:"form-control",min:"0",max:l.maxLaborers,title:"You can hire laborers up to the number of healthy adults (not including staff, the other 30% are kids too young to work), private enterprises will suck up a certain percentage of the labor market though."},null,8,ft),[[g,l.stronghold.laborers]])]),e("td",null,n(l.laborersNeeded),1),vt]),(d(!0),i(k,null,S(l.staffSummary,o=>(d(),i("tr",{key:o.job.name+o.job.subtype},[e("td",null,[a(n(o.job.name)+" ",1),o.job.subtype?(d(),i("span",yt,"("+n(o.job.subtype)+")",1)):C("",!0)]),e("td",null,n(o.count),1),e("td",null,n(o.needed),1),e("td",null,n(o.job.bonus),1)]))),128))])]),l.stronghold.laborers>=l.maxLaborers?(d(),i("div",wt,"Not Enough Housing or Healthy Adults To Hire Additional Laborers")):C("",!0),l.availableStaffBeds<=0?(d(),i("div",_t,"Not Enough Beds To House Additional Skilled Staff")):C("",!0)]),e("div",$t,[kt,(d(!0),i(k,null,S(l.unmetStaffNeed,o=>(d(),i("div",{key:o.name},n(o.name)+" x "+n(o.num),1))),128)),St,e("div",null,[e("label",null,[a(" Name "),p(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>l.newstaff.name=o),class:"form-control form-control-sm"},null,512),[[g,l.newstaff.name]])])]),e("div",null,[e("label",null,[a(" Job "),p(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.newstaff.job=o),class:"form-control form-control-sm"},[(d(!0),i(k,null,S(l.staffTypes,o=>(d(),i("option",{value:o,key:o.name},n(o.name),9,Tt))),128))],512),[[Q,l.newstaff.job]])]),typeof l.newstaff.job.subtypes!="undefined"?(d(),i("label",Ct,[a(" Sub Type "),p(e("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.newstaff.job.subtype=o),class:"form-control form-control-sm"},[(d(!0),i(k,null,S(l.newstaff.job.subtypes,o=>(d(),i("option",{value:o,key:o},n(o),9,Rt))),128))],512),[[Q,l.newstaff.job.subtype]])])):C("",!0),At,a(" Bonus: "+n(l.newstaff.job.bonus),1)]),e("div",null,[e("label",null,[a(" Salary "),p(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=o=>l.newstaff.salary=o),class:"form-control form-control-sm"},null,512),[[g,l.newstaff.salary]])]),Lt,a(" Typical: "+n(l.newstaff.job.typicalSalary)+" gp ",1)]),e("div",null,[e("button",{onClick:t[11]||(t[11]=o=>l.addStaff()),class:"btn btn-success btn-sm",disabled:!l.availableStaffBeds},"Add",8,Nt)])]),e("div",Mt,[It,e("table",Ut,[e("thead",null,[e("th",{class:K(l.staffSort==="name"?"bold":""),onClick:t[12]||(t[12]=o=>l.staffSort="name")},"Name",2),e("th",{class:K(l.staffSort==="job"?"bold":""),onClick:t[13]||(t[13]=o=>l.staffSort="job")},"Job",2),e("th",{class:K(l.staffSort==="salary"?"bold":""),onClick:t[14]||(t[14]=o=>l.staffSort="salary")},"Salary",2),Vt]),e("tbody",null,[(d(!0),i(k,null,S(l.staffList,o=>(d(),i("tr",{key:o.id},[e("td",null,n(o.name),1),e("td",null,[a(n(o.job.name)+" ",1),o.job.subtype?(d(),i("span",Dt,"("+n(o.job.subtype)+")",1)):C("",!0)]),e("td",null,n(o.salary),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:u=>l.fireStaff(o)},"X",8,Pt)])]))),128))])])])])])}var Ft=q(Xl,[["render",Et],["__scopeId","data-v-6a320414"]]);function de(){let l=0,t=0;for(;l===0;)l=Math.random();for(;t===0;)t=Math.random();let m=Math.sqrt(-2*Math.log(l))*Math.cos(2*Math.PI*t);return m=m/10+.5,m>1||m<0?de():m}var Bt={setup(){const l=Y(),t=Z(),{strongholds:m,availableStaffBeds:y,calcTotalRevenue:_,gameDate:f,maxLaborers:o,netRevenue:u,stronghold:r,totalStorage:v,unrest:w,usedStorage:L,totalHousing:I,getPop:s,staffList:c,nonstaffPop:M,staffBeds:D}=W(l),{getUserInfo:U}=t,{newStronghold:$,buyResource:b,getStrongholds:P,loadStronghold:H,loadStrongholdById:G,saveStronghold:J,saveNewStronghold:x,deleteStronghold:ee,addToTreasury:le,addImprovement:te}=l;return{allStrongholds:m,availableStaffBeds:y,calcTotalRevenue:_,gameDate:f,maxLaborers:o,netRevenue:u,stronghold:r,totalStorage:v,unrest:w,usedStorage:L,totalHousing:I,getPop:s,staffList:c,nonstaffPop:M,staffBeds:D,userinfo:U,newStronghold:$,buyResource:b,getStrongholds:P,loadStronghold:H,loadStrongholdById:G,saveStronghold:J,saveNewStronghold:x,deleteStronghold:ee,addToTreasury:le,addImprovement:te}},data(){return{newmodal:!0,dayofweek:"Godsday",dayNames:["Godsday","Elvesday","Gnomesday","Dragonsday","Mansday","Dwarvesday","Orcsday"],monthNames:["Neradan","Dorunor","Trimalan","Sylvanus","Gaiana","Alohiman","Coranus","Moltyr","Saris","Maridia","Tockra","Amatherin"]}},components:{modal:Ie},methods:{newDay(){this.stronghold.laws.foodSubsidies>this.stronghold.resources.food&&(this.stronghold.laws.foodSubsidies=this.stronghold.resources.food),this.stronghold.laws.todaysExports-=this.exportLimit,this.stronghold.laws.todaysExports<0&&(this.stronghold.laws.todaysExports=0);for(let b in this.stronghold.autoSell)-Number(this.stronghold.autoSell[b])>this.stronghold.resources[b]&&(this.stronghold.autoSell[b]=-this.stronghold.resources[b]);this.addToTreasury({changeby:this.netRevenue,record:"daily net revenue"});let l=this.calcTotalRevenue;for(let b in this.stronghold.resources)this.stronghold.resources[b]=Math.round((this.stronghold.resources[b]+Number(l[b]))*100)/100,this.stronghold.resources[b]<0&&(this.stronghold.resources[b]=0);this.stronghold.gameDay+=1,this.stronghold.gameDay>30&&(this.stronghold.gameDay=1,this.stronghold.gameMonth+=1),this.stronghold.gameMonth>12&&(this.stronghold.gameMonth=1,this.stronghold.gameYear+=1);let t=[];this.stronghold.construction.forEach(b=>{b.laborersassigned||(b.laborersassigned=0);let P=Ue(b.laborersassigned);if(!b.private&&!b.dmGift){let H=P.div(b.buildtime);for(let G in b.resourceCost){let J=H.mul(b.resourceCost[G]).toFixed(2);b.resourceCost[G]-=J}b.buildtime-=P}else b.private?b.buildtime-=20:b.build-=P;b.buildtime<=0&&(t.push(b),this.addImprovement(b))}),t.forEach(b=>{this.stronghold.construction.splice(this.stronghold.construction.indexOf(b),1)}),this.calcWeather();let m=this.stronghold.gameYear*365+this.stronghold.gameMonth*30+this.stronghold.gameDay;this.dayofweek=this.dayNames[m%7],this.month=this.monthNames[this.stronghold.gameMonth-1];let y=this.stronghold.population.children/6570,_=this.stronghold.population.elderly/5475,f=this.stronghold.population.adults*.5*(.15/365);f=Math.max(this.stronghold.population.adults*1e-5,f*(1-this.unrest/100));let o=this.stronghold.population.adults/17155,u=this.stronghold.population.invalid/1e3,r=this.stronghold.improvements.some(b=>b.id==="clinic"),v=this.stronghold.population.invalid/50*(r?3:1),w=this.stronghold.population.adults/200,L=0,I=0,s=0,c=0,M=0,D=r?Math.ceil(Math.random()*6):0,U=0,$=Math.random();for(;1-$<y;)L++,$=Math.random(),y>1&&y--;for($=Math.random();1-$<_;)s++,$=Math.random(),_>1&&_--;for($=Math.random();1-$<f;)I++,$=Math.random(),f>1&&f--;for($=Math.random();1-$<o;)c++,$=Math.random(),o>1&&o--;for($=Math.random();1-$<u;)M++,$=Math.random(),u>1&&u--;for($=Math.random();1-$<v;)D++,$=Math.random(),v>1&&v--;for($=Math.random();1-$<w;)U++,$=Math.random(),w>1&&w--;this.stronghold.population.children=Number(this.stronghold.population.children)+I,U>Number(this.stronghold.population.adults)&&(U=Number(this.stronghold.population.adults)),this.stronghold.population.invalid=Number(this.stronghold.population.invalid)+U,this.stronghold.population.adults=Number(this.stronghold.population.adults)-U,D>Number(this.stronghold.population.invalid)&&(D=Number(this.stronghold.population.invalid)),this.stronghold.population.invalid-=D,this.stronghold.population.adults+=D,M>Number(this.stronghold.population.invalid)&&(U=Number(this.stronghold.population.invalid)),this.stronghold.population.invalid-=M,c>Number(this.stronghold.population.adults)&&(c=Number(this.stronghold.population.adults)),this.stronghold.population.adults-=c,this.stronghold.population.elderly=Number(this.stronghold.population.elderly)+c,s>Number(this.stronghold.population.elderly)&&(s=Number(this.stronghold.population.elderly)),this.stronghold.population.elderly-=s,L>Number(this.stronghold.population.children)&&(L=Number(this.stronghold.population.children)),this.stronghold.population.children-=L,this.stronghold.population.adults+=L,alert("A new day has begun. It is the "+this.stronghold.gameDay+"th day of "+this.month+", "+this.dayofweek+". it is "+this.stronghold.currentTemperature+" degrees outside. "+this.stronghold.rainString+". The average windspeed is "+this.stronghold.windSpeed+` mph.

There were `+I+" births, "+c+" retirements, "+M+" deaths from disease and injury, "+D+" people recovered from illness, "+U+" people became ill or injured, "+s+" deaths from old age, and "+L+" children reaching adulthood")},calcWeather(){let l=3,t=Number(this.stronghold.laws.temperature);this.stronghold.gameMonth<3||this.stronghold.gameMonth>11?l=4:this.stronghold.gameMonth<2&&this.stronghold.gameMonth<6?l=1:this.stronghold.gameMonth>5&&this.stronghold.gameMonth<9&&(l=2),l===2&&this.stronghold.laws.lattitude>=0||l===4&&this.stronghold.laws.lattitude<0?(t+=20,this.stronghold.laws.continental&&Math.abs(this.stronghold.laws.lattitude)>30&&(t+=15)):(l===4||l===2)&&(t-=20,this.stronghold.laws.continental&&Math.abs(this.stronghold.laws.lattitude)>30&&(t-=15));let m=t-30-this.stronghold.laws.continental*10,_=t+30+this.stronghold.laws.continental*10-m,f=Math.floor(de()*_)+m,o=2.75*this.stronghold.laws.rainfall/365,u="No precipitation";if(Math.random()<o){let r=Math.random();r<.33?(u="Scattered showers occur throughout the day",f<32&&(u="Snow flurries occur throughout the day")):r<.5?(u="A steady rain falls throughout the day",f<32&&(u="An inch or two of snow falls over the course of the day")):r<.67?(u="A storm passed through overnight",f<40&&(u="A snowstorm passes through overnight")):(u="A large thunderstorm sweeps into the area",f<32&&(u="A major blizzard passes through the area"))}this.stronghold.currentTemperature=f,this.stronghold.rainString=u,this.stronghold.windSpeed=Math.floor(Math.random()*20)+(Math.random()>.75?Math.floor(Math.random()*30):0)}}};const F=l=>(z("data-v-4ea102d2"),l=l(),X(),l),Ht={class:"row"},jt={class:"col-sm-5"},Gt={class:"btn-group"},Ot={class:"col-sm-7"},Yt={class:"row"},qt=F(()=>e("strong",null,"Gold: ",-1)),Wt={key:0},zt={class:"col-sm-3"},Xt=F(()=>e("strong",null,"Available Beds: ",-1)),Jt={class:"col-sm-3"},Kt=F(()=>e("strong",null,"Total Staff Beds:",-1)),Qt={class:"col-sm-3"},Zt=F(()=>e("strong",null,"Unrest: ",-1)),xt={class:"row"},en={class:"col-sm-3"},ln=F(()=>e("strong",null,"Total Population: ",-1)),tn={class:"col-sm-3"},nn=F(()=>e("strong",null,"Non-Staff Population: ",-1)),on={class:"col-sm-3"},sn=F(()=>e("strong",null,"Non-Staff Housing: ",-1)),an={class:"col-sm-3"},rn=F(()=>e("strong",null,"Max Laborers: ",-1)),dn={class:"row"},un={key:0},hn={key:0,class:"alert alert-danger"},mn=F(()=>e("h5",null,"Start Date",-1)),pn={class:"row"},cn={class:"col-sm-4"},gn={class:"col-sm-4"},bn={class:"col-sm-4"},fn={class:"row"},vn={class:"col-sm-12"},yn=F(()=>e("h4",null,"Load Stronghold",-1)),wn=["onClick"],_n=["onClick"];function $n(l,t,m,y,_,f){const o=E("b-modal");return d(),i("div",null,[e("div",Ht,[e("h1",jt,[e("div",Gt,[e("button",{class:"btn btn-warning",onClick:t[0]||(t[0]=u=>l.newmodal=!0)}," New / Load "),e("button",{class:"btn btn-success",onClick:t[1]||(t[1]=u=>l.saveNewStronghold())}," Save New "),l.stronghold._id?(d(),i("button",{key:0,class:"btn btn-primary",onClick:t[2]||(t[2]=u=>l.saveStronghold())}," Save ")):C("",!0)]),a(" "+n(l.stronghold.castleName)+" : "+n(l.stronghold.townName)+" "+n(l.gameDate)+" "+n(l.dayofweek)+"\xA0\xA0",1),e("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=u=>l.newDay())}," New Day ")]),e("div",Ot,[e("div",Yt,[e("div",{class:K([l.netRevenue<0?"red":"","col-sm-3"])},[qt,a(" "+n(l.stronghold.treasury)+" (",1),l.netRevenue>=0?(d(),i("span",Wt,"+")):C("",!0),a(n(l.netRevenue)+") ",1)],2),e("div",zt,[Xt,a(" "+n(l.availableStaffBeds),1)]),e("div",Jt,[Kt,a(" "+n(l.staffBeds),1)]),e("div",Qt,[Zt,a(" "+n(l.unrest)+"%",1)])]),e("div",xt,[e("div",en,[ln,a(" "+n(l.getPop),1)]),e("div",tn,[nn,a(" "+n(l.nonstaffPop),1)]),e("div",on,[sn,a(" "+n(l.totalHousing),1)]),e("div",an,[rn,a(" "+n(l.maxLaborers),1)])]),e("div",dn,[(d(!0),i(k,null,S(l.stronghold.resources,(u,r)=>(d(),i("div",{key:r,class:K(["col-sm-3",l.calcTotalRevenue[r]<0?"red":""])},[e("strong",null,n(r),1),a(": "+n(u)+" (",1),l.calcTotalRevenue[r]>=0?(d(),i("span",un,"+")):C("",!0),a(n(l.calcTotalRevenue[r])+") ",1)],2))),128))])])]),l.usedStorage>=l.totalStorage?(d(),i("div",hn," At Maximum Storage, newly stockpiled resources may be discarded ")):C("",!0),N(o,{modelValue:l.newmodal,"onUpdate:modelValue":t[11]||(t[11]=u=>l.newmodal=u)},{default:V(()=>[a(" Castle Name "),p(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=u=>l.stronghold.castleName=u),class:"form-control"},null,512),[[g,l.stronghold.castleName]]),a(" Town Name "),p(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=u=>l.stronghold.townName=u),class:"form-control"},null,512),[[g,l.stronghold.townName]]),mn,e("div",pn,[e("label",cn,[a(" Month "),p(e("input",{type:"number",min:"1",max:"12",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=u=>l.stronghold.gameMonth=u)},null,512),[[g,l.stronghold.gameMonth]])]),e("label",gn,[a(" Day "),p(e("input",{type:"number",min:"1",max:"30",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=u=>l.stronghold.gameDay=u)},null,512),[[g,l.stronghold.gameDay]])]),e("label",bn,[a(" Year "),p(e("input",{type:"number",min:"1800",max:"1846",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=u=>l.stronghold.gameYear=u)},null,512),[[g,l.stronghold.gameYear]])])]),e("div",fn,[e("div",vn,[a(" Starting Land (km^2) "),p(e("input",{type:"number",min:"1",max:"100",step:"1",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=u=>l.stronghold.improvements[0].count=u)},null,512),[[g,l.stronghold.improvements[0].count]])])]),yn,e("ul",null,[(d(!0),i(k,null,S(l.allStrongholds,u=>(d(),i("li",{key:u._id},[e("a",{href:"#",onClick:r=>{l.newmodal=!1,l.loadStronghold(u)}},n(u.castleName),9,wn),a("\xA0\xA0 "),e("button",{class:"btn btn-danger",onClick:r=>l.deleteStronghold({stronghold:u})}," X ",8,_n)]))),128))]),e("button",{class:"btn btn-secondary",onClick:t[10]||(t[10]=u=>l.newStronghold())},"New/Clear")]),_:1},8,["modelValue"])])}var kn=q(Bt,[["render",$n],["__scopeId","data-v-4ea102d2"]]),Sn={setup(){const l=Y(),{availableClearedLand:t,availableForestedLand:m,availableStaffBeds:y,farmLand:_,forestedLand:f,getPop:o,getInvalid:u,getChildren:r,getEmployable:v,privateEmployees:w,privateLaborers:L,staffBeds:I,stronghold:s,timberLand:c,totalLand:M,totalEmployees:D,unemploymentRate:U,unrest:$,urbanLand:b}=W(l),P=Z(),{getUserInfo:H}=P;return{availableClearedLand:t,availableForestedLand:m,availableStaffBeds:y,farmLand:_,forestedLand:f,getPop:o,getInvalid:u,getChildren:r,getEmployable:v,privateEmployees:w,privateLaborers:L,staffBeds:I,stronghold:s,timberLand:c,totalLand:M,totalEmployees:D,unemploymentRate:U,unrest:$,urbanLand:b,userinfo:H}}};const A=l=>(z("data-v-ce5bc5cc"),l=l(),X(),l),Tn={class:"row"},Cn={class:"col-sm-3"},Rn=A(()=>e("h4",null,"Land Details",-1)),An=A(()=>e("br",null,null,-1)),Ln=A(()=>e("br",null,null,-1)),Nn=A(()=>e("br",null,null,-1)),Mn=A(()=>e("br",null,null,-1)),In=A(()=>e("br",null,null,-1)),Un=A(()=>e("br",null,null,-1)),Vn=A(()=>e("br",null,null,-1)),Dn=A(()=>e("br",null,null,-1)),Pn={class:"col-sm-3"},En=A(()=>e("h4",null,"Population Statistics",-1)),Fn=A(()=>e("br",null,null,-1)),Bn=A(()=>e("br",null,null,-1)),Hn=A(()=>e("br",null,null,-1)),jn=A(()=>e("br",null,null,-1)),Gn=A(()=>e("br",null,null,-1)),On=A(()=>e("br",null,null,-1)),Yn=A(()=>e("br",null,null,-1)),qn=A(()=>e("br",null,null,-1)),Wn=A(()=>e("br",null,null,-1)),zn=A(()=>e("br",null,null,-1)),Xn={class:"col-sm-6"},Jn=A(()=>e("h4",null,"Notes",-1));function Kn(l,t,m,y,_,f){return d(),i("div",Tn,[e("div",Cn,[Rn,a(" Total Land: "+n(l.totalLand),1),An,a(" Total Forested Land: "+n(l.forestedLand),1),Ln,a(" Land Used For Timber Harvesting: "+n(l.timberLand),1),Nn,a(" Available Forested Land: "+n(l.availableForestedLand),1),Mn,a(" Total Cleared Land: "+n(l.availableClearedLand+l.farmLand+l.urbanLand),1),In,a(" Available Cleared Land: "+n(l.availableClearedLand),1),Un,a(" Farm Land: "+n(l.farmLand),1),Vn,a(" Urban Land: "+n(l.urbanLand),1),Dn]),e("div",Pn,[En,a(" Total Population: "+n(l.getPop),1),Fn,a(" Your Employees: "+n(l.totalEmployees),1),Bn,a(" Total Number Employed: "+n(l.totalEmployees+l.privateLaborers+l.stronghold.privateEmployees.length),1),Hn,a(" Adults in Good Health: "+n(l.getEmployable),1),jn,a(" Children: "+n(l.getChildren),1),Gn,a(" Sick, Disabled, and Elderly: "+n(l.getInvalid),1),On,a(" Unemployment Rate: "+n(l.unemploymentRate)+"%",1),Yn,a(" Beds for Staff: "+n(l.staffBeds),1),qn,a(" Available Beds: "+n(l.availableStaffBeds),1),Wn,a(" Unrest: "+n(l.unrest)+"%",1),zn]),e("div",Xn,[Jn,p(e("textarea",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=o=>l.stronghold.notes=o),style:{"min-height":"400px"}},null,512),[[g,l.stronghold.notes]])])])}var Qn=q(Sn,[["render",Kn],["__scopeId","data-v-ce5bc5cc"]]),Zn={components:{improvements:zl,staff:Ft,strongholdSummary:kn,generalInformation:Qn},setup(){const l=Y(),{bankRevenue:t,buildingMaintenance:m,getBuyTable:y,calcRevRatio:_,calcTotalRevenue:f,calculateIncome:o,calculateRevenue:u,calcGrossRevenue:r,expenses:v,getPop:w,grossRevenue:L,headTax:I,improvementRevenue:s,incomeTax:c,neededStaff:M,privateLaborers:D,propertyTax:U,rents:$,resourceCost:b,resourceRevenue:P,sellTable:H,staffBeds:G,staffTypes:J,staffSummary:x,stronghold:ee,taxRevenue:le,taxEfficiency:te,totalEmployees:ie,totalPrivateEmployed:ue,totalSalary:he,totalStorage:me,unemploymentRate:pe,unrest:ce,getPopNeeds:ge,getPrivateProduction:be,usedStorage:fe,vassalTax:ve}=W(l),{getAllImprovements:oe,newStronghold:ye,getAllStrongholds:se,loadStronghold:we,loadStrongholdById:_e,saveStronghold:$e,saveNewStronghold:ke,deleteStronghold:Se,addToTreasury:Te,buyResource:Ce}=l;return oe(),se(),Ve({title:"Stronghold Builder"}),{bankRevenue:t,buildingMaintenance:m,buyTable:y,calcRevRatio:_,calcTotalRevenue:f,calculateIncome:o,calculateRevenue:u,calcGrossRevenue:r,expenses:v,getPop:w,grossRevenue:L,headTax:I,improvementRevenue:s,incomeTax:c,neededStaff:M,privateLaborers:D,propertyTax:U,rents:$,resourceCost:b,resourceRevenue:P,sellTable:H,staffBeds:G,staffTypes:J,staffSummary:x,stronghold:ee,taxRevenue:le,taxEfficiency:te,totalEmployees:ie,totalPrivateEmployed:ue,totalSalary:he,totalStorage:me,unemploymentRate:pe,unrest:ce,popNeeds:ge,privateProduced:be,usedStorage:fe,vassalTax:ve,getAllImprovements:oe,newStronghold:ye,getAllStrongholds:se,loadStronghold:we,loadStrongholdById:_e,saveStronghold:$e,saveNewStronghold:ke,deleteStronghold:Se,addToTreasury:Te,buyResource:Ce}},computed:{reverseTransactions(){return this.stronghold.transactionrecord.slice().reverse()},sanctuaryAnimals(){return this.stronghold.animals.filter(l=>l.livesat==="animal-sanctuary").sort()},stableAnimals(){return this.stronghold.animals.filter(l=>l.livesat==="stable").sort()},ayrieAnimals(){return this.stronghold.animals.filter(l=>l.livesat==="ayrie").sort()},homelessAnimals(){return this.stronghold.animals.filter(l=>l.livesat==="homeless").sort()}},data(){return{resourceChange:{alcohol:0,arcanum:0,brick:0,clay:0,cloth:0,coal:0,coffee:0,consumergoods:0,cotton:0,food:0,furniture:0,horses:0,iron:0,leather:0,lumber:0,paper:0,pottery:0,raremetal:0,steel:0,stone:0,sugar:0,timber:0,wool:0},changeby:0,record:"",showTransactionRecord:!1,newanimal:{name:"",livesat:"stables",species:"",foodcost:0}}},methods:{deletePrivateEnterprise(l){let t=this.stronghold.privateEnterprise.filter(m=>m.id===l.id)[0];t&&t.count>1?t.count--:(l.count--,this.stronghold.privateEnterprise.splice(this.stronghold.privateEnterprise.indexOf(l),1)),l.staff.forEach(m=>{this.stronghold.privateEmployees.splice(this.stronghold.privateEmployees.findIndex(y=>y.name===m.name),1)})},sellResource(l,t){let m=this.stronghold.laws.todaysExports+Number(t)*this.unitWeightMod[l];this.stronghold.resources[l]-=Number(t),this.stronghold.laws.todaysExports=m,this.addToTreasury({changeby:Number(t)*this.sellTable[l],record:"Sell "+t+" "+l})},addAnimal(){this.stronghold.animals.push(O({id:Date.now()+Math.random()},this.newanimal)),this.newanimal={name:"",livesat:"stables",species:"",foodcost:0}},removeAnimal(l){this.stronghold.animals.splice(this.stronghold.animals.indexOf(l),1)},addResource(l,t){this.stronghold.resources[l]+=Number(t)},addVassal(){Array.isArray(this.stronghold.vassals)||(this.stronghold.vassals=[]),this.stronghold.vassals.push({id:Date.now()+Math.random(),name:"",income:0})}}};const h=l=>(z("data-v-458742bc"),l=l(),X(),l),xn={class:"col-sm-12 strongholdbuilder"},eo={class:"row"},lo={class:"col-sm-7"},to=h(()=>e("h4",null,"Current Treasury",-1)),no=h(()=>e("h6",null,"Gold Transactions",-1)),oo={class:"btn-group"},so=h(()=>e("br",null,null,-1)),ao={class:"table table-striped"},ro=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Amount"),e("th",null,"Description"),e("th",null,"Balance")])],-1)),io={class:"table table-striped"},uo=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Resource"),e("th",null,"On Hand"),e("th",null,"Sell"),e("th",null,"Buy"),e("th",null,"Pop Needs"),e("th",null,"Your Production"),e("th",null,"Private Production"),e("th",null,"Daily Sell/Buy"),e("th",null,"Change By"),e("th",null,"Actions")])],-1)),ho=["onUpdate:modelValue","min"],mo=["onUpdate:modelValue"],po={class:"btn-group"},co=["onClick"],go=["onClick"],bo=["onClick"],fo={class:"col-sm-2"},vo=h(()=>e("h4",null,"Revenue",-1)),yo=h(()=>e("br",null,null,-1)),wo=h(()=>e("br",null,null,-1)),_o=h(()=>e("br",null,null,-1)),$o=h(()=>e("br",null,null,-1)),ko=h(()=>e("br",null,null,-1)),So=h(()=>e("br",null,null,-1)),To=h(()=>e("br",null,null,-1)),Co=h(()=>e("br",null,null,-1)),Ro=h(()=>e("br",null,null,-1)),Ao=h(()=>e("h4",null,"Expenses",-1)),Lo=h(()=>e("br",null,null,-1)),No=h(()=>e("br",null,null,-1)),Mo=h(()=>e("br",null,null,-1)),Io=h(()=>e("h4",null,"Storage",-1)),Uo=h(()=>e("br",null,null,-1)),Vo={class:"col-sm-3"},Do=h(()=>e("h4",null,"Taxes",-1)),Po=h(()=>e("p",null," Collecting taxes requires a steward to be employed. Further, tax efficiency is determined by the rule of law in your demense, which is increased by hiring constables and guards. The higher the population, the more constables and guards you need. Constables require a constables office to do their job effectively, but are much more efficient at enforcing taxes and handling petty crime than guards. For maximum tax efficiency you need at least 1 guard for every 100 people or at least 1 constable for every 500 people, combined. So if you have a population of 600, you would have maximum tax efficiency with 2 constables, 1 constable and 1 guard, or 6 guards. ",-1)),Eo=h(()=>e("br",null,null,-1)),Fo=h(()=>e("br",null,null,-1)),Bo=h(()=>e("br",null,null,-1)),Ho=h(()=>e("br",null,null,-1)),jo=h(()=>e("h4",null,"Other Laws",-1)),Go=["max"],Oo=h(()=>e("br",null,null,-1)),Yo={class:"row"},qo={class:"col-sm-3"},Wo={class:"col-sm-3"},zo={class:"col-sm-3"},Xo=h(()=>e("option",{value:"homeless"},"Homeless",-1)),Jo=h(()=>e("option",{value:"stable"},"Stable",-1)),Ko=h(()=>e("option",{value:"animal-sanctuary"},"Animal Sanctuary",-1)),Qo=h(()=>e("option",{value:"ayrie"},"Ayrie",-1)),Zo=[Xo,Jo,Ko,Qo],xo={class:"col-sm-2"},es={class:"col-sm-1"},ls={class:"row"},ts={class:"col-sm-12"},ns=h(()=>e("h4",null,"Homeless",-1)),os={class:"table table-sm table-striped"},ss=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Species"),e("th",null,"Food Cost"),e("th",null,"Delete")])],-1)),as=["onClick"],rs={class:"row"},ds={class:"col-sm-12"},is=h(()=>e("h4",null,"Stables",-1)),us={class:"table table-sm table-striped"},hs=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Species"),e("th",null,"Food Cost"),e("th",null,"Delete")])],-1)),ms=["onClick"],ps={class:"row"},cs={class:"col-sm-12"},gs=h(()=>e("h4",null,"Animal Sanctuary",-1)),bs={class:"table table-sm table-striped"},fs=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Species"),e("th",null,"Food Cost"),e("th",null,"Delete")])],-1)),vs=["onClick"],ys={class:"row"},ws={class:"col-sm-12"},_s=h(()=>e("h4",null,"Ayrie",-1)),$s={class:"table table-sm table-striped"},ks=h(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Species"),e("th",null,"Food Cost"),e("th",null,"Delete")])],-1)),Ss=["onClick"],Ts=h(()=>e("div",{class:"row"},[e("div",{class:"col-sm-12"},[e("h4",null,"Typical Food Costs by Diet and Size (in units of food)"),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Size"),e("th",null,"Diet"),e("th",null,"Typical Food Cost")])]),e("tbody",null,[e("tr",null,[e("td",null,"Tiny"),e("td",null,"Any"),e("td",null,"0.05")]),e("tr",null,[e("td",null,"Small"),e("td",null,"Herbivore/Frugivore"),e("td",null,"0.1")]),e("tr",null,[e("td",null,"Small"),e("td",null,"Omnivore/Carnivore"),e("td",null,"0.5")]),e("tr",null,[e("td",null,"Medium"),e("td",null,"Herbivore"),e("td",null,"0.25")]),e("tr",null,[e("td",null,"Medium"),e("td",null,"Frugivore"),e("td",null,"0.5")]),e("tr",null,[e("td",null,"Medium"),e("td",null,"Omnivore/Carnivore"),e("td",null,"1")]),e("tr",null,[e("td",null,"Large"),e("td",null,"Herbivore"),e("td",null,"1")]),e("tr",null,[e("td",null,"Large"),e("td",null,"Frugivore"),e("td",null,"2")]),e("tr",null,[e("td",null,"Large"),e("td",null,"Omnivore/Carnivore"),a(" 4 ")]),e("tr",null,[e("td",null,"Huge"),e("td",null,"Herbivore"),e("td",null,"4")]),e("tr",null,[e("td",null,"Huge"),e("td",null,"Frugivore"),e("td",null,"8")]),e("tr",null,[e("td",null,"Huge"),e("td",null,"Omnivore/Carnivore"),e("td",null,"16")])])]),e("h4",null,"Multipliers for Other Traits"),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Trait"),e("th",null,"Multiplier")])]),e("tbody",null,[e("tr",null,[e("td",null,"Flying Speed"),e("td",null,"2")]),e("tr",null,[e("td",null,"Monstrous Type"),e("td",null,"2")]),e("tr",null,[e("td",null,"Size Greater than Huge"),e("td",null,"4")])])])])],-1)),Cs={class:"row"},Rs={class:"col-sm-4"},As=["onClick"],Ls={class:"col-sm-4"},Ns=h(()=>e("h4",null,"Private Staff",-1)),Ms={class:"col-sm-4"},Is=h(()=>e("h4",null,"Vassals",-1)),Us={class:"table table-striped"},Vs=h(()=>e("tr",null,[e("th",null,"Name"),e("th",null,"Income")],-1)),Ds=["onUpdate:modelValue"],Ps=["onUpdate:modelValue"],Es={class:"btn-group"},Fs=h(()=>e("p",null,"Roll 2d100 + Unrest and consult the table below.",-1)),Bs=h(()=>e("table",{style:{}},[e("thead",null,[e("tr",null,[e("th",null,"Roll"),e("th",null,"Event")])]),e("tbody",null,[e("tr",null,[e("td",null,"2"),e("td",null," Roll twice more and use both results. This event can stack. ")]),e("tr",null,[e("td",null,"3"),e("td",null," Your people, grateful for your kind rule, give you gifts worth d20 * 50 gp ")]),e("tr",null,[e("td",null,"4"),e("td",null," A wandering mercenary arrives in town looking for work. (Fighter level = 2d4 + 1, max of the player level) ")]),e("tr",null,[e("td",null,"5"),e("td",null," A wandering cleric arrives in town looking for work. (Cleric level = 2d4 + 1, max of the player level) ")]),e("tr",null,[e("td",null,"6"),e("td",null," 8d8 (2d8 children, 6d8 adults) colonists arrive unexpectedly from one of the Alliance nations (roll randomly), hoping for a place to settle. They bring enough materials and money to build 3 houses and a large farm. ")]),e("tr",null,[e("td",null,"7-10"),e("td",null," A wealthy family moves into town, building a manor house and a new random business (private enterprises). ")]),e("tr",null,[e("td",null,"11"),e("td",null," 5d6 Kobold prospectors show up at your keep shouting about how they have discovered gold or a rare metal! They offer to mine it for you in exchange for the rights to live in town. (Build a Gold Mine). ")]),e("tr",null,[e("td",null,"12"),e("td",null," 5d6 Kobold prospectors show up at your keep shouting about how they have discovered iron or coal! They offer to mine it for you in exchange for the rights to live in town. (Build an Iron Mine or Coal Mine). ")]),e("tr",null,[e("td",null,"13-14"),e("td",null," A wandering prospector arrives and excitedly proclaims that he has found valuable minerals on your land (1d100, 1-5 rare metal, 6-15 gold, 16-50 coal, 51-90 coal, 91-100, something bad). ")]),e("tr",null,[e("td",null,"15-18"),e("td",null," A traveling circus comes to town. ")]),e("tr",null,[e("td",null,"19"),e("td",null," You find a cache of money in an unexpected place. Roll 2d100 and gain that much gold. ")]),e("tr",null,[e("td",null,"20-23"),e("td",null," A large group of people moves into town, with enough money to build their own houses. Add 3d6 adults and 1d6 children to the population, and 3 houses (private enterprise) ")]),e("tr",null,[e("td",null,"24-27"),e("td",null,"A family moves into town. (2 adults, 1d6-1 children)")]),e("tr",null,[e("td",null,"28-31"),e("td",null," Workers are particularly productive. Increase revenue by 25% today. ")]),e("tr",null,[e("td",null,"32"),e("td",null,"Your miners stumble on a cache of buried treasure.")]),e("tr",null,[e("td",null,"33-40"),e("td",null," A merchant arrives in town offering special wares, including a selection of magic items. ")]),e("tr",null,[e("td",null,"41-47"),e("td",null,"A middle class family moves to town and builds a house.")]),e("tr",null,[e("td",null,"48"),e("td",null," Your workers discover an old shed in the woods, filled with booze. Gain 100 alcohol. ")]),e("tr",null,[e("td",null,"49-50"),e("td",null," A wandering cleric comes through town and heals 3d4 people before moving on. ")]),e("tr",null,[e("td",null,"51-54"),e("td",null," An invitation from a neighboring Lord arrives to join them for a feast. ")]),e("tr",null,[e("td",null,"55"),e("td",null," A wandering druid casts Plant Growth on one of your farms, doubling its yield for the day. ")]),e("tr",null,[e("td",null,"56-57"),e("td",null,"Mercenaries arrive in town and offer their services.")]),e("tr",null,[e("td",null,"58"),e("td",null," An Artificer arrives in town offering to sell a device he has invented. ")]),e("tr",null,[e("td",null,"59-61"),e("td",null,"A rare animal is spotted in the woods.")]),e("tr",null,[e("td",null,"62"),e("td",null," One of the townspeople is convinced a family member is a doppleganger. ")]),e("tr",null,[e("td",null,"63"),e("td",null," A pair of mages arrive in town separately, begin dueling in the town square, the residents are terrified. ")]),e("tr",null,[e("td",null,"64"),e("td",null," A mysterious stranger arrives in town selling cursed items to townsfolk. ")]),e("tr",null,[e("td",null,"65"),e("td",null," One of the townsfolk finds a treasure map in the attic left behind by his recently deceased grandfather. ")]),e("tr",null,[e("td",null,"66-68"),e("td",null," An adventurer arrives in town with tales of a lost treasure. His companions fell trying to claim it. ")]),e("tr",null,[e("td",null,"69"),e("td",null,"A friendly dragon lands in the center of town.")]),e("tr",null,[e("td",null,"70"),e("td",null," A wandering duelist comes to town and challenges one of the players to a duel of honor (to the blood, not the death) ")]),e("tr",null,[e("td",null,"71-76"),e("td",null,"1d6 sick people recover naturally.")]),e("tr",null,[e("td",null,"77"),e("td",null," A worker is injured in an accident (1 adult becomes sick). ")]),e("tr",null,[e("td",null,"78-84"),e("td",null," If number of homeless people is greater than 0, your people build a house (private enterprise), otherwise nothing happens. ")]),e("tr",null,[e("td",null,"85-89"),e("td",null," If number of available staff beds is less than 3, your people build a staff house (private enterprise), otherwise nothing happens. ")]),e("tr",null,[e("td",null,"90-94"),e("td",null," If number of homeless people is greater than 0, your people build a log cabin (private enterprise), otherwise nothing happens. ")]),e("tr",null,[e("td",null,"95-105"),e("td",null,"Nothing interesting happens.")]),e("tr",null,[e("td",null,"106"),e("td",null," A Tax Collector from a ruler arrives and demands a tax payment of d20 * 25 gp ")]),e("tr",null,[e("td",null,"107"),e("td",null," A Tax Collector from a ruler arrives and demands a tax payment of d20 * 50 gp ")]),e("tr",null,[e("td",null,"108-109"),e("td",null," 5d4 (1d4 children, 1d4 adults, 2d4 sick, 1d4 elderly) Refugees arrive at your town begging for a place to live. ")]),e("tr",null,[e("td",null,"110-111"),e("td",null," 5d6 (1d6 children, 1d6 adults, 2d6 sick, 1d6 elderly) Refugees arrive at your town begging for a place to live. ")]),e("tr",null,[e("td",null,"112-113"),e("td",null," 5d8 (1d8 children, 1d8 adults, 2d8 sick, 1d8 elderly) Refugees arrive at your town begging for a place to live. ")]),e("tr",null,[e("td",null,"114-115"),e("td",null," 10d4 (2d4 children, 2d4 adults, 4d4 sick, 2d4 elderly) Refugees arrive at your town begging for a place to live. ")]),e("tr",null,[e("td",null,"116-117"),e("td",null," 10d6 (2d6 children, 2d6 adults, 4d6 sick, 2d6 elderly) Refugees arrive at your town begging for a place to live. ")]),e("tr",null,[e("td",null,"118-119"),e("td",null," 10d8 (2d8 children, 2d8 adults, 4d8 sick, 2d8 elderly) Refugees arrive at your town begging for a place to live. ")]),e("tr",null,[e("td",null,"120-122"),e("td",null," Exceptionally beautiful weather has left the townsfolk in a good mood, reduce the effect of unrest on your next roll by 2. ")]),e("tr",null,[e("td",null,"123-125"),e("td",null," Your construction workers have been unusually productive, any buildings you actively have under construction progress an extra 10 worker-days towards completion. ")]),e("tr",null,[e("td",null,"126-129"),e("td",null," A lost but apparently domesticated animal wanders into town. ")]),e("tr",null,[e("td",null,"130-133"),e("td",null,"A traveling bard passes through town.")]),e("tr",null,[e("td",null,"134-137"),e("td",null," A wandering cleric passes through town and gives a sermon in town. ")]),e("tr",null,[e("td",null,"138-139"),e("td",null," A wandering wizard comes through town looking for work and a place to study. ")]),e("tr",null,[e("td",null,"140-142"),e("td",null,"A skilled fighter wanders through town.")]),e("tr",null,[e("td",null,"143"),e("td",null," A creepy looking mage wanders into town. He says he means no harm, but the people find him unsettling. ")]),e("tr",null,[e("td",null,"144-146"),e("td",null," An ill omen appears, unsettling the townsfolk. The effect of unrest on your next roll is increased by 2. ")]),e("tr",null,[e("td",null,"147"),e("td",null," A wandering group of barbarians attacks and demands tribute from the town. ")]),e("tr",null,[e("td",null,"148"),e("td",null," A townsperson made a deal with a hag that they regret, they will give anything to have it undone. ")]),e("tr",null,[e("td",null,"149-150"),e("td",null,"River pirates attack the town.")]),e("tr",null,[e("td",null,"151"),e("td",null," A necromancer has raided the town graveyard and loosed his creations on the town. ")]),e("tr",null,[e("td",null,"152"),e("td",null," A random magical occurance causes an abberation to appear in the middle of town and start causing havoc. ")]),e("tr",null,[e("td",null,"153"),e("td",null," A leak springs in the roof of the keep, right above one of your beds. Roll to determine which party member has a bad nights sleep. ")]),e("tr",null,[e("td",null,"154-156"),e("td",null," A sudden illness kills some of your livestock, lose 2d20 food. ")]),e("tr",null,[e("td",null,"157-160"),e("td",null," A large storm causes damage to some buildings. It will cost 2d100 gp for repairs. ")]),e("tr",null,[e("td",null,"161"),e("td",null," A person falls out of the sky, splattering on the ground. No one saw what happened. ")]),e("tr",null,[e("td",null,"162-163"),e("td",null," Apparently its a local holiday, all the shops in town are closed. ")]),e("tr",null,[e("td",null,"164"),e("td",null," Some of the children have gone missing. The parents beg you to help them. ")]),e("tr",null,[e("td",null,"165-166"),e("td",null," Your construction workers are delayed by an accident, any buildings you actively have under construction cannot make any progress today. ")]),e("tr",null,[e("td",null,"167"),e("td",null," Some nearby fey folk are causing trouble for the towns lumberjacks. ")]),e("tr",null,[e("td",null,"168-169"),e("td",null," Slave hunters arrive claiming some of your townsfolk are escaped slaves. They are beligerent and insistent. ")]),e("tr",null,[e("td",null,"170"),e("td",null," There is a murder in town! The people beg the players to investigate. ")]),e("tr",null,[e("td",null,"171"),e("td",null," A wolf pack has killed some sheep on a farm you own. Lose 100 food, and it has a 25% chance of happening again each day until the wolves are found and dealt with. ")]),e("tr",null,[e("td",null,"172"),e("td",null,"People die in a tragic accident, 1d6 people die.")]),e("tr",null,[e("td",null,"173-177"),e("td",null," There is a Monster lurking near town (roll randomly to determine type). ")]),e("tr",null,[e("td",null,"178"),e("td",null," A large group of townspeople have joined a suspicious cult, your steward is concerned. ")]),e("tr",null,[e("td",null,"179"),e("td",null," A large group of townspeople have converted to a new religion. ")]),e("tr",null,[e("td",null,"180"),e("td",null,"Flooding in town causes damage to several buildings.")]),e("tr",null,[e("td",null,"181"),e("td",null," Some of your people are convinced by wandering adventurers to join their quest. 1d4 adults leave town. ")]),e("tr",null,[e("td",null,"182-184"),e("td",null," Plague sweeps into town, sickening 2d6 people per day until it is dealt with. ")]),e("tr",null,[e("td",null,"185-186"),e("td",null," Robbery! Robbers break into the keep in the night and attempt to make off with any stored gold. ")]),e("tr",null,[e("td",null,"187"),e("td",null," A chromatic dragon demands tribute or it will burn the town. ")]),e("tr",null,[e("td",null,"188"),e("td",null," A townsperson has gone mysteriously missing. ")]),e("tr",null,[e("td",null,"189-190"),e("td",null," The townspeople deliver a petition demanding lower taxes or improved working conditions. ")]),e("tr",null,[e("td",null,"191-192"),e("td",null," Protestors demand action from the lords to deal with the towns problems, picketing outside their homes. Unrest increases by 1 each day until they are dealt with. ")]),e("tr",null,[e("td",null,"193-194"),e("td",null," Arsonists set fire to a building you own in town, severely damaging it. Roll 1d10, on a 1, the building is destroyed. Otherwise multiply the result by 100 to determine the cost (in gp) to repair it. ")]),e("tr",null,[e("td",null,"195"),e("td",null," Rivals have convinced a number of townspeople to betray you, opening the gates for them to attack in the night! ")]),e("tr",null,[e("td",null,"196-199"),e("td",null," People leave your town. 4d6 people (1d6 children and 3d6 adults) leave town to find a new home. ")]),e("tr",null,[e("td",null,"200"),e("td",null," Roll twice more and use both results. This event can stack. ")]),e("tr",null,[e("td",null,"201-202"),e("td",null," One of the loyalists in town is attacked by a mob and killed. ")]),e("tr",null,[e("td",null,"203-205"),e("td",null,"Revolutionaries attack and attempt to take the town!")]),e("tr",null,[e("td",null,"206-207"),e("td",null," Work strike happens. 50% of yesterdays income lost. Will continue until demands are met or otherwise dealt with. ")]),e("tr",null,[e("td",null,"208-210"),e("td",null," Revolt. The people in your village are taking up arms to attack you! ")]),e("tr",null,[e("td",null,"211-213"),e("td",null," Drug problems are sweeping through town causing working adults to become sick. 1d6 people each day become sick until it is dealt with. ")]),e("tr",null,[e("td",null,"214-215"),e("td",null," Starving people have begun to grow sick, 2d6 adults become invalids ")]),e("tr",null,[e("td",null,"216-218"),e("td",null," An Assassin strikes in the night attempting to kill one of the players or a member of their staff. ")]),e("tr",null,[e("td",null,"219"),e("td",null," A lycanthrope has bitten some people in your town. If not dealt with, it is likely to spread. ")]),e("tr",null,[e("td",null,"220"),e("td",null," Arsonists strike in the night burning down a random building. The cost to rebuild depends on the building and the effectiveness of the response. ")]),e("tr",null,[e("td",null,"221-222"),e("td",null," Petty criminals plague the town, robbing houses and picking pockets. Tax revenues are reduced by 25% until they are dealt with, and things in storage may randomly disappear. ")]),e("tr",null,[e("td",null,"223-224"),e("td",null," Starving people have raided your storehouses, stealing all of your stored food. ")]),e("tr",null,[e("td",null,"225+"),e("td",null," Revolt. The people in your village are taking up arms to attack you! ")])])],-1)),Hs=h(()=>e("h2",null,"Actions",-1)),js=h(()=>e("p",null," This is not a final and complete list. Players are encouraged to think creatively about what to do with their time. ",-1)),Gs=h(()=>e("table",{class:"table table-striped"},[e("tbody",null,[e("tr",null,[e("th",null,"Action"),e("th",null,"Cost"),e("th",null,"Time")]),e("tr",null,[e("td",null," Recruit Colonists from the Homeland (1d6 kids, 2d6 adults). "),e("td",null,"100 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Get local refugees to join the town. (1d6 kids, 1d6 adults, 1d6 invalids) "),e("td",null,"10 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Recruit skilled worker from the population. Requires an investigation check for success. DC = 10 + base salary "),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Encourage people to leave town (1d6 kids, 2d6 adults)."),e("td",null,"50-unrest gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Recruit skilled worker from out of town."),e("td",null,"5 * typical salary signing bonus"),e("td",null,"2 days")]),e("tr",null,[e("td",null," Hold a Feast (roll a DC 12 Persuasion check). Success reduces effect of unrest on next 7 random event rolls by half. "),e("td",null,"100 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Patrol the area. Who knows what could happen?"),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Send an emissary to another Lord"),e("td",null,"20 gp"),e("td",null,"1/2 day")]),e("tr",null,[e("td",null," Hire Prospector to Search for Minerals. Roll 1d100, 1-10 something bad happens. 11-50, they find nothing. 51-75, they find coal. 76-95, you find iron. 96-99, you find gold (or silver). 100 you find a rare metal, roll a 1d3, on 1 it is Orichalcum, on a 2 it is Adamantium, on a 3 it is Mithril. "),e("td",null,"200 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Hire druids/clerics to tend to the sick. Heal 2d6 sick people in town. "),e("td",null,"200 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Search for rare medicinal herbs in the woods. (roll a DC 20 Nature check). On a success you find enough herbs to heal 1d6 sick people. "),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Seek guidance from a God via omens or prayer. Roll a DC 12 religion check. On a success gain advantage on two skill checks of your choice in the next day. If you fail by five or more, get disadvantage instead on a check of the DMs choice. "),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Hire spies to dig up information on another Lord. The DM will roll an investigation check in secret on the spies behalf, depending on the result you may or may not get useful information. Spy returns after enough time to travel to the Lord's home and back has passed. "),e("td",null,"200 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Go Hunting. Roll a survival check. Result determines how much is gained. 1-9: 1 unit of food (caught a rabbit, found some berries). 10-14: 2-5 units of food. 15-20: 10 units of food and 1 leather (a deer). 21+: 20 units of food and 2 leather. "),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Research a topic. Make a relevant knowledge check, result determines how much information is discovered. DC determined by DM. "),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null," Aid Construction Efforts. Requires a Carpenters Tools check (if the building is mostly wood) or Mason's tools check if it is mostly stone. DC 5: Reduce labor-days required by 1. DC 10: Reduce labor-days required by 2. DC 15+: Reduce labor days required by 3 + the amount over 15. This also reduces the total material costs of the building as a result. "),e("td",null,"0 gp"),e("td",null,"1 day")]),e("tr",null,[e("td",null,"Hold Court"),e("td",null,"0 gp"),e("td",null," Roll a random event roll. The second roll may have limited effect. ")]),e("tr",null,[e("td",null,"Calm the People"),e("td",null,"0 gp"),e("td",null," Spend your day with the people of the town helping to calm them and make your presence known. Make a DC 20 Persuasion check, reducing the effect of unrest on he next random event roll by 2. ")])])],-1)),Os=h(()=>e("option",{value:0},"Supernatural Desert (0 rain)",-1)),Ys=h(()=>e("option",{value:5},"Desert (1-10 inches rain)",-1)),qs=h(()=>e("option",{value:17},"Dry Grassland (11-25 inches rain)",-1)),Ws=h(()=>e("option",{value:33}," Grassland or Savannah (26-40 inches rain) ",-1)),zs=h(()=>e("option",{value:48},"Forest (41-55 inches rain)",-1)),Xs=h(()=>e("option",{value:65}," Wet Forest, Marsh or Swamp (56-80 inches rain) ",-1)),Js=h(()=>e("option",{value:100},"Rainforest (80+ inches rain)",-1)),Ks=[Os,Ys,qs,Ws,zs,Xs,Js],Qs=h(()=>e("p",null,"\xA0",-1)),Zs=h(()=>e("p",null,"\xA0",-1));function xs(l,t,m,y,_,f){const o=E("stronghold-summary"),u=E("general-information"),r=E("b-tab"),v=E("improvements"),w=E("staff"),L=E("b-modal"),I=E("b-tabs");return d(),i("div",xn,[N(o),N(I,null,{default:V(()=>[N(r,{title:"General Information"},{default:V(()=>[N(u)]),_:1}),N(r,{title:"Improvements"},{default:V(()=>[N(v)]),_:1}),N(r,{title:"Staff"},{default:V(()=>[N(w)]),_:1}),N(r,{title:"Budget"},{default:V(()=>[e("div",eo,[e("div",lo,[to,no,e("p",null,[p(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>l.changeby=s),class:"form-control",style:{width:"15%",display:"inline"}},null,512),[[g,l.changeby]]),a(" \xA0\xA0 "),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.record=s),type:"text",class:"form-control",placeholder:"transaction record",style:{width:"70%",display:"inline"}},null,512),[[g,l.record]])]),e("div",oo,[e("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=s=>l.addToTreasury({changeby:l.changeby,record:l.record}))}," Add to Treasury "),e("button",{class:"btn btn-success",onClick:t[3]||(t[3]=s=>l.showTransactionRecord=!0)}," Transaction Record ")]),so,N(L,{modelValue:l.showTransactionRecord,"onUpdate:modelValue":t[4]||(t[4]=s=>l.showTransactionRecord=s),title:"Transaction Record"},{default:V(()=>[e("table",ao,[ro,e("tbody",null,[(d(!0),i(k,null,S(l.reverseTransactions,s=>(d(),i("tr",{key:s.id},[e("td",null,n(s.amount),1),e("td",null,n(s.description),1),e("td",null,n(s.balance),1),e("td",null,n(s.date),1)]))),128))])])]),_:1},8,["modelValue"]),e("table",io,[uo,e("tbody",null,[(d(!0),i(k,null,S(l.stronghold.resources,(s,c)=>(d(),i("tr",{key:c},[e("th",null,n(c),1),e("td",null,n(s),1),e("td",null,[e("span",null,n(l.sellTable[c]),1)]),e("td",null,[e("span",null,n(l.buyTable[c]),1)]),e("td",null,[e("span",null,n(l.popNeeds[c]),1)]),e("td",null,[e("span",null,n(l.calcGrossRevenue[c]),1)]),e("td",null,[e("span",null,n(l.privateProduced[c]),1)]),e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":M=>l.stronghold.autoSell[c]=M,class:"form-control",style:{width:"75px"},min:-l.stronghold.resources[c]},null,8,ho),[[g,l.stronghold.autoSell[c]]])]),e("td",null,[p(e("input",{type:"number",class:"form-control",style:{width:"75px",display:"inline"},min:"0","onUpdate:modelValue":M=>l.resourceChange[c]=M},null,8,mo),[[g,l.resourceChange[c]]])]),e("td",null,[e("div",po,[e("button",{class:"btn btn-primary",onClick:M=>l.sellResource(c,l.resourceChange[c])}," Sell ",8,co),e("button",{class:"btn btn-primary",onClick:M=>l.buyResource({type:c,amount:l.resourceChange[c]})}," Buy ",8,go),e("button",{class:"btn btn-primary",onClick:M=>l.addResource(c,l.resourceChange[c])}," Add ",8,bo)])])]))),128))])])]),e("div",fo,[vo,a(" Total Revenue: "+n(l.grossRevenue),1),yo,a(" Direct Income: "+n(l.improvementRevenue),1),wo,a(" Resource Sales: "+n(l.resourceRevenue),1),_o,a(" Total Tax Revenue: "+n(l.taxRevenue),1),$o,a(" Income Tax Revenue: "+n(l.incomeTax),1),ko,a(" Head Tax Revenue: "+n(l.headTax),1),So,a(" Property Tax Revenue: "+n(l.propertyTax),1),To,a(" Vassal Tax Revenue: "+n(l.vassalTax),1),Co,a(" Rents Revenue: "+n(l.rents),1),Ro,a(" Bank Revenue: "+n(l.bankRevenue)+" ",1),Ao,a(" Total Expenses: "+n(l.expenses),1),Lo,a(" Employee Salaries: "+n(l.totalSalary),1),No,a(" Building Maintenance: "+n(l.buildingMaintenance),1),Mo,a(" Resource Purchases: "+n(l.resourceCost)+" ",1),Io,a(" Current Stored Goods: "+n(l.usedStorage),1),Uo,a(" Total Storage Space: "+n(l.totalStorage),1)]),e("div",Vo,[Do,Po,e("p",null,[a(" Current Tax Efficiency: "),e("strong",null,n(l.taxEfficiency*100)+"%",1)]),p(e("input",{type:"number",class:"form-control",min:"0",max:"0.5",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[5]||(t[5]=s=>l.stronghold.laws.headTaxRate=s),step:"0.1",title:"Head taxes are a flat tax on every person living on your land, these taxes are common, but are considered oppressive by the populace, particularly the poor or unemployed, who may not have the ability to pay."},null,512),[[g,l.stronghold.laws.headTaxRate]]),a(" Head Tax Rate (gp / person) "),Eo,p(e("input",{type:"number",class:"form-control",min:"0",max:"100",step:"1",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[6]||(t[6]=s=>l.stronghold.laws.incomeTaxRate=s),title:"income taxes tax a percentage of the populations income, low income taxes are easily tolerated, but higher than 10% or so and people start to feel upset"},null,512),[[g,l.stronghold.laws.incomeTaxRate]]),a(" Income Tax Rate (%) "),Fo,p(e("input",{type:"number",class:"form-control",min:"0",max:"1",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[7]||(t[7]=s=>l.stronghold.laws.propertyTaxRate=s),step:"0.1",title:"property taxes return a portion of the value of private property built on your land. The daily assessment cannot exceed 1% or property owners will simply sell out and leave."},null,512),[[g,l.stronghold.laws.propertyTaxRate]]),a(" Property Tax Rate (%) "),Bo,p(e("input",{type:"number",class:"form-control",min:"0",max:"0.5",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[8]||(t[8]=s=>l.stronghold.laws.rentRate=s),step:"0.01",title:"rents on public owned housing."},null,512),[[g,l.stronghold.laws.rentRate]]),a(" Daily Rent for Laborers (Middle Class housing pays 5 times this amount) "),Ho,p(e("input",{type:"number",class:"form-control",min:"0",max:"50",style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[9]||(t[9]=s=>l.stronghold.laws.vassalTaxRate=s),step:"1",title:"vassal taxes enforce taxes on your vassals. Enforcing vassal taxes requires hiring a tax collector. Additionally, vassal tax rates above 10% increase the amount of vassal unrest by the amount above 10%"},null,512),[[g,l.stronghold.laws.vassalTaxRate]]),a(" Vassal Tax Rate (%) "),jo,p(e("input",{type:"number",class:"form-control",min:"0",max:l.stronghold.resources.food,style:{"max-width":"75px",display:"inline"},"onUpdate:modelValue":t[10]||(t[10]=s=>l.stronghold.laws.foodSubsidies=s),step:"1",title:"Food subsidies are expensive, but reduce unrest."},null,8,Go),[[g,l.stronghold.laws.foodSubsidies]]),a(" Food Subsidies (person days of food) "),Oo,p(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=s=>l.stronghold.laws.conscription=s),title:"conscription involves forcing people to work as soldiers. It enables you to make any portion of your population guards, and reduces the cost of guards to the cost of laborers. However, your unrest will increase by the percentage of your population that is guards."},null,512),[[j,l.stronghold.laws.conscription]]),a(" Conscription ")])])]),_:1}),N(r,{title:"Animals"},{default:V(()=>[e("div",Yo,[e("div",qo,[a(" Name "),p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=s=>l.newanimal.name=s)},null,512),[[g,l.newanimal.name]])]),e("div",Wo,[a(" Species "),p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=s=>l.newanimal.species=s)},null,512),[[g,l.newanimal.species]])]),e("div",zo,[a(" Lives At "),p(e("select",{class:"form-control","onUpdate:modelValue":t[14]||(t[14]=s=>l.newanimal.livesat=s)},Zo,512),[[Q,l.newanimal.livesat]])]),e("div",xo,[a(" Daily Food Cost "),p(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=s=>l.newanimal.foodcost=s),title:"see bottom of page for typical food costs by animal size and diet."},null,512),[[g,l.newanimal.foodcost]])]),e("div",es,[e("button",{onClick:t[16]||(t[16]=s=>l.addAnimal()),class:"btn btn-success",style:{"margin-top":"22px"}}," Add ")])]),e("div",ls,[e("div",ts,[ns,e("table",os,[ss,e("tbody",null,[(d(!0),i(k,null,S(l.homelessAnimals,s=>(d(),i("tr",{key:s.id},[e("td",null,n(s.name),1),e("td",null,n(s.species),1),e("td",null,n(s.foodcost*2)+" (base "+n(s.foodcost)+") ",1),e("td",null,[e("button",{class:"btn btn-danger",onClick:c=>l.removeAnimal(s)}," X ",8,as)])]))),128))])])])]),e("div",rs,[e("div",ds,[is,e("table",us,[hs,e("tbody",null,[(d(!0),i(k,null,S(l.stableAnimals,s=>(d(),i("tr",{key:s.id},[e("td",null,n(s.name),1),e("td",null,n(s.species),1),e("td",null,n(s.foodcost),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:c=>l.removeAnimal(s)}," X ",8,ms)])]))),128))])])])]),e("div",ps,[e("div",cs,[gs,e("table",bs,[fs,e("tbody",null,[(d(!0),i(k,null,S(l.sanctuaryAnimals,s=>(d(),i("tr",{key:s.id},[e("td",null,n(s.name),1),e("td",null,n(s.species),1),e("td",null,n(s.foodcost),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:c=>l.removeAnimal(s)}," X ",8,vs)])]))),128))])])])]),e("div",ys,[e("div",ws,[_s,e("table",$s,[ks,e("tbody",null,[(d(!0),i(k,null,S(l.ayrieAnimals,s=>(d(),i("tr",{key:s.id},[e("td",null,n(s.name),1),e("td",null,n(s.species),1),e("td",null,n(s.foodcost),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:c=>l.removeAnimal(s)}," X ",8,Ss)])]))),128))])])])]),Ts]),_:1}),N(r,{title:"Private Enterprises and Vassals"},{default:V(()=>[e("div",Cs,[e("div",Rs,[e("h4",null,n(l.stronghold.townName)+" Private Enterprises",1),(d(!0),i(k,null,S(l.stronghold.privateEnterprise,s=>(d(),i("div",{key:s.id},[e("h5",null,[a(n(s.name)+" x "+n(s.count)+" ",1),e("button",{onClick:c=>l.deletePrivateEnterprise(s),class:"btn btn-danger"}," X ",8,As)])]))),128))]),e("div",Ls,[Ns,e("p",null,[e("strong",null,"Laborers: "+n(l.privateLaborers),1)]),(d(!0),i(k,null,S(l.stronghold.privateEmployees,s=>(d(),i("p",{key:s.id},n(s.name),1))),128))]),e("div",Ms,[Is,e("table",Us,[Vs,(d(!0),i(k,null,S(l.stronghold.vassals,s=>(d(),i("tr",{key:s.id},[e("td",null,[p(e("input",{type:"text","onUpdate:modelValue":c=>s.name=c},null,8,Ds),[[g,s.name]])]),e("td",null,[p(e("input",{type:"number","onUpdate:modelValue":c=>s.income=c},null,8,Ps),[[g,s.income]])])]))),128))]),e("div",Es,[e("button",{onClick:t[17]||(t[17]=s=>l.addVassal()),class:"btn btn-sm btn-primary"}," + ")])])])]),_:1}),N(r,{title:"Random Events"},{default:V(()=>[Fs,Bs]),_:1}),N(r,{title:"Actions"},{default:V(()=>[Hs,js,Gs]),_:1}),N(r,{title:"Weather"},{default:V(()=>[e("p",null," Today's Weather: "+n(l.stronghold.currentTemperature)+" Degrees Farenheit. "+n(l.stronghold.rainString)+". Average Windspeed: "+n(l.stronghold.windSpeed),1),e("label",null,[a("Typical Yearly Rainfall: "),p(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>l.stronghold.laws.rainfall=s),class:"form-control"},Ks,512),[[Q,l.stronghold.laws.rainfall]])]),e("label",null,[a("Annual Mean Temperature (F): "),p(e("input",{type:"number",min:"-70",max:"120","onUpdate:modelValue":t[19]||(t[19]=s=>l.stronghold.laws.temperature=s)},null,512),[[g,l.stronghold.laws.temperature]])]),e("label",null,[a(" Continental (More than 200 miles from the coast): "),p(e("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=s=>l.stronghold.laws.continental=s)},null,512),[[j,l.stronghold.laws.continental]])]),e("label",null,[a("Lattitiude: "),p(e("input",{type:"number",min:"-90",max:"90","onUpdate:modelValue":t[21]||(t[21]=s=>l.stronghold.laws.lattitude=s)},null,512),[[g,l.stronghold.laws.lattitude]])])]),_:1})]),_:1}),Qs,Zs])}var na=q(Zn,[["render",xs],["__scopeId","data-v-458742bc"]]);export{na as default};
