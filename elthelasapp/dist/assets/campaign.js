var ae=Object.defineProperty,de=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var W=(t,o,m)=>o in t?ae(t,o,{enumerable:!0,configurable:!0,writable:!0,value:m}):t[o]=m,O=(t,o)=>{for(var m in o||(o={}))ue.call(o,m)&&W(t,m,o[m]);if(K)for(var m of K(o))ce.call(o,m)&&W(t,m,o[m]);return t},G=(t,o)=>de(t,re(o));import{f as N,_ as B,d as Q,e as he,b as me,a as Y}from"./index.js";import{H as D,o as i,c as a,f as e,k as u,t as r,g as c,l as p,v as y,F as A,j as E,n as H,I as T,J as I,d as J,h as w,i as g,w as $,C as Z,E as x,q as X,m as q,K as pe,p as ee}from"./vendor.js";var _e={setup(){const t=N(),{current:o,currentChapter:m}=D(t),{addChapter:b,addEncounterToChapter:C,loadChapter:k,moveEncounterUp:s,moveEncounterDown:l,moveChapterUp:n,moveChapterDown:M,deleteEncounter:_,deleteChapter:h,addSection:f,deleteSection:S,addEncounterToSection:L,deleteEncounterFromSection:d,moveEncounterUpInSection:V,moveEncounterDownInSection:z,moveEncounterFromSectionToSection:P,moveEncounterFromChapterToSection:R,moveSectionUp:F,moveSectionDown:j}=t;return{campaign:o,chapter:m,addChapter:b,addEncounter:C,loadChapter:k,moveEnUp:s,moveEnDown:l,moveChUp:n,moveChDown:M,deleteCampaignEncounter:_,deleteChapter:h,addSection:f,deleteSection:S,addEncounterToSection:L,deleteEncounterFromSection:d,moveEncounterUpInSection:V,moveEncounterDownInSection:z,moveEncounterFromSectionToSection:P,moveEncounterFromChapterToSection:R,moveSectionUp:F,moveSectionDown:j}},props:["buildmode","showChapters"],data:function(){return{comp:this,section2:{title:"Please Select a Section",id:0}}},methods:{loadEncounter(t){this.$parent.$parent.$parent.loadEncounter(t)}}};const ve={key:0,class:"col-sm-12"},be={class:"notes"},fe={key:0},ke={key:1,class:"row"},ge={class:"col-sm-6"},ye=u(" Campaign Title "),$e=u(),Ce={class:"col-sm-6"},Me={class:"row"},we={key:0,class:"col-sm-3"},Se={class:"sidenav nav flex-column nav-pill"},Ve=["onClick"],Ue=["onClick"],Te=["onClick"],Ae=["onClick"],Ee={key:0},Le={key:1,class:"row"},De={class:"col-sm-12"},Ie=u(" Chapter Title "),Be={key:0},He=["href"],Ne=["onClick"],ze=["onClick"],Pe=["onClick"],Re=["onClick"],Fe={class:"form-check"},je=["onUpdate:modelValue"],Oe=e("label",{class:"form-check-label"},"Complete",-1),Xe={class:"form-check"},Ke=["onUpdate:modelValue"],We=e("label",{class:"form-check-label"},"Hide",-1),Ge={key:0,style:{float:"right","max-width":"40%"}},Je=["src","alt"],qe=["innerHTML"],Qe=["innerHTML"],Ye=e("h4",null,"Session Notes",-1),Ze=["onUpdate:modelValue"],xe={key:1},et={class:"row"},tt={class:"col-sm-6"},ot=e("label",null,"Name",-1),st=["onClick"],nt=["onClick"],lt=["onClick"],it=["onUpdate:modelValue"],at={class:"col-sm-6"},dt=e("label",null,"Runner Link",-1),rt=["onUpdate:modelValue"],ut={class:"row"},ct={class:"col-sm-6"},ht=e("label",null,"Image URL",-1),mt=["onUpdate:modelValue"],pt={class:"col-sm-4"},_t=e("label",null,"Flags",-1),vt={class:"form-check"},bt=["onUpdate:modelValue"],ft=e("label",{class:"form-check-label"},"Random",-1),kt={class:"form-check"},gt=["onUpdate:modelValue"],yt=e("label",{class:"form-check-label"},"Complete",-1),$t={class:"row"},Ct={class:"col-sm-6"},Mt=e("label",null,"Encounter Text (markdown allowed)",-1),wt=["onUpdate:modelValue"],St=["innerHTML"],Vt=e("label",null,"Potential Treasure (markdown allowed)",-1),Ut=["onUpdate:modelValue"],Tt=["onClick"],At={key:0},Et=["onClick"],Lt=["onClick"],Dt=["onClick"],It={class:"form-check"},Bt=["onUpdate:modelValue"],Ht=e("label",{class:"form-check-label"},"Complete",-1),Nt={class:"form-check"},zt=["onUpdate:modelValue"],Pt=e("label",{class:"form-check-label"},"Hide",-1),Rt=["innerHTML"],Ft={key:1},jt={class:"row"},Ot={class:"col-sm-12"},Xt=e("label",null,"Title",-1),Kt=["onClick"],Wt=["onClick"],Gt=["onClick"],Jt=["onClick"],qt=["onUpdate:modelValue"],Qt={class:"form-check"},Yt=["onUpdate:modelValue"],Zt=e("label",{class:"form-check-label"},"Hide",-1),xt={key:0,class:"row"},eo={class:"col-sm-6"},to=e("label",null,"Section Description (markdown allowed)",-1),oo=["onUpdate:modelValue"],so=["innerHTML"],no={key:0},lo=["href"],io=["onClick"],ao=["onClick"],ro=["onClick"],uo=["onClick"],co={class:"form-check"},ho=["onUpdate:modelValue"],mo=e("label",{class:"form-check-label"},"Complete",-1),po={class:"form-check"},_o=["onUpdate:modelValue"],vo=e("label",{class:"form-check-label"},"Hide",-1),bo={key:0,style:{float:"right","max-width":"40%"}},fo=["src","alt"],ko=["innerHTML"],go=["innerHTML"],yo=e("h4",null,"Session Notes",-1),$o=["onUpdate:modelValue"],Co={key:1},Mo=e("hr",null,null,-1),wo={class:"row"},So={class:"col-sm-6"},Vo=e("label",null,"Name",-1),Uo=["onClick"],To=["onClick"],Ao=["onClick"],Eo=["onClick"],Lo=["onUpdate:modelValue"],Do={class:"col-sm-6"},Io=e("label",null,"Runner Link",-1),Bo=["onUpdate:modelValue"],Ho={class:"row"},No={class:"col-sm-6"},zo=e("label",null,"Image URL",-1),Po=["onUpdate:modelValue"],Ro={class:"col-sm-4"},Fo=e("label",null,"Flags",-1),jo={class:"form-check"},Oo=["onUpdate:modelValue"],Xo=e("label",{class:"form-check-label"},"Complete",-1),Ko={class:"row"},Wo={class:"col-sm-6"},Go=e("label",null,"Encounter Text (markdown allowed)",-1),Jo=["onUpdate:modelValue"],qo=["innerHTML"],Qo=e("label",null,"Potential Treasure (markdown allowed)",-1),Yo=["onUpdate:modelValue"],Zo=u(" Move to Section "),xo=["value"],es=["onClick"],ts=["onClick"],os={key:3,class:"row"},ss=e("hr",null,null,-1),ns={class:"btn-group"},ls=["onClick"],is={class:"row"},as=e("hr",null,null,-1),ds={class:"btn-group"};function rs(t,o,m,b,C,k){return i(),a("div",null,[t.campaign?(i(),a("div",ve,[e("div",be,[t.campaign.buildmode?c("",!0):(i(),a("h1",fe,[u(r(t.campaign.title)+" ",1),e("button",{onClick:o[0]||(o[0]=s=>t.campaign.buildmode=!0),class:"btn btn-primary"},"\u270E")])),t.campaign.buildmode?(i(),a("div",ke,[e("label",ge,[ye,p(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=s=>t.campaign.title=s),class:"form-control"},null,512),[[y,t.campaign.title]]),$e,e("button",{onClick:o[2]||(o[2]=s=>t.campaign.buildmode=!1),class:"btn btn-primary"},"Done")]),e("label",Ce,[u(" URI (campaign information will be reachable via https://elthelas.com/tools/campaigns/"+r(t.campaign.url)+" ",1),p(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>t.campaign.url=s),class:"form-control"},null,512),[[y,t.campaign.url]])])])):c("",!0),e("div",Me,[t.showChapters?(i(),a("div",we,[e("nav",Se,[(i(!0),a(A,null,E(t.campaign.chapters,(s,l)=>(i(),a("li",{class:"navitem",key:s.id},[e("a",{href:"#",onClick:n=>t.loadChapter(s)},"Chapter "+r(l)+": "+r(s.title),9,Ve),e("button",{onClick:n=>t.moveChUp(l)},"\u2191",8,Ue),e("button",{onClick:n=>t.moveChDown(l)},"\u2193",8,Te),e("button",{onClick:n=>t.deleteChapter(l)},"\u{1F5D1}",8,Ae)]))),128))]),e("button",{class:"btn btn-primary",onClick:o[4]||(o[4]=s=>t.addChapter()),style:{"margin-top":"12px"}},"Add Chapter")])):c("",!0),e("div",{class:H(t.showChapters?"col-sm-9":"col-sm-12")},[t.chapter.buildmode?c("",!0):(i(),a("h2",Ee,[u(r(t.chapter.title)+" ",1),e("button",{onClick:o[5]||(o[5]=s=>t.chapter.buildmode=!0),class:"btn btn-primary"},"\u270E")])),t.chapter.buildmode?(i(),a("div",Le,[e("label",De,[Ie,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=s=>t.chapter.title=s)},null,512),[[y,t.chapter.title]])]),e("button",{onClick:o[7]||(o[7]=s=>t.chapter.buildmode=!1),class:"btn btn-primary"},"Done")])):c("",!0),(i(!0),a(A,null,E(t.chapter.encounters,(s,l)=>(i(),a("div",{key:s.id,class:H(s.complete?"complete":"")},[s.buildmode?c("",!0):(i(),a("div",Be,[e("h3",null,[e("a",{href:s.link,target:"_blank"},r(s.name),9,He),e("button",{onClick:n=>t.moveEnUp(l)},"\u2191",8,Ne),e("button",{onClick:n=>t.moveEnDown(l)},"\u2193",8,ze),e("button",{onClick:n=>t.loadEncounter(s.link),class:"btn btn-success"},"Run in Tab",8,Pe)]),e("button",{class:"btn btn-primary",onClick:n=>{s.buildmode=!0}},"\u270E",8,Re),e("div",Fe,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":n=>s.complete=n},null,8,je),[[T,s.complete]]),Oe]),e("div",Xe,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":n=>s.closed=n},null,8,Ke),[[T,s.closed]]),We]),s.image&&!s.closed?(i(),a("div",Ge,[e("img",{src:s.image,alt:s.name},null,8,Je)])):c("",!0),s.closed?c("",!0):(i(),a("div",{key:1,innerHTML:t.$options.filters.marked(s.text)},null,8,qe)),s.closed?c("",!0):(i(),a("div",{key:2,innerHTML:t.$options.filters.marked(s.treasure)},null,8,Qe)),e("div",null,[Ye,p(e("textarea",{"onUpdate:modelValue":n=>s.sessionnotes=n,class:"form-control"},null,8,Ze),[[y,s.sessionnotes]])])])),s.buildmode?(i(),a("div",xe,[e("div",et,[e("div",tt,[ot,e("button",{onClick:n=>t.moveEnUp(l)},"\u2191",8,st),e("button",{onClick:n=>t.moveEnDown(l)},"\u2193",8,nt),e("button",{onClick:n=>t.deleteEncounter(l)},"\u{1F5D1}",8,lt),p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>s.name=n},null,8,it),[[y,s.name]])]),e("div",at,[dt,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>s.link=n},null,8,rt),[[y,s.link]])])]),e("div",ut,[e("div",ct,[ht,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>s.image=n},null,8,mt),[[y,s.image]])]),e("div",pt,[_t,e("div",vt,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":n=>s.random=n},null,8,bt),[[T,s.random]]),ft]),e("div",kt,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":n=>s.complete=n},null,8,gt),[[T,s.complete]]),yt])])]),e("div",$t,[e("div",Ct,[Mt,p(e("textarea",{"onUpdate:modelValue":n=>s.text=n,class:"form-control encounterbox"},null,8,wt),[[y,s.text]])]),e("div",{class:"col-sm-6",innerHTML:t.$options.filters.marked(s.text)},null,8,St)]),e("div",null,[Vt,p(e("textarea",{"onUpdate:modelValue":n=>s.treasure=n,class:"form-control"},null,8,Ut),[[y,s.treasure]])]),e("button",{onClick:n=>s.buildmode=!1,class:"btn btn-primary"},"Done",8,Tt)])):c("",!0)],2))),128)),(i(!0),a(A,null,E(t.chapter.sections,(s,l)=>(i(),a("div",{key:s.id,class:H(s.complete?"complete":"")},[s.buildmode?c("",!0):(i(),a("div",At,[e("h3",null,[u(r(s.title)+" ",1),e("button",{onClick:n=>t.moveSectionUp(l),class:"btn btn-sm"},"\u2191",8,Et),e("button",{onClick:n=>t.moveSectionDown(l),class:"btn btn-sm"},"\u2193",8,Lt),e("button",{onClick:n=>s.buildmode=!0,class:"btn btn-sm"},"\u270E",8,Dt)]),e("div",It,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":n=>s.complete=n},null,8,Bt),[[T,s.complete]]),Ht]),e("div",Nt,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":n=>s.hidden=n},null,8,zt),[[T,s.hidden]]),Pt]),s.hidden?c("",!0):(i(),a("div",{key:0,innerHTML:t.$options.filters.marked(s.description)},null,8,Rt))])),s.buildmode?(i(),a("div",Ft,[e("div",jt,[e("div",Ot,[Xt,e("button",{onClick:n=>t.moveSectionUp(l),class:"btn btn-sm"},"\u2191",8,Kt),e("button",{onClick:n=>t.moveSectionDown(l),class:"btn btn-sm"},"\u2193",8,Wt),e("button",{onClick:n=>t.deleteSection(s),class:"btn btn-sm"},"\u{1F5D1}",8,Gt),e("button",{onClick:n=>s.buildmode=!1,class:"btn btn-sm"},"Done",8,Jt),p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>s.title=n},null,8,qt),[[y,s.title]])])]),e("div",Qt,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":n=>s.hidden=n},null,8,Yt),[[T,s.hidden]]),Zt]),s.hidden?c("",!0):(i(),a("div",xt,[e("div",eo,[to,p(e("textarea",{"onUpdate:modelValue":n=>s.description=n,class:"form-control encounterbox"},null,8,oo),[[y,s.description]])]),e("div",{class:"col-sm-6",innerHTML:t.$options.filters.marked(s.description)},null,8,so)]))])):c("",!0),s.hidden?c("",!0):(i(!0),a(A,{key:2},E(s.encounters,(n,M)=>(i(),a("div",{key:n.id,class:H(n.complete?"complete":"")},[n.buildmode?c("",!0):(i(),a("div",no,[e("h4",null,[e("a",{href:n.link,target:"_blank"},r(n.name),9,lo),e("button",{onClick:_=>t.moveEncounterUpInSection({section:s,index:M}),class:"btn btn-xs"},"\u2191",8,io),e("button",{onClick:_=>t.moveEncounterDownInSection({section:s,index:M}),class:"btn btn-xs"},"\u2193",8,ao),e("button",{onClick:_=>t.loadEncounter(n.link),class:"btn btn-success btn-xs"},"Run in Tab",8,ro),e("button",{onClick:_=>n.buildmode=!0,class:"btn btn-xs"},"\u270E",8,uo)]),e("div",co,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":_=>n.complete=_},null,8,ho),[[T,n.complete]]),mo]),e("div",po,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":_=>n.closed=_},null,8,_o),[[T,n.closed]]),vo]),n.image&&!n.closed?(i(),a("div",bo,[e("img",{src:n.image,alt:n.name},null,8,fo)])):c("",!0),n.closed?c("",!0):(i(),a("div",{key:1,innerHTML:t.$options.filters.marked(n.text)},null,8,ko)),n.closed?c("",!0):(i(),a("div",{key:2,innerHTML:t.$options.filters.marked(n.treasure)},null,8,go)),e("div",null,[yo,p(e("textarea",{"onUpdate:modelValue":_=>n.sessionnotes=_,class:"form-control"},null,8,$o),[[y,n.sessionnotes]])])])),n.buildmode?(i(),a("div",Co,[Mo,e("div",wo,[e("div",So,[Vo,e("button",{onClick:_=>t.moveEncounterUpInSection({section:s,index:M}),class:"btn btn-xs"},"\u2191",8,Uo),e("button",{onClick:_=>t.moveEncounterDownInSection({section:s,index:M}),class:"btn btn-sm"},"\u2193",8,To),e("button",{onClick:_=>t.deleteEncounterFromSection({section:s,encounter:n}),class:"btn btn-xs"},"\u{1F5D1}",8,Ao),e("button",{onClick:_=>n.buildmode=!1,class:"btn btn-xs"},"Done",8,Eo),p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":_=>n.name=_},null,8,Lo),[[y,n.name]])]),e("div",Do,[Io,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":_=>n.link=_},null,8,Bo),[[y,n.link]])])]),e("div",Ho,[e("div",No,[zo,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":_=>n.image=_},null,8,Po),[[y,n.image]])]),e("div",Ro,[Fo,e("div",jo,[p(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":_=>n.complete=_},null,8,Oo),[[T,n.complete]]),Xo])])]),e("div",Ko,[e("div",Wo,[Go,p(e("textarea",{"onUpdate:modelValue":_=>n.text=_,class:"form-control"},null,8,Jo),[[y,n.text]])]),e("div",{class:"col-sm-6",innerHTML:t.$options.filters.marked(n.text)},null,8,qo)]),e("div",null,[Qo,p(e("textarea",{"onUpdate:modelValue":_=>n.treasure=_,class:"form-control"},null,8,Yo),[[y,n.treasure]])]),e("div",null,[Zo,p(e("select",{"onUpdate:modelValue":o[8]||(o[8]=_=>t.section2=_),class:"form-control form-control-sm"},[(i(!0),a(A,null,E(t.chapter.sections,_=>(i(),a("option",{key:_.id,value:_},r(s.title),9,xo))),128))],512),[[I,t.section2]]),e("button",{class:"btn btn-success btn-sm",onClick:_=>t.moveEncounterFromSectionToSection({section1:s,section2:t.section2,encounter:n})},"Go",8,es),e("button",{class:"btn btn-primary btn-sm",onClick:_=>t.addEncounterToSection({section:s,index:M+1})},"Add Encounter After This One",8,ts)])])):c("",!0)],2))),128)),s.hidden?c("",!0):(i(),a("div",os,[ss,e("div",ns,[e("button",{class:"btn btn-primary",onClick:n=>t.addEncounterToSection({section:s,index:s.encounters.length})},"Add Encounter",8,ls)])]))],2))),128)),e("div",is,[as,e("div",ds,[e("button",{class:"btn btn-primary",onClick:o[9]||(o[9]=s=>t.addSection())},"Add Section")])])],2)])])])):c("",!0)])}var us=B(_e,[["render",rs]]),cs={setup(){const t=N(),{current:o,campaignCharacters:m}=D(t),{invitePCToCampaign:b,fetchCampaignCharacter:C}=t;return{campaign:o,pcs:m,invitePC:b,fetchCampaignCharacter:C}},data:function(){return{pcid:""}},methods:G(O({addToCampaign(){this.campaign.playercharacters.push(this.pcid),this.fetchCampaignCharacter(this.pcid),this.pcid=""},reloadCharacter(t){let o=this.pcs.findIndex(m=>m._id===t._id);this.pcs.splice(o,1),this.fetchCampaignCharacter(t._id)}},Q),{rollCheck(t){let o=J.roll("1d20").total,m=J.roll("1d20").total;alert("Base Roll: "+(o+t)+" ("+o+" + "+t+`)
Adv/Dis Roll: `+(m+t)+" ("+m+" + "+t+")")},removeFromCampaign(t){let o=this.campaign.playercharacters.findIndex(b=>b===t._id);this.campaign.playercharacters.splice(o,1);let m=this.pcs.findIndex(b=>b._id===t._id);this.pcs.splice(m,1)}})};const U=t=>(Z("data-v-a027a002"),t=t(),x(),t),hs=u(" PC Manager "),ms={class:"row"},ps={class:"btn-group"},_s=["onClick"],vs=["onClick"],bs={class:"row"},fs={class:"col-6"},ks={class:"charsheet-static center"},gs=u(" AC"),ys=U(()=>e("br",null,null,-1)),$s={class:"col-6"},Cs={class:"charsheet-static center"},Ms=u(" Initiative: "),ws={key:0},Ss={class:"abilitytable"},Vs=U(()=>e("thead",null,[e("tr",null,[e("th",null,"Ability"),e("th",null,"Score"),e("th",null,"Mod"),e("th",null,"Save")])],-1)),Us=U(()=>e("th",null,"STR",-1)),Ts=["onClick"],As={key:0},Es=["onClick"],Ls={key:0},Ds=U(()=>e("th",null,"DEX",-1)),Is=["onClick"],Bs={key:0},Hs=["onClick"],Ns={key:0},zs=U(()=>e("th",null,"CON",-1)),Ps=["onClick"],Rs={key:0},Fs=["onClick"],js={key:0},Os=U(()=>e("th",null,"INT",-1)),Xs=["onClick"],Ks={key:0},Ws=["onClick"],Gs={key:0},Js=U(()=>e("th",null,"WIS",-1)),qs=["onClick"],Qs={key:0},Ys=["onClick"],Zs={key:0},xs=U(()=>e("th",null,"CHA",-1)),en=["onClick"],tn={key:0},on=["onClick"],sn={key:0},nn={class:"abilitytable"},ln=U(()=>e("thead",null,[e("tr",null,[e("th",null,"Skill"),e("th",null,"Mod")])],-1)),an=["onClick"],dn={key:0},rn={class:"charsheet-static"},un=U(()=>e("h5",null,"Proficiencies and Languages",-1)),cn={style:{"font-size":"9px","margin-bottom":"2px"}},hn=U(()=>e("strong",null,"Armor: ",-1)),mn={style:{"font-size":"9px","margin-bottom":"2px"}},pn=U(()=>e("strong",null,"Weapons: ",-1)),_n={style:{"font-size":"9px","margin-bottom":"2px"}},vn=U(()=>e("strong",null,"Tools: ",-1)),bn={style:{"font-size":"9px","margin-bottom":"2px"}},fn=U(()=>e("strong",null,"Saves: ",-1)),kn=["innerHTML"];function gn(t,o,m,b,C,k){const s=w("router-link");return i(),a("div",null,[hs,p(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>t.pcid=l)},null,512),[[y,t.pcid]]),e("button",{class:"btn btn-success",onClick:o[1]||(o[1]=l=>t.addToCampaign())},"Add PC"),e("div",ms,[(i(!0),a(A,null,E(t.pcs,l=>(i(),a("div",{key:l._id,class:"col-sm-3"},[e("h4",null,[g(s,{to:"/tools/charbuilder/"+l._id,target:"_blank"},{default:$(()=>[u(r(l.name),1)]),_:2},1032,["to"])]),e("div",ps,[e("button",{onClick:n=>t.reloadCharacter(l),class:"btn btn-success"},"Reload",8,_s),e("button",{onClick:n=>t.removeFromCampaign(l),class:"btn btn-danger"},"Remove",8,vs)]),e("div",bs,[e("div",fs,[e("div",ks,[gs,ys,u(r(t.acCalc(l)),1)])]),e("div",$s,[e("div",Cs,[Ms,t.initMod(l)>-1?(i(),a("span",ws,"+")):c("",!0),u(r(t.initMod(l)),1)])])]),e("table",Ss,[Vs,e("tbody",null,[e("tr",null,[Us,e("td",null,r(t.statTotal(l,0)),1),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.statMod(l,0))},[t.statMod(l,0)>-1?(i(),a("span",As,"+")):c("",!0),u(r(t.statMod(l,0)),1)],8,Ts)]),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.saveMod(l,0))},[t.saveMod(l,0)>-1?(i(),a("span",Ls,"+")):c("",!0),u(r(t.saveMod(l,0)),1)],8,Es)])]),e("tr",null,[Ds,e("td",null,r(t.statTotal(l,1)),1),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.statMod(l,1))},[t.statMod(l,1)>-1?(i(),a("span",Bs,"+")):c("",!0),u(r(t.statMod(l,1)),1)],8,Is)]),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.saveMod(l,1))},[t.saveMod(l,1)>-1?(i(),a("span",Ns,"+")):c("",!0),u(r(t.saveMod(l,1)),1)],8,Hs)])]),e("tr",null,[zs,e("td",null,r(t.statTotal(l,2)),1),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.statMod(l,2))},[t.statMod(l,2)>-1?(i(),a("span",Rs,"+")):c("",!0),u(r(t.statMod(l,2)),1)],8,Ps)]),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.saveMod(l,2))},[t.saveMod(l,2)>-1?(i(),a("span",js,"+")):c("",!0),u(r(t.saveMod(l,2)),1)],8,Fs)])]),e("tr",null,[Os,e("td",null,r(t.statTotal(l,3)),1),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.statMod(l,3))},[t.statMod(l,3)>-1?(i(),a("span",Ks,"+")):c("",!0),u(r(t.statMod(l,3)),1)],8,Xs)]),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.saveMod(l,3))},[t.saveMod(l,3)>-1?(i(),a("span",Gs,"+")):c("",!0),u(r(t.saveMod(l,3)),1)],8,Ws)])]),e("tr",null,[Js,e("td",null,r(t.statTotal(l,4)),1),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.statMod(l,4))},[t.statMod(l,4)>-1?(i(),a("span",Qs,"+")):c("",!0),u(r(t.statMod(l,4)),1)],8,qs)]),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.saveMod(l,4))},[t.saveMod(l,4)>-1?(i(),a("span",Zs,"+")):c("",!0),u(r(t.saveMod(l,4)),1)],8,Ys)])]),e("tr",null,[xs,e("td",null,r(t.statTotal(l,5)),1),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.statMod(l,5))},[t.statMod(l,5)>-1?(i(),a("span",tn,"+")):c("",!0),u(r(t.statMod(l,5)),1)],8,en)]),e("td",null,[e("button",{onClick:n=>t.rollCheck(t.saveMod(l,5))},[t.saveMod(l,5)>-1?(i(),a("span",sn,"+")):c("",!0),u(r(t.saveMod(l,5)),1)],8,on)])])])]),e("table",nn,[ln,e("tbody",null,[(i(!0),a(A,null,E(l.skills,n=>(i(),a("tr",{key:n.name},[e("th",null,r(n.name),1),e("td",null,[e("button",{onClick:M=>t.rollCheck(t.skillMod(l,n))},[t.skillMod(l,n)>-1?(i(),a("span",dn,"+")):c("",!0),u(r(t.skillMod(l,n)),1)],8,an)])]))),128))])]),e("div",rn,[un,e("p",cn,[hn,u(r(l.charclasses[0].thisclass.proficiencies.armor.join(", ")),1)]),e("p",mn,[pn,u(r(l.charclasses[0].thisclass.proficiencies.weapons.join(", ")),1)]),e("p",_n,[vn,u(r(l.charclasses[0].thisclass.proficiencies.tools.join(", ")),1)]),e("p",bn,[fn,u(r(l.charclasses[0].thisclass.proficiencies["saving throws"].join(", ")),1)]),e("p",{innerHTML:l.proficiencies,style:{"font-size":"9px","margin-bottom":"2px"}},null,8,kn)])]))),128))])])}var yn=B(cs,[["render",gn],["__scopeId","data-v-a027a002"]]),$n={setup(){const t=N(),{current:o}=D(t);return{campaign:o}},props:{buildmode:Boolean},computed:{availableChapters:function(){let t=[];return this.campaign.chapters.forEach(o=>{t.push({value:o.title,text:o.title})}),t},filteredNPCs:function(){let t=[];return this.campaign.npcs.forEach(o=>{(this.filterByChapter==="all"||o.chapters.includes("all")||o.chapters.includes(this.filterByChapter))&&t.push(o)}),t}},data:function(){return{filterByChapter:"all"}},methods:{newNPC(){this.campaign.npcs.push({id:Math.random(),name:"New NPC",editMode:!0,job:"",relation:"",link:"",skills:"",location:"",motivations:"",history:"",chapters:["all"],show:!0})},deleteNPC(t){let o=this.campaign.npcs.findIndex(m=>m.id===t.id);window.confirm("Are you sure you want to delete "+t.name+"?")&&this.campaign.npcs.splice(o,1)}}};const Cn=u(" Filter By Chapter: "),Mn=u("All"),wn={key:0},Sn=["onUpdate:modelValue"],Vn=["onClick"],Un=["onClick"],Tn=["onClick"],An={key:0},En={key:1},Ln={key:0},Dn={class:"row"},In={class:"col-sm-2"},Bn=e("strong",null,"Job: ",-1),Hn={key:0},Nn=["onUpdate:modelValue"],zn={class:"col-sm-3"},Pn=e("strong",null,"Relation to Party:",-1),Rn={key:0},Fn=["onUpdate:modelValue"],jn={class:"col-sm-7"},On=e("strong",null,"Link to Stats",-1),Xn={key:1},Kn=["onUpdate:modelValue"],Wn={class:"row"},Gn={class:"col-sm-2"},Jn=e("strong",null,"Location:",-1),qn={key:0},Qn=["onUpdate:modelValue"],Yn={class:"col-sm-10"},Zn=e("strong",null,"Relevant Chapters:",-1),xn=u("All"),el={class:"row"},tl={class:"col-sm-12"},ol=e("strong",null,"History: ",-1),sl=["innerHTML"],nl=["onUpdate:modelValue"],ll={class:"row"},il={class:"col-sm-12"},al=e("strong",null,"Motivations: ",-1),dl=["innerHTML"],rl=["onUpdate:modelValue"];function ul(t,o,m,b,C,k){const s=w("b-form-radio"),l=w("b-form-radio-group"),n=w("router-link"),M=w("b-form-checkbox"),_=w("b-form-checkbox-group");return i(),a("div",null,[e("button",{onClick:o[0]||(o[0]=h=>t.newNPC())},"Add NPC"),e("div",null,[e("label",null,[Cn,g(l,{modelValue:t.filterByChapter,"onUpdate:modelValue":o[1]||(o[1]=h=>t.filterByChapter=h),options:t.availableChapters,name:"filterByChapter"},{default:$(()=>[g(s,{value:"all"},{default:$(()=>[Mn]),_:1})]),_:1},8,["modelValue","options"])])]),(i(!0),a(A,null,E(t.filteredNPCs,h=>(i(),a("div",{key:h.id,class:"card"},[e("h3",null,[h.editMode?c("",!0):(i(),a("span",wn,r(h.name),1)),h.editMode?p((i(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":f=>h.name=f},null,8,Sn)),[[y,h.name]]):c("",!0),e("button",{class:"btn-symbol btn-sm",onClick:f=>h.editMode=!h.editMode},"\u270E",8,Vn),e("button",{class:"btn-symbol btn-sm",onClick:f=>t.deleteNPC(h)},"\u{1F5D1}",8,Un),e("button",{type:"button",class:"btn btn-primary float-right",onClick:f=>h.show=!h.show},[h.show?(i(),a("span",An,"\u25B2")):c("",!0),h.show?c("",!0):(i(),a("span",En,"\u25BC"))],8,Tn)]),h.show?(i(),a("div",Ln,[e("div",Dn,[e("label",In,[Bn,h.editMode?c("",!0):(i(),a("span",Hn,r(h.job),1)),h.editMode?p((i(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":f=>h.job=f},null,8,Nn)),[[y,h.job]]):c("",!0)]),e("label",zn,[Pn,h.editMode?c("",!0):(i(),a("span",Rn,r(h.relation),1)),h.editMode?p((i(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":f=>h.relation=f},null,8,Fn)),[[y,h.relation]]):c("",!0)]),e("label",jn,[h.editMode?c("",!0):(i(),X(n,{key:0,to:h.link,target:"_blank"},{default:$(()=>[On]),_:2},1032,["to"])),h.editMode?(i(),a("strong",Xn,"Link to Stats")):c("",!0),h.editMode?p((i(),a("input",{key:2,type:"text",class:"form-control","onUpdate:modelValue":f=>h.link=f},null,8,Kn)),[[y,h.link]]):c("",!0)])]),e("div",Wn,[e("label",Gn,[Jn,h.editMode?c("",!0):(i(),a("span",qn,r(h.location),1)),h.editMode?p((i(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":f=>h.location=f},null,8,Qn)),[[y,h.location]]):c("",!0)]),e("label",Yn,[Zn,h.editMode?c("",!0):(i(!0),a(A,{key:0},E(h.chapters,f=>(i(),a("span",{key:f},r(f),1))),128)),h.editMode?(i(),X(_,{key:1,modelValue:h.chapters,"onUpdate:modelValue":f=>h.chapters=f,options:t.availableChapters},{default:$(()=>[g(M,{value:"all"},{default:$(()=>[xn]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","options"])):c("",!0)])]),e("div",el,[e("label",tl,[ol,h.editMode?c("",!0):(i(),a("span",{key:0,innerHTML:t.$options.filters.marked(h.history)},null,8,sl)),h.editMode?p((i(),a("textarea",{key:1,"onUpdate:modelValue":f=>h.history=f,class:"form-control"},null,8,nl)),[[y,h.history]]):c("",!0)])]),e("div",ll,[e("label",il,[al,h.editMode?c("",!0):(i(),a("span",{key:0,innerHTML:t.$options.filters.marked(h.motivations)},null,8,dl)),h.editMode?p((i(),a("textarea",{key:1,"onUpdate:modelValue":f=>h.motivations=f,class:"form-control"},null,8,rl)),[[y,h.motivations]]):c("",!0)])])])):c("",!0)]))),128))])}var cl=B($n,[["render",ul]]);const hl={name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""},ml=[{cr:0,xp:10},{cr:.125,xp:25},{cr:.25,xp:50},{cr:.5,xp:100},{cr:1,xp:200},{cr:2,xp:450},{cr:3,xp:700},{cr:4,xp:1100},{cr:5,xp:1800},{cr:6,xp:2300},{cr:7,xp:2900},{cr:8,xp:3900},{cr:9,xp:5e3},{cr:10,xp:5900},{cr:11,xp:7200},{cr:12,xp:8400},{cr:13,xp:1e4},{cr:14,xp:11500},{cr:15,xp:13e3},{cr:16,xp:15e3},{cr:17,xp:18e3},{cr:18,xp:2e4},{cr:19,xp:22e3},{cr:20,xp:25e3},{cr:21,xp:33e3},{cr:22,xp:41e3},{cr:23,xp:5e4},{cr:24,xp:62e3},{cr:26,xp:9e4},{cr:30,xp:155e3}];var pl={setup(){const t=he(),o=me(),m=Y(),{creatures:b}=D(t),{charlevel:C,accalc:k,getSpeedStat:s,getStatTotal:l,getStatMod:n,getSaveMod:M,getSkillMod:_,getHPTotal:h,getAttackBonus:f,getDamageBonus:S,totalslots:L,getInitMod:d,getCharacter:V,serverCharacters:z}=D(o),{loggedin:P,isLoggedIn:R,isAdmin:F,getUserInfo:j}=m,{getFromServer:te,loadChar:oe,setCharacter:se}=o,{getCreature:ne,saveNewCreature:le,deleteCreature:ie}=t;return{creatures:b,charlevel:C,accalc:k,getSpeedStat:s,getStatTotal:l,getStatMod:n,getSaveMod:M,getSkillMod:_,getHPTotal:h,getAttackBonus:f,getDamageBonus:S,totalslots:L,getInitMod:d,curcharacter:V,characters:z,token:P,loggedin:R,admin:F,userinfo:j,getFromServer:te,loadChar:oe,setCharacter:se,getCreature:ne,saveNewCreature:le,deleteCreature:ie}},props:{creArray:Array,charArray:Array},computed:{filteredcreatures(){let t=this;return this.creatures.filter(o=>{var m=t.creaturestable.filterValue.split(" ");let b=!0;return t.typeFilter!==""&&o.type!==t.typeFilter&&(b=!1),m.forEach(C=>{let k=t.creaturestable.filterBy.some(function(s){for(var l in o)if(s===l&&o[l].toString().toLowerCase().includes(C.toLowerCase()))return!0});t.creaturestable.filterValue&&!k&&(b=!1)}),!!b})},statBlocks(){let t=[];return this.encountercreatures.forEach(o=>{o.ispc||t.findIndex(b=>b.name===o.name)===-1&&t.push(o)}),t},encountercreaturesinit(){return this.encountercreatures.sort((t,o)=>t.init>o.init?-1:1)},encounterlink(){return"/runner/"+this.encountercreatures.map(t=>t.name.replace(/ /g,"").toLowerCase()).join("&")}},data(){return{creaturestable:{fields:[{key:"name",label:"Name",sortable:!0},{key:"size",label:"Size",sortable:!0},{key:"cr",label:"CR",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"subtype",label:"Subtype",sortable:!0},{key:"alignment",label:"Alignment",sortable:!0}],filterValue:"",sortBy:null,sortDesc:!1,filterBy:["name","size","cr","subtype","alignment"],modalInfo:O({},hl)},typeFilter:"",nextIndex:0,partylevel:1,partysize:4,difficulty:"",xpvalue:0,terrain:1,adjustedxpvalue:0,aoe:!1,comp:this,encountercreatures:[]}},methods:{del(t){confirm("are you sure you want to delete "+t.name+"? It cannot be recovered if you do.")+this.admin&&this.deleteCreature(t._id)},edit(t){confirm("are you sure you want to edit "+t.name+"?")+this.admin&&this.$router.push("/tools/creaturebuilder/"+t._id)},xpByCR(t){return ml.find(o=>o.cr===t).xp},calculateDifficulty(){for(var t=[25,50,75,125,250,300,350,450,550,600,800,1e3,1100,1250,1400,1600,2e3,2100,2400,2800],o=[50,100,150,250,500,600,750,900,1100,1200,1600,2e3,2200,2500,2800,3200,3900,4200,4900,5700],m=[75,150,225,375,750,900,1100,1400,1600,1900,2400,3e3,3400,3800,4300,4800,5900,6300,7300,8500],b=[100,200,400,500,1100,1400,1700,2100,2400,2800,3600,4500,5100,5700,6400,7200,8800,9500,10900,12700],C=t[this.partylevel-1]*this.partysize,k=o[this.partylevel-1]*this.partysize,s=m[this.partylevel-1]*this.partysize,l=b[this.partylevel-1]*this.partysize,n=0,M=0;M<this.encountercreatures.length;M++)this.encountercreatures[M].ispc||(n+=this.xpByCR(this.encountercreatures[M].cr));this.xpvalue=n,n*=4/(this.partysize+1),n*=1+this.encountercreatures.length*.1,n*=this.terrain*(1+.05*this.aoe*this.partysize),this.adjustedxpvalue=Math.floor(n),n<C?this.difficulty="too easy":n<k?this.difficulty="easy":n<s?this.difficulty="medium":n<l?this.difficulty="hard":n<l*1.5?this.difficulty="deadly":this.difficulty="nigh on impossible"},async addToEncounter(t){t.description||(t=await this.getCreature(t._id));var o=Object.assign({},t);o.id=this.nextIndex,o.ispc=!1,this.nextIndex++,o.currenthp=o.hp,o.descr=q.parse(o.description),o.mini="",o.initMod=o.dexmod,o.advantage=!1,o.disadvantage=!1,o.init=0,this.encountercreatures.push(o),this.calculateDifficulty()},removeCreature(t){this.encountercreatures=this.encountercreatures.filter(o=>o.id!==t.id),this.calculateDifficulty()},createSkillsArray(t){return t.skills.reduce((o,m)=>(m.prof>0&&o.push("+"+this.getSkillMod(m)+" "+m.name),o),[])},createDescription(t){let o=this,m=t.attacks.reduce((k,s)=>{let l="**"+s.name+":** "+s.type+", range "+s.range+", ";return o.getAttackBonus(s)>-1&&(l+="+"),l+=o.getAttackBonus(s)+" to hit ("+s.damage,o.getDamageBonus(s)>0?l+=" +"+o.getDamageBonus(s):o.getDamageBonus(s)<0&&(l+=" -"+o.getDamageBonus(s)),l+=" "+s.dtype+" damage ",s.damage2!==""&&(l+=" + "+s.damage2+" "+s.dtype2+" damage"),k+l+`

`},""),b=(k,s)=>k+"**"+s.name+":** "+s.description+`

`;m=t.feats.reduce(b,m),m=t.charclasses.reduce((k,s)=>(k=s.thisclass.features.reduce(b,k),k=s.selsubclass.features.reduce(b,k),k),m),t.race.traits&&(m=t.race.traits.reduce(b,m)),m=t.features.reduce(b,m);let C=`**Spells**

`;for(let k in t.spells)t.spells[k].length>0&&(C+="**"+k+"("+this.totalslots(k)+" slots):** "+t.spells[k].reduce((s,l)=>s+l.title+(l.prepared?"*":"")+", ","")+`

`);return C.length>14&&(m+=C),q.parse(m)},buildCreature(t,o){this.setCharacter(t);let m={id:this.nextIndex,name:t.name,size:"medium",type:"humanoid",ispc:o,subtype:t.race.singular,alignment:t.alignment,acdesc:this.accalc,speed:this.getSpeedStat(0)+" ft",str:this.getStatTotal(0)+0,dex:this.getStatTotal(1),con:this.getStatTotal(2),int:this.getStatTotal(3),wis:this.getStatTotal(4),cha:this.getStatTotal(5),strmod:this.getStatMod(0),dexmod:this.getStatMod(1),conmod:this.getStatMod(2),intmod:this.getStatMod(3),wismod:this.getStatMod(4),chamod:this.getStatMod(5),saves:"+"+this.getSaveMod(0)+" strength +"+this.getSaveMod(1)+" dexterity +"+this.getSaveMod(2)+" constitution +"+this.getSaveMod(3)+" intelligence +"+this.getSaveMod(4)+" wisdom +"+this.getSaveMod(5)+" charisma.",skills:this.createSkillsArray(t),senses:"",damageresistances:"",damageimmunities:"",conditionimmunities:"",languages:t.proficiencies,cr:this.charlevel(t)-1,descr:this.createDescription(t),mini:"",currenthp:t.hpcurrent,hpdesc:this.getHPTotal,initMod:this.getInitMod,advantage:!1,disadvantage:!1,init:0};this.encountercreatures.push(m),this.nextIndex++,this.calculateDifficulty()},async selCharacter(t){await this.loadChar({character:t,comp:this,passthrough:!0}).then(()=>{this.buildCreature(t,!1),this.$root.$emit("bv::hide::modal","servermodal")})},roll(){let t=[];this.encountercreatures.forEach(o=>{let m=t.findIndex(b=>b.name===o.name);if(m!==-1)o.init=t[m].init;else{let b=Number(o.initMod)+Math.floor(Math.random()*20)+1,C=Number(o.initMod)+Math.floor(Math.random()*20)+1;o.advantage&&!o.disadvantage?b>C?o.init=b:o.init=C:!o.advantage&&o.disadvantage?b<C?o.init=b:o.init=C:o.init=b,t.push(o)}})},getCreaturesOnMount(t){this.$store.dispatch("getAllCreatures").then(()=>{for(var o=0;o<t.length;o++){var m=this.creatures.filter(function(b){return b.name.toLowerCase().replace(/ /g,"")===t[o].toLowerCase().replace(/ /g,"")});m.length>0&&this.addToEncounter(m[0])}this.calculateDifficulty()})},async loadCharacters(t){t.forEach(o=>{this.buildCreature(o,!0)})}},mounted(){if(this.encountercreatures=[],this.$route.params.encounter){console.log("there is an encounter parameter");var t=this.$route.params.encounter.split("&");this.getCreaturesOnMount(t)}else typeof this.creArray!="undefined"&&this.creArray.length>0&&(console.log("running in campaign setting"),t=this.creArray,this.getCreaturesOnMount(t));typeof this.charArray!="undefined"&&this.charArray.length>0&&(this.loadCharacters(this.charArray),this.partysize=this.charArray.length,this.partylevel=Q.charlevel(this.charArray[0]))}};const v=t=>(Z("data-v-7f564d6d"),t=t(),x(),t),_l={class:"col-sm-12"},vl={class:"col-sm-9"},bl=v(()=>e("h1",null,"Encounter Runner",-1)),fl=["href"],kl={class:"row"},gl={class:"col-sm-8"},yl=u(" Party Size "),$l=ee('<option value="1" data-v-7f564d6d>1</option><option value="2" data-v-7f564d6d>2</option><option value="3" data-v-7f564d6d>3</option><option value="4" data-v-7f564d6d>4</option><option value="5" data-v-7f564d6d>5</option><option value="6" data-v-7f564d6d>6</option><option value="7" data-v-7f564d6d>7</option><option value="8" data-v-7f564d6d>8</option><option value="9" data-v-7f564d6d>9</option><option value="10" data-v-7f564d6d>10</option>',10),Cl=[$l],Ml=u(" Average Level "),wl=ee('<option value="1" data-v-7f564d6d>1</option><option value="2" data-v-7f564d6d>2</option><option value="3" data-v-7f564d6d>3</option><option value="4" data-v-7f564d6d>4</option><option value="5" data-v-7f564d6d>5</option><option value="6" data-v-7f564d6d>6</option><option value="7" data-v-7f564d6d>7</option><option value="8" data-v-7f564d6d>8</option><option value="9" data-v-7f564d6d>9</option><option value="10" data-v-7f564d6d>10</option><option value="11" data-v-7f564d6d>11</option><option value="12" data-v-7f564d6d>12</option><option value="13" data-v-7f564d6d>13</option><option value="14" data-v-7f564d6d>14</option><option value="15" data-v-7f564d6d>15</option><option value="16" data-v-7f564d6d>16</option><option value="17" data-v-7f564d6d>17</option><option value="18" data-v-7f564d6d>18</option><option value="19" data-v-7f564d6d>19</option><option value="20" data-v-7f564d6d>20</option>',20),Sl=[wl],Vl=u(" Terrain "),Ul=["value"],Tl=v(()=>e("option",{value:1},"None",-1)),Al=["value"],El=u(" Monster Has Powerful AoE "),Ll={class:"col-sm-4"},Dl=v(()=>e("br",null,null,-1)),Il=v(()=>e("br",null,null,-1)),Bl={class:"row"},Hl=v(()=>e("i",{class:"handle"},"\u2190\u2192",-1)),Nl={class:"creature"},zl={key:0},Pl=v(()=>e("strong",null,"Armor Class:",-1)),Rl=v(()=>e("br",null,null,-1)),Fl=v(()=>e("strong",null,"Speed:",-1)),jl={class:"table table-striped"},Ol=v(()=>e("thead",null,[e("tr",null,[e("th",null,"STR"),e("th",null,"DEX"),e("th",null,"CON"),e("th",null,"INT"),e("th",null,"WIS"),e("th",null,"CHA")])],-1)),Xl={key:0},Kl={key:0},Wl={key:0},Gl={key:0},Jl={key:0},ql={key:0},Ql={"data-v-if":"creature.saves"},Yl=v(()=>e("strong",null,"Saving Throws:",-1)),Zl=v(()=>e("br",null,null,-1)),xl={key:0},ei=v(()=>e("strong",null,"Skills:",-1)),ti=v(()=>e("br",null,null,-1)),oi=v(()=>e("strong",null,"Senses:",-1)),si=v(()=>e("br",null,null,-1)),ni={key:1},li=v(()=>e("strong",null,"Damage Resistances:",-1)),ii=v(()=>e("br",null,null,-1)),ai={key:2},di=v(()=>e("strong",null,"Damage Immunities:",-1)),ri=v(()=>e("br",null,null,-1)),ui={key:3},ci=v(()=>e("strong",null,"Condition Immunities:",-1)),hi=v(()=>e("br",null,null,-1)),mi=v(()=>e("strong",null,"Languages:",-1)),pi=v(()=>e("br",null,null,-1)),_i=v(()=>e("strong",null,"Challenge:",-1)),vi=["innerHTML"],bi=u(" Type "),fi=v(()=>e("option",{value:""},"All",-1)),ki=v(()=>e("option",{value:"aberration"},"Aberration",-1)),gi=v(()=>e("option",{value:"beast"},"Beast",-1)),yi=v(()=>e("option",{value:"celestial"},"Celestial",-1)),$i=v(()=>e("option",{value:"construct"},"Construct",-1)),Ci=v(()=>e("option",{value:"dragon"},"Dragon",-1)),Mi=v(()=>e("option",{value:"elemental"},"Elemental",-1)),wi=v(()=>e("option",{value:"fiend"},"Fiend",-1)),Si=v(()=>e("option",{value:"giant"},"Giant",-1)),Vi=v(()=>e("option",{value:"humanoid"},"Humanoid",-1)),Ui=v(()=>e("option",{value:"monstrosity"},"Monstrosity",-1)),Ti=v(()=>e("option",{value:"plant"},"Plant",-1)),Ai=v(()=>e("option",{value:"ooze"},"Ooze",-1)),Ei=v(()=>e("option",{value:"undead"},"Undead",-1)),Li=[fi,ki,gi,yi,$i,Ci,Mi,wi,Si,Vi,Ui,Ti,Ai,Ei],Di=u("Name"),Ii=u("Size"),Bi=u("CR"),Hi=u("Subtype"),Ni=u("Alignment"),zi=u("Clear"),Pi=["onClick"],Ri=u(),Fi=["onClick"],ji=["onClick"],Oi={id:"inithptracker",class:"row"},Xi=["onUpdate:modelValue"],Ki=["onUpdate:modelValue"],Wi=u("\xA0 "),Gi={class:"ck-button"},Ji=["onUpdate:modelValue"],qi=v(()=>e("span",null,"Adv",-1)),Qi={class:"ck-button"},Yi=["onUpdate:modelValue"],Zi=v(()=>e("span",null,"Dis",-1)),xi=["onClick"],ea={class:"table table-striped"},ta=v(()=>e("tr",null,[e("th",null,"Character Name"),e("th",null,"Level"),e("th",null,"-")],-1)),oa=["onClick"],sa=v(()=>e("img",{src:"https://elthelas-images.herokuapp.com/giphy.gif",alt:"Loading"},null,-1));function na(t,o,m,b,C,k){const s=w("b-col"),l=w("b-form-checkbox"),n=w("b-form-checkbox-group"),M=w("b-form-input"),_=w("b-btn"),h=w("b-input-group"),f=w("b-row"),S=w("b-table"),L=w("b-modal");return i(),a("div",_l,[e("div",vl,[bl,e("p",null,[e("a",{href:t.encounterlink},"Link to this Encounter",8,fl)]),e("div",kl,[e("div",gl,[e("label",null,[yl,p(e("select",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=d=>t.partysize=d),onChange:o[1]||(o[1]=d=>t.calculateDifficulty())},Cl,544),[[I,t.partysize]])]),e("label",null,[Ml,p(e("select",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=d=>t.partylevel=d),onChange:o[3]||(o[3]=d=>t.calculateDifficulty())},Sl,544),[[I,t.partylevel]])]),e("label",null,[Vl,p(e("select",{class:"form-control","onUpdate:modelValue":o[4]||(o[4]=d=>t.terrain=d),onChange:o[5]||(o[5]=d=>t.calculateDifficulty())},[e("option",{value:.75},"Player Advantage",8,Ul),Tl,e("option",{value:1.25},"Monster Advantage",8,Al)],544),[[I,t.terrain]])]),e("label",null,[El,p(e("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":o[6]||(o[6]=d=>t.aoe=d),onChange:o[7]||(o[7]=d=>t.calculateDifficulty())},null,544),[[T,t.aoe]])])]),e("div",Ll,[e("input",{type:"button",class:"btn btn-primary",value:"Calculate",onClick:o[8]||(o[8]=d=>t.calculateDifficulty())}),u(" Encounter Difficulty: "+r(t.difficulty)+" ",1),Dl,u(" XP Value: "+r(t.xpvalue),1),Il,u(" Adjusted XP Value: "+r(t.adjustedxpvalue),1)])]),e("div",null,[e("input",{type:"button",onClick:o[9]||(o[9]=d=>t.getFromServer(t.comp)),value:"Load Character",class:"btn btn-success margin15"})]),e("div",Bl,[(i(!0),a(A,null,E(t.statBlocks,d=>(i(),a("div",{key:d.id,class:"col-sm-4"},[e("h2",null,[u(r(d.name)+" ",1),Hl]),e("div",Nl,[e("h4",null,[u(r(d.size)+" "+r(d.type),1),d.subtype?(i(),a("span",zl," ("+r(d.subtype)+")",1)):c("",!0),u(", "+r(d.alignment),1)]),e("p",null,[Pl,u(" "+r(d.acdesc)+" ",1),Rl,Fl,u(" "+r(d.speed),1)]),e("table",jl,[Ol,e("tbody",null,[e("tr",null,[e("td",null,[u(r(d.str)+" (",1),d.strmod>0?(i(),a("span",Xl,"+")):c("",!0),u(r(d.strmod)+")",1)]),e("td",null,[u(r(d.dex)+" (",1),d.dexmod>0?(i(),a("span",Kl,"+")):c("",!0),u(r(d.dexmod)+")",1)]),e("td",null,[u(r(d.con)+" (",1),d.conmod>0?(i(),a("span",Wl,"+")):c("",!0),u(r(d.conmod)+")",1)]),e("td",null,[u(r(d.int)+" (",1),d.intmod>0?(i(),a("span",Gl,"+")):c("",!0),u(r(d.intmod)+")",1)]),e("td",null,[u(r(d.wis)+" (",1),d.wismod>0?(i(),a("span",Jl,"+")):c("",!0),u(r(d.wismod)+")",1)]),e("td",null,[u(r(d.cha)+" (",1),d.chamod>0?(i(),a("span",ql,"+")):c("",!0),u(r(d.chamod)+")",1)])])])]),e("p",null,[e("span",Ql,[Yl,u(" "+r(d.saves)+" ",1),Zl]),d.skills.length>0?(i(),a("span",xl,[ei,u(" "+r(d.skills.join(", "))+" ",1),ti])):c("",!0),oi,u(" "+r(d.senses)+" ",1),si,d.damageresistances?(i(),a("span",ni,[li,u(" "+r(d.damageresistances)+" ",1),ii])):c("",!0),d.damageimmunities?(i(),a("span",ai,[di,u(" "+r(d.damageimmunities)+" ",1),ri])):c("",!0),d.conditionimmunities?(i(),a("span",ui,[ci,u(" "+r(d.conditionimmunities)+" ",1),hi])):c("",!0),mi,u(" "+r(d.languages)+" ",1),pi,_i,u(" "+r(d.cr),1)]),e("div",{innerHTML:d.descr},null,8,vi)])]))),128))]),g(f,null,{default:$(()=>[g(s,{md:"2"},{default:$(()=>[e("label",null,[bi,p(e("select",{"onUpdate:modelValue":o[10]||(o[10]=d=>t.typeFilter=d),class:"form-control"},Li,512),[[I,t.typeFilter]])])]),_:1}),g(s,{md:"6"},{default:$(()=>[g(n,{modelValue:t.creaturestable.filterBy,"onUpdate:modelValue":o[11]||(o[11]=d=>t.creaturestable.filterBy=d)},{default:$(()=>[g(l,{value:"name"},{default:$(()=>[Di]),_:1}),g(l,{value:"size"},{default:$(()=>[Ii]),_:1}),g(l,{value:"cr"},{default:$(()=>[Bi]),_:1}),g(l,{value:"subtype"},{default:$(()=>[Hi]),_:1}),g(l,{value:"alignment"},{default:$(()=>[Ni]),_:1})]),_:1},8,["modelValue"])]),_:1}),g(s,{md:"4",class:"my-1"},{default:$(()=>[g(h,null,{default:$(()=>[g(M,{modelValue:t.creaturestable.filterValue,"onUpdate:modelValue":o[12]||(o[12]=d=>t.creaturestable.filterValue=d),placeholder:"Type to Search"},null,8,["modelValue"]),g(_,{disabled:!t.creaturestable.filterValue,onClick:o[13]||(o[13]=d=>t.creaturestable.filterValue="")},{default:$(()=>[zi]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),g(S,{"show-empty":"",id:"creaturetable",striped:!0,bordered:!1,responsive:!0,stacked:"sm",items:t.filteredcreatures,fields:t.creaturestable.fields,"sort-by":t.creaturestable.sortBy,"sort-desc":t.creaturestable.sortDesc},{"cell(name)":$(d=>[e("span",null,[e("a",{href:"#",onClick:pe(V=>t.addToEncounter(d.item,d.index,V.target),["stop"])},r(d.value),9,Pi),Ri,t.admin?(i(),a("button",{key:0,class:"btn btn-warning btn-sm",onClick:V=>t.edit(d.item)},"\u270E",8,Fi)):c("",!0),t.admin?(i(),a("button",{key:1,class:"btn btn-sm btn-danger",onClick:V=>t.del(d.item)},"X",8,ji)):c("",!0)])]),_:1},8,["items","fields","sort-by","sort-desc"])]),e("div",Oi,[(i(!0),a(A,null,E(t.encountercreaturesinit,d=>(i(),a("div",{key:d.id,class:"form-inline form-row"},[u(r(d.name)+"\xA0 ",1),p(e("input",{type:"number","onUpdate:modelValue":V=>d.currenthp=V,style:{"max-width":"50px","font-size":"0.7rem"},class:"form-control form-control-sm"},null,8,Xi),[[y,d.currenthp]]),u(" \xA0/ "+r(d.hpdesc)+" Init: +"+r(d.initMod)+"\xA0 ",1),p(e("input",{type:"number","onUpdate:modelValue":V=>d.init=V,style:{"max-width":"50px","font-size":"0.7rem"},class:"form-control form-control-sm"},null,8,Ki),[[y,d.init,void 0,{lazy:!0,number:!0}]]),Wi,e("div",Gi,[e("label",null,[p(e("input",{type:"checkbox","onUpdate:modelValue":V=>d.advantage=V},null,8,Ji),[[T,d.advantage]]),qi])]),e("div",Qi,[e("label",null,[p(e("input",{type:"checkbox","onUpdate:modelValue":V=>d.disadvantage=V},null,8,Yi),[[T,d.disadvantage]]),Zi])]),e("button",{class:"close",type:"button",onClick:V=>t.removeCreature(d)},"\xD7",8,xi)]))),128)),e("input",{type:"button",class:"btn btn-success",style:{height:"40px"},onClick:o[14]||(o[14]=d=>t.roll()),value:"Roll Initiative"})]),g(L,{id:"servermodal",title:"Load File from Server","modal-class":t.userinfo.themesetting},{default:$(()=>[e("table",ea,[ta,(i(!0),a(A,null,E(t.characters,d=>(i(),a("tr",{key:d._id},[e("td",null,[e("span",{class:"clickable",onClick:V=>t.selCharacter(d)},r(d.name),9,oa)]),e("td",null,r(t.charlevel(d)),1)]))),128))])]),_:1},8,["modal-class"]),g(L,{id:"loading","modal-class":t.userinfo.themesetting,"no-close-on-backdrop":"","no-close-on-esc":"","hide-header":"","hide-footer":""},{default:$(()=>[sa]),_:1},8,["modal-class"])])}var la=B(pl,[["render",na],["__scopeId","data-v-7f564d6d"]]),ia={setup(){const t=N(),o=Y(),{campaigns:m,current:b,currentChapter:C,campaignCharacters:k}=D(t),{getUserInfo:s,isLoggedIn:l}=o,{getAllCampaigns:n,getAllCampaignsSilent:M,saveNewCampaign:_,saveCampaign:h,loadCampaign:f,loadCampaignById:S,loadCampaignByUrl:L,deleteCampaign:d,newCampaign:V}=t;return{campaigns:t,userinfo:o,allCampaigns:m,campaign:b,chapter:C,pcs:k,token:s,loggedin:l,getAll:n,getAllSilent:M,saveNew:_,save:h,load:f,loadById:S,loadByUrl:L,deleteCamp:d,newCamp:V}},components:{notes:us,pcmanager:yn,npcmanager:cl,runner:la},data:function(){return{comp:this,showChapters:!0,creArray:[],charArray:[],runnerKey:0,activeTab:0}},watch:{campaign:{handler(){this.campaign._id&&this.loggedin&&this.save()},deep:!0}},methods:{loadEncounter(t){this.creArray=t.substr(t.search("runner/")+7).split("&"),this.charArray=this.pcs,this.runnerKey++,this.activeTab=3,window.scroll(1,300)}},created(){this.getAllSilent().then(()=>{this.$route.params.campaign&&this.loadByUrl({url:this.$route.params.campaign})})}};const aa={class:"col-sm-12"},da={class:"btn-group"},ra={key:0},ua={key:1},ca=u(" Chapters"),ha={class:"table table-striped"},ma=e("tr",null,[e("th",null,"Campaign Name"),e("th",null,"-")],-1),pa=["onClick"],_a=["onClick"];function va(t,o,m,b,C,k){const s=w("notes"),l=w("b-tab"),n=w("pcmanager"),M=w("npcmanager"),_=w("runner"),h=w("b-tabs"),f=w("b-modal");return i(),a("div",aa,[e("div",da,[t.campaign._id?(i(),a("button",{key:0,class:"btn btn-primary",onClick:o[0]||(o[0]=S=>t.save())},"Save")):c("",!0),t.campaign._id?c("",!0):(i(),a("button",{key:1,class:"btn btn-primary",onClick:o[1]||(o[1]=S=>t.saveNew())},"Save New")),e("button",{class:"btn btn-success",onClick:o[2]||(o[2]=S=>t.getAll(t.comp))},"Load"),e("button",{class:"btn btn-warning",onClick:o[3]||(o[3]=S=>t.newCamp())},"New Campaign"),e("button",{class:"btn btn-primary",onClick:o[4]||(o[4]=S=>t.showChapters=!t.showChapters)},[t.showChapters?(i(),a("span",ra,"Hide")):(i(),a("span",ua,"Show")),ca])]),g(h,{modelValue:t.activeTab,"onUpdate:modelValue":o[5]||(o[5]=S=>t.activeTab=S)},{default:$(()=>[g(l,{title:"Notes"},{default:$(()=>[g(s,{buildmode:t.buildmode,"show-chapters":t.showChapters},null,8,["buildmode","show-chapters"])]),_:1}),g(l,{title:"PC Manager"},{default:$(()=>[g(n)]),_:1}),g(l,{title:"NPCs"},{default:$(()=>[g(M,{buildmode:t.buildmode},null,8,["buildmode"])]),_:1}),g(l,{title:"Encounter Runner"},{default:$(()=>[(i(),X(_,{"cre-array":t.creArray,"char-array":t.charArray,key:t.runnerKey},null,8,["cre-array","char-array"]))]),_:1})]),_:1},8,["modelValue"]),g(f,{id:"campaignmodal",title:"Load File from Server","modal-class":t.userinfo.themesetting},{default:$(()=>[e("table",ha,[ma,(i(!0),a(A,null,E(t.allCampaigns,S=>(i(),a("tr",{key:S._id},[e("td",null,[e("span",{class:"clickable",onClick:L=>t.load({campaign:S,comp:t.comp})},r(S.title),9,pa)]),e("td",null,[e("input",{type:"button",onClick:L=>t.deleteCamp(S),class:"btn btn-danger",value:"X"},null,8,_a)])]))),128))])]),_:1},8,["modal-class"])])}var ga=B(ia,[["render",va]]);export{ga as default};
