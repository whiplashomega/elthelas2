import{M as E,s as L,B as R,m as B,_ as A,o as n,c as a,a as e,e as m,t as u,d as r,n as h,v as p,F as M,r as U,q as S,A as g,C as O,z as I,g as W,h as y,i as $,w as f,K as D,k as X,l as q}from"./index.js";import G from"./runner.js";import"./creaturecalc.js";const J={setup(){const t=E(),{current:i,currentChapter:b}=L(t),{addChapter:C,addEncounterToChapter:w,loadChapter:V,moveEncounterUp:s,moveEncounterDown:l,moveChapterUp:o,moveChapterDown:k,deleteEncounter:c,deleteChapter:d,addSection:_,deleteSection:v,addEncounterToSection:T,deleteEncounterFromSection:H,moveEncounterUpInSection:N,moveEncounterDownInSection:P,moveEncounterFromSectionToSection:F,moveEncounterFromChapterToSection:j,moveSectionUp:z,moveSectionDown:K}=t;return R({title:"Campaign Notes"}),{campaign:i,chapter:b,addChapter:C,addEncounter:w,loadChapter:V,moveEnUp:s,moveEnDown:l,moveChUp:o,moveChDown:k,deleteCampaignEncounter:c,deleteChapter:d,addSection:_,deleteSection:v,addEncounterToSection:T,deleteEncounterFromSection:H,moveEncounterUpInSection:N,moveEncounterDownInSection:P,moveEncounterFromSectionToSection:F,moveEncounterFromChapterToSection:j,moveSectionUp:z,moveSectionDown:K,marked:B}},props:["buildmode","showChapters"],data:function(){return{comp:this,section2:{title:"Please Select a Section",id:0}}},methods:{loadEncounter(t){this.$parent.$parent.$parent.loadEncounter(t)}}};const Q={key:0,class:"col-sm-12"},Y={class:"notes"},Z={key:0},x={key:1,class:"row"},ee={class:"col-sm-6"},te={class:"col-sm-6"},oe={class:"row"},se={key:0,class:"col-sm-3"},le={class:"sidenav nav flex-column nav-pill"},ne=["onClick"],ae=["onClick"],ie=["onClick"],de=["onClick"],re={key:0},ce={key:1,class:"row"},ue={class:"col-sm-12"},he={key:0},me=["href"],_e=["onClick"],pe=["onClick"],be=["onClick"],ke=["onClick"],ve={class:"form-check"},Ce=["onUpdate:modelValue"],$e=e("label",{class:"form-check-label"},"Complete",-1),ye={class:"form-check"},fe=["onUpdate:modelValue"],ge=e("label",{class:"form-check-label"},"Hide",-1),Me={key:0,style:{float:"right","max-width":"40%"}},Ue=["src","alt"],we=["innerHTML"],Ve=["innerHTML"],Te=e("h4",null,"Session Notes",-1),Se=["onUpdate:modelValue"],Ee={key:1},Le={class:"row"},Ae={class:"col-sm-6"},He=e("label",null,"Name",-1),Ne=["onClick"],Pe=["onClick"],De=["onClick"],Be=["onUpdate:modelValue"],Ie={class:"col-sm-6"},Re=e("label",null,"Runner Link",-1),Fe=["onUpdate:modelValue"],je={class:"row"},ze={class:"col-sm-6"},Ke=e("label",null,"Image URL",-1),Oe=["onUpdate:modelValue"],We={class:"col-sm-4"},Xe=e("label",null,"Flags",-1),qe={class:"form-check"},Ge=["onUpdate:modelValue"],Je=e("label",{class:"form-check-label"},"Random",-1),Qe={class:"form-check"},Ye=["onUpdate:modelValue"],Ze=e("label",{class:"form-check-label"},"Complete",-1),xe={class:"row"},et={class:"col-sm-6"},tt=e("label",null,"Encounter Text (markdown allowed)",-1),ot=["onUpdate:modelValue"],st=["innerHTML"],lt=e("label",null,"Potential Treasure (markdown allowed)",-1),nt=["onUpdate:modelValue"],at=["onClick"],it={key:0},dt=["onClick"],rt=["onClick"],ct=["onClick"],ut={class:"form-check"},ht=["onUpdate:modelValue"],mt=e("label",{class:"form-check-label"},"Complete",-1),_t={class:"form-check"},pt=["onUpdate:modelValue"],bt=e("label",{class:"form-check-label"},"Hide",-1),kt=["innerHTML"],vt={key:1},Ct={class:"row"},$t={class:"col-sm-12"},yt=e("label",null,"Title",-1),ft=["onClick"],gt=["onClick"],Mt=["onClick"],Ut=["onClick"],wt=["onUpdate:modelValue"],Vt={class:"form-check"},Tt=["onUpdate:modelValue"],St=e("label",{class:"form-check-label"},"Hide",-1),Et={key:0,class:"row"},Lt={class:"col-sm-6"},At=e("label",null,"Section Description (markdown allowed)",-1),Ht=["onUpdate:modelValue"],Nt=["innerHTML"],Pt={key:2},Dt={key:0},Bt=["href"],It=["onClick"],Rt=["onClick"],Ft=["onClick"],jt=["onClick"],zt={class:"form-check"},Kt=["onUpdate:modelValue"],Ot=e("label",{class:"form-check-label"},"Complete",-1),Wt={class:"form-check"},Xt=["onUpdate:modelValue"],qt=e("label",{class:"form-check-label"},"Hide",-1),Gt={key:0,style:{float:"right","max-width":"40%"}},Jt=["src","alt"],Qt=["innerHTML"],Yt=["innerHTML"],Zt=e("h4",null,"Session Notes",-1),xt=["onUpdate:modelValue"],eo={key:1},to=e("hr",null,null,-1),oo={class:"row"},so={class:"col-sm-6"},lo=e("label",null,"Name",-1),no=["onClick"],ao=["onClick"],io=["onClick"],ro=["onClick"],co=["onUpdate:modelValue"],uo={class:"col-sm-6"},ho=e("label",null,"Runner Link",-1),mo=["onUpdate:modelValue"],_o={class:"row"},po={class:"col-sm-6"},bo=e("label",null,"Image URL",-1),ko=["onUpdate:modelValue"],vo={class:"col-sm-4"},Co=e("label",null,"Flags",-1),$o={class:"form-check"},yo=["onUpdate:modelValue"],fo=e("label",{class:"form-check-label"},"Complete",-1),go={class:"row"},Mo={class:"col-sm-6"},Uo=e("label",null,"Encounter Text (markdown allowed)",-1),wo=["onUpdate:modelValue"],Vo=["innerHTML"],To=e("label",null,"Potential Treasure (markdown allowed)",-1),So=["onUpdate:modelValue"],Eo=["value"],Lo=["onClick"],Ao=["onClick"],Ho={key:3,class:"row"},No=e("hr",null,null,-1),Po={class:"btn-group"},Do=["onClick"],Bo={class:"row"},Io=e("hr",null,null,-1),Ro={class:"btn-group"};function Fo(t,i,b,C,w,V){return n(),a("div",null,[t.campaign?(n(),a("div",Q,[e("div",Y,[t.campaign.buildmode?r("",!0):(n(),a("h1",Z,[m(u(t.campaign.title)+" ",1),e("button",{onClick:i[0]||(i[0]=s=>t.campaign.buildmode=!0),class:"btn btn-primary"},"\u270E")])),t.campaign.buildmode?(n(),a("div",x,[e("label",ee,[m(" Campaign Title "),h(e("input",{type:"text","onUpdate:modelValue":i[1]||(i[1]=s=>t.campaign.title=s),class:"form-control"},null,512),[[p,t.campaign.title]]),m(),e("button",{onClick:i[2]||(i[2]=s=>t.campaign.buildmode=!1),class:"btn btn-primary"},"Done")]),e("label",te,[m(" URI (campaign information will be reachable via https://elthelas.com/tools/campaigns/"+u(t.campaign.url)+" ",1),h(e("input",{type:"text","onUpdate:modelValue":i[3]||(i[3]=s=>t.campaign.url=s),class:"form-control"},null,512),[[p,t.campaign.url]])])])):r("",!0),e("div",oe,[t.showChapters?(n(),a("div",se,[e("nav",le,[(n(!0),a(M,null,U(t.campaign.chapters,(s,l)=>(n(),a("li",{class:"navitem",key:s.id},[e("a",{href:"#",onClick:o=>t.loadChapter(s)},"Chapter "+u(l)+": "+u(s.title),9,ne),e("button",{onClick:o=>t.moveChUp(l)},"\u2191",8,ae),e("button",{onClick:o=>t.moveChDown(l)},"\u2193",8,ie),e("button",{onClick:o=>t.deleteChapter(l)},"\u{1F5D1}",8,de)]))),128))]),e("button",{class:"btn btn-primary",onClick:i[4]||(i[4]=s=>t.addChapter()),style:{"margin-top":"12px"}},"Add Chapter")])):r("",!0),e("div",{class:S(t.showChapters?"col-sm-9":"col-sm-12")},[t.chapter.buildmode?r("",!0):(n(),a("h2",re,[m(u(t.chapter.title)+" ",1),e("button",{onClick:i[5]||(i[5]=s=>t.chapter.buildmode=!0),class:"btn btn-primary"},"\u270E")])),t.chapter.buildmode?(n(),a("div",ce,[e("label",ue,[m(" Chapter Title "),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":i[6]||(i[6]=s=>t.chapter.title=s)},null,512),[[p,t.chapter.title]])]),e("button",{onClick:i[7]||(i[7]=s=>t.chapter.buildmode=!1),class:"btn btn-primary"},"Done")])):r("",!0),(n(!0),a(M,null,U(t.chapter.encounters,(s,l)=>(n(),a("div",{key:s.id,class:S(s.complete?"complete":"")},[s.buildmode?r("",!0):(n(),a("div",he,[e("h3",null,[e("a",{href:s.link,target:"_blank"},u(s.name),9,me),e("button",{onClick:o=>t.moveEnUp(l)},"\u2191",8,_e),e("button",{onClick:o=>t.moveEnDown(l)},"\u2193",8,pe),e("button",{onClick:o=>t.loadEncounter(s.link),class:"btn btn-success"},"Run in Tab",8,be)]),e("button",{class:"btn btn-primary",onClick:o=>{s.buildmode=!0}},"\u270E",8,ke),e("div",ve,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.complete=o},null,8,Ce),[[g,s.complete]]),$e]),e("div",ye,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.closed=o},null,8,fe),[[g,s.closed]]),ge]),s.image&&!s.closed?(n(),a("div",Me,[e("img",{src:s.image,alt:s.name},null,8,Ue)])):r("",!0),s.closed?r("",!0):(n(),a("div",{key:1,innerHTML:t.marked.parse(s.text)},null,8,we)),s.closed?r("",!0):(n(),a("div",{key:2,innerHTML:t.marked.parse(s.treasure)},null,8,Ve)),e("div",null,[Te,h(e("textarea",{"onUpdate:modelValue":o=>s.sessionnotes=o,class:"form-control"},null,8,Se),[[p,s.sessionnotes]])])])),s.buildmode?(n(),a("div",Ee,[e("div",Le,[e("div",Ae,[He,e("button",{onClick:o=>t.moveEnUp(l)},"\u2191",8,Ne),e("button",{onClick:o=>t.moveEnDown(l)},"\u2193",8,Pe),e("button",{onClick:o=>t.deleteEncounter(l)},"\u{1F5D1}",8,De),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o=>s.name=o},null,8,Be),[[p,s.name]])]),e("div",Ie,[Re,h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o=>s.link=o},null,8,Fe),[[p,s.link]])])]),e("div",je,[e("div",ze,[Ke,h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o=>s.image=o},null,8,Oe),[[p,s.image]])]),e("div",We,[Xe,e("div",qe,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.random=o},null,8,Ge),[[g,s.random]]),Je]),e("div",Qe,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.complete=o},null,8,Ye),[[g,s.complete]]),Ze])])]),e("div",xe,[e("div",et,[tt,h(e("textarea",{"onUpdate:modelValue":o=>s.text=o,class:"form-control encounterbox"},null,8,ot),[[p,s.text]])]),e("div",{class:"col-sm-6",innerHTML:t.marked.parse(s.text)},null,8,st)]),e("div",null,[lt,h(e("textarea",{"onUpdate:modelValue":o=>s.treasure=o,class:"form-control"},null,8,nt),[[p,s.treasure]])]),e("button",{onClick:o=>s.buildmode=!1,class:"btn btn-primary"},"Done",8,at)])):r("",!0)],2))),128)),(n(!0),a(M,null,U(t.chapter.sections,(s,l)=>(n(),a("div",{key:s.id,class:S(s.complete?"complete":"")},[s.buildmode?r("",!0):(n(),a("div",it,[e("h3",null,[m(u(s.title)+" ",1),e("button",{onClick:o=>t.moveSectionUp(l),class:"btn btn-sm"},"\u2191",8,dt),e("button",{onClick:o=>t.moveSectionDown(l),class:"btn btn-sm"},"\u2193",8,rt),e("button",{onClick:o=>s.buildmode=!0,class:"btn btn-sm"},"\u270E",8,ct)]),e("div",ut,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.complete=o},null,8,ht),[[g,s.complete]]),mt]),e("div",_t,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.hidden=o},null,8,pt),[[g,s.hidden]]),bt]),s.hidden?r("",!0):(n(),a("div",{key:0,innerHTML:t.marked.parse(s.description)},null,8,kt))])),s.buildmode?(n(),a("div",vt,[e("div",Ct,[e("div",$t,[yt,e("button",{onClick:o=>t.moveSectionUp(l),class:"btn btn-sm"},"\u2191",8,ft),e("button",{onClick:o=>t.moveSectionDown(l),class:"btn btn-sm"},"\u2193",8,gt),e("button",{onClick:o=>t.deleteSection(s),class:"btn btn-sm"},"\u{1F5D1}",8,Mt),e("button",{onClick:o=>s.buildmode=!1,class:"btn btn-sm"},"Done",8,Ut),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o=>s.title=o},null,8,wt),[[p,s.title]])])]),e("div",Vt,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.hidden=o},null,8,Tt),[[g,s.hidden]]),St]),s.hidden?r("",!0):(n(),a("div",Et,[e("div",Lt,[At,h(e("textarea",{"onUpdate:modelValue":o=>s.description=o,class:"form-control encounterbox"},null,8,Ht),[[p,s.description]])]),e("div",{class:"col-sm-6",innerHTML:t.marked.parse(s.description)},null,8,Nt)]))])):r("",!0),s.hidden?r("",!0):(n(),a("div",Pt,[(n(!0),a(M,null,U(s.encounters,(o,k)=>(n(),a("div",{key:o.id,class:S(o.complete?"complete":"")},[o.buildmode?r("",!0):(n(),a("div",Dt,[e("h4",null,[e("a",{href:o.link,target:"_blank"},u(o.name),9,Bt),e("button",{onClick:c=>t.moveEncounterUpInSection({section:s,index:k}),class:"btn btn-xs"},"\u2191",8,It),e("button",{onClick:c=>t.moveEncounterDownInSection({section:s,index:k}),class:"btn btn-xs"},"\u2193",8,Rt),e("button",{onClick:c=>t.loadEncounter(o.link),class:"btn btn-success btn-xs"},"Run in Tab",8,Ft),e("button",{onClick:c=>o.buildmode=!0,class:"btn btn-xs"},"\u270E",8,jt)]),e("div",zt,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":c=>o.complete=c},null,8,Kt),[[g,o.complete]]),Ot]),e("div",Wt,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":c=>o.closed=c},null,8,Xt),[[g,o.closed]]),qt]),o.image&&!o.closed?(n(),a("div",Gt,[e("img",{src:o.image,alt:o.name},null,8,Jt)])):r("",!0),o.closed?r("",!0):(n(),a("div",{key:1,innerHTML:t.marked.parse(o.text)},null,8,Qt)),o.closed?r("",!0):(n(),a("div",{key:2,innerHTML:t.marked.parse(o.treasure)},null,8,Yt)),e("div",null,[Zt,h(e("textarea",{"onUpdate:modelValue":c=>o.sessionnotes=c,class:"form-control"},null,8,xt),[[p,o.sessionnotes]])])])),o.buildmode?(n(),a("div",eo,[to,e("div",oo,[e("div",so,[lo,e("button",{onClick:c=>t.moveEncounterUpInSection({section:s,index:k}),class:"btn btn-xs"},"\u2191",8,no),e("button",{onClick:c=>t.moveEncounterDownInSection({section:s,index:k}),class:"btn btn-sm"},"\u2193",8,ao),e("button",{onClick:c=>t.deleteEncounterFromSection({section:s,encounter:o}),class:"btn btn-xs"},"\u{1F5D1}",8,io),e("button",{onClick:c=>o.buildmode=!1,class:"btn btn-xs"},"Done",8,ro),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.name=c},null,8,co),[[p,o.name]])]),e("div",uo,[ho,h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.link=c},null,8,mo),[[p,o.link]])])]),e("div",_o,[e("div",po,[bo,h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.image=c},null,8,ko),[[p,o.image]])]),e("div",vo,[Co,e("div",$o,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":c=>o.complete=c},null,8,yo),[[g,o.complete]]),fo])])]),e("div",go,[e("div",Mo,[Uo,h(e("textarea",{"onUpdate:modelValue":c=>o.text=c,class:"form-control"},null,8,wo),[[p,o.text]])]),e("div",{class:"col-sm-6",innerHTML:t.marked.parse(o.text)},null,8,Vo)]),e("div",null,[To,h(e("textarea",{"onUpdate:modelValue":c=>o.treasure=c,class:"form-control"},null,8,So),[[p,o.treasure]])]),e("div",null,[m(" Move to Section "),h(e("select",{"onUpdate:modelValue":i[8]||(i[8]=c=>t.section2=c),class:"form-control form-control-sm"},[(n(!0),a(M,null,U(t.chapter.sections,c=>(n(),a("option",{key:c.id,value:c},u(s.title),9,Eo))),128))],512),[[O,t.section2]]),e("button",{class:"btn btn-success btn-sm",onClick:c=>t.moveEncounterFromSectionToSection({section1:s,section2:t.section2,encounter:o})},"Go",8,Lo),e("button",{class:"btn btn-primary btn-sm",onClick:c=>t.addEncounterToSection({section:s,index:k+1})},"Add Encounter After This One",8,Ao)])])):r("",!0)],2))),128))])),s.hidden?r("",!0):(n(),a("div",Ho,[No,e("div",Po,[e("button",{class:"btn btn-primary",onClick:o=>t.addEncounterToSection({section:s,index:s.encounters.length})},"Add Encounter",8,Do)])]))],2))),128)),e("div",Bo,[Io,e("div",Ro,[e("button",{class:"btn btn-primary",onClick:i[9]||(i[9]=s=>t.addSection())},"Add Section")])])],2)])])])):r("",!0)])}const jo=A(J,[["render",Fo]]),zo={setup(){const t=E(),{current:i,campaignCharacters:b}=L(t),{invitePCToCampaign:C,fetchCampaignCharacter:w}=t,{skillMod:V,statMod:s,saveMod:l,statTotal:o,initMod:k,acCalc:c,profbonus:d,armorAC:_}=W;return{campaign:i,pcs:b,invitePC:C,fetchCampaignCharacter:w,skillMod:V,statMod:s,saveMod:l,statTotal:o,initMod:k,acCalc:c,armorAC:_,profbonus:d,marked:B}},data:function(){return{pcid:""}},methods:{addToCampaign(){this.campaign.playercharacters.push(this.pcid),this.fetchCampaignCharacter(this.pcid),this.pcid=""},reloadCharacter(t){let i=this.pcs.findIndex(b=>b._id===t._id);this.pcs.splice(i,1),this.fetchCampaignCharacter(t._id)},rollCheck(t){let i=I.roll("1d20").total,b=I.roll("1d20").total;alert("Base Roll: "+(i+t)+" ("+i+" + "+t+`)
Adv/Dis Roll: `+(b+t)+" ("+b+" + "+t+")")},removeFromCampaign(t){let i=this.campaign.playercharacters.findIndex(C=>C===t._id);this.campaign.playercharacters.splice(i,1);let b=this.pcs.findIndex(C=>C._id===t._id);this.pcs.splice(b,1)}}},Ko={class:"row"},Oo={class:"btn-group"},Wo=["onClick"],Xo=["onClick"],qo={class:"row"},Go={class:"col-6"},Jo={class:"charsheet-static center"},Qo=e("br",null,null,-1),Yo={class:"col-6"},Zo={class:"charsheet-static center"},xo={key:0},es={class:"abilitytable"},ts=e("thead",null,[e("tr",null,[e("th",null,"Ability"),e("th",null,"Score"),e("th",null,"Mod"),e("th",null,"Save")])],-1),os=e("th",null,"STR",-1),ss=["onClick"],ls={key:0},ns=["onClick"],as={key:0},is=e("th",null,"DEX",-1),ds=["onClick"],rs={key:0},cs=["onClick"],us={key:0},hs=e("th",null,"CON",-1),ms=["onClick"],_s={key:0},ps=["onClick"],bs={key:0},ks=e("th",null,"INT",-1),vs=["onClick"],Cs={key:0},$s=["onClick"],ys={key:0},fs=e("th",null,"WIS",-1),gs=["onClick"],Ms={key:0},Us=["onClick"],ws={key:0},Vs=e("th",null,"CHA",-1),Ts=["onClick"],Ss={key:0},Es=["onClick"],Ls={key:0},As={class:"abilitytable"},Hs=e("thead",null,[e("tr",null,[e("th",null,"Skill"),e("th",null,"Mod")])],-1),Ns=["onClick"],Ps={key:0},Ds={class:"charsheet-static"},Bs=e("h5",null,"Proficiencies and Languages",-1),Is={style:{"font-size":"9px","margin-bottom":"2px"}},Rs=e("strong",null,"Armor: ",-1),Fs={style:{"font-size":"9px","margin-bottom":"2px"}},js=e("strong",null,"Weapons: ",-1),zs={style:{"font-size":"9px","margin-bottom":"2px"}},Ks=e("strong",null,"Tools: ",-1),Os={style:{"font-size":"9px","margin-bottom":"2px"}},Ws=e("strong",null,"Saves: ",-1),Xs=["innerHTML"];function qs(t,i,b,C,w,V){const s=y("router-link");return n(),a("div",null,[m(" PC Manager "),h(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=l=>t.pcid=l)},null,512),[[p,t.pcid]]),e("button",{class:"btn btn-success",onClick:i[1]||(i[1]=l=>t.addToCampaign())},"Add PC"),e("div",Ko,[(n(!0),a(M,null,U(t.pcs,l=>(n(),a("div",{key:l._id,class:"col-sm-3"},[e("h4",null,[$(s,{to:"/tools/charbuilder/"+l._id,target:"_blank"},{default:f(()=>[m(u(l.name),1)]),_:2},1032,["to"])]),e("div",Oo,[e("button",{onClick:o=>t.reloadCharacter(l),class:"btn btn-success"},"Reload",8,Wo),e("button",{onClick:o=>t.removeFromCampaign(l),class:"btn btn-danger"},"Remove",8,Xo)]),e("div",qo,[e("div",Go,[e("div",Jo,[m(" AC"),Qo,m(u(t.acCalc(l)),1)])]),e("div",Yo,[e("div",Zo,[m(" Initiative: "),t.initMod(l)>-1?(n(),a("span",xo,"+")):r("",!0),m(u(t.initMod(l)),1)])])]),e("table",es,[ts,e("tbody",null,[e("tr",null,[os,e("td",null,u(t.statTotal(l,0)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,0))},[t.statMod(l,0)>-1?(n(),a("span",ls,"+")):r("",!0),m(u(t.statMod(l,0)),1)],8,ss)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,0))},[t.saveMod(l,0)>-1?(n(),a("span",as,"+")):r("",!0),m(u(t.saveMod(l,0)),1)],8,ns)])]),e("tr",null,[is,e("td",null,u(t.statTotal(l,1)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,1))},[t.statMod(l,1)>-1?(n(),a("span",rs,"+")):r("",!0),m(u(t.statMod(l,1)),1)],8,ds)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,1))},[t.saveMod(l,1)>-1?(n(),a("span",us,"+")):r("",!0),m(u(t.saveMod(l,1)),1)],8,cs)])]),e("tr",null,[hs,e("td",null,u(t.statTotal(l,2)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,2))},[t.statMod(l,2)>-1?(n(),a("span",_s,"+")):r("",!0),m(u(t.statMod(l,2)),1)],8,ms)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,2))},[t.saveMod(l,2)>-1?(n(),a("span",bs,"+")):r("",!0),m(u(t.saveMod(l,2)),1)],8,ps)])]),e("tr",null,[ks,e("td",null,u(t.statTotal(l,3)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,3))},[t.statMod(l,3)>-1?(n(),a("span",Cs,"+")):r("",!0),m(u(t.statMod(l,3)),1)],8,vs)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,3))},[t.saveMod(l,3)>-1?(n(),a("span",ys,"+")):r("",!0),m(u(t.saveMod(l,3)),1)],8,$s)])]),e("tr",null,[fs,e("td",null,u(t.statTotal(l,4)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,4))},[t.statMod(l,4)>-1?(n(),a("span",Ms,"+")):r("",!0),m(u(t.statMod(l,4)),1)],8,gs)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,4))},[t.saveMod(l,4)>-1?(n(),a("span",ws,"+")):r("",!0),m(u(t.saveMod(l,4)),1)],8,Us)])]),e("tr",null,[Vs,e("td",null,u(t.statTotal(l,5)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,5))},[t.statMod(l,5)>-1?(n(),a("span",Ss,"+")):r("",!0),m(u(t.statMod(l,5)),1)],8,Ts)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,5))},[t.saveMod(l,5)>-1?(n(),a("span",Ls,"+")):r("",!0),m(u(t.saveMod(l,5)),1)],8,Es)])])])]),e("table",As,[Hs,e("tbody",null,[(n(!0),a(M,null,U(l.skills,o=>(n(),a("tr",{key:o.name},[e("th",null,u(o.name),1),e("td",null,[e("button",{onClick:k=>t.rollCheck(t.skillMod(l,o))},[t.skillMod(l,o)>-1?(n(),a("span",Ps,"+")):r("",!0),m(u(t.skillMod(l,o)),1)],8,Ns)])]))),128))])]),e("div",Ds,[Bs,e("p",Is,[Rs,m(u(l.charclasses[0].thisclass.proficiencies.armor.join(", ")),1)]),e("p",Fs,[js,m(u(l.charclasses[0].thisclass.proficiencies.weapons.join(", ")),1)]),e("p",zs,[Ks,m(u(l.charclasses[0].thisclass.proficiencies.tools.join(", ")),1)]),e("p",Os,[Ws,m(u(l.charclasses[0].thisclass.proficiencies["saving throws"].join(", ")),1)]),e("p",{innerHTML:l.proficiencies,style:{"font-size":"9px","margin-bottom":"2px"}},null,8,Xs)])]))),128))])])}const Gs=A(zo,[["render",qs]]),Js={setup(){const t=E(),{current:i}=L(t);return{campaign:i,marked:B}},props:{buildmode:Boolean},computed:{availableChapters:function(){let t=[];return this.campaign.chapters.forEach(i=>{t.push({value:i.title,text:i.title})}),t},filteredNPCs:function(){let t=[];return this.campaign.npcs.forEach(i=>{(this.filterByChapter==="all"||i.chapters.includes("all")||i.chapters.includes(this.filterByChapter))&&t.push(i)}),t}},data:function(){return{filterByChapter:"all"}},methods:{newNPC(){this.campaign.npcs.push({id:Math.random(),name:"New NPC",editMode:!0,job:"",relation:"",link:"",skills:"",location:"",motivations:"",history:"",chapters:["all"],show:!0})},switchEditMode(t){t.editMode=!t.editMode},deleteNPC(t){let i=this.campaign.npcs.findIndex(b=>b.id===t.id);window.confirm("Are you sure you want to delete "+t.name+"?")&&this.campaign.npcs.splice(i,1)}}},Qs={key:0},Ys=["onUpdate:modelValue"],Zs=["onClick"],xs=["onClick"],el=["onClick"],tl={key:0},ol={key:1},sl={key:0},ll={class:"row"},nl={class:"col-sm-2"},al=e("strong",null,"Job: ",-1),il={key:0},dl=["onUpdate:modelValue"],rl={class:"col-sm-3"},cl=e("strong",null,"Relation to Party:",-1),ul={key:0},hl=["onUpdate:modelValue"],ml={class:"col-sm-7"},_l=e("strong",null,"Link to Stats",-1),pl={key:1},bl=["onUpdate:modelValue"],kl={class:"row"},vl={class:"col-sm-2"},Cl=e("strong",null,"Location:",-1),$l={key:0},yl=["onUpdate:modelValue"],fl={class:"col-sm-10"},gl=e("strong",null,"Relevant Chapters:",-1),Ml={class:"row"},Ul={class:"col-sm-12"},wl=e("strong",null,"History: ",-1),Vl=["innerHTML"],Tl=["onUpdate:modelValue"],Sl={class:"row"},El={class:"col-sm-12"},Ll=e("strong",null,"Motivations: ",-1),Al=["innerHTML"],Hl=["onUpdate:modelValue"];function Nl(t,i,b,C,w,V){const s=y("b-form-radio"),l=y("b-form-radio-group"),o=y("router-link"),k=y("b-form-checkbox"),c=y("b-form-checkbox-group");return n(),a("div",null,[e("button",{onClick:i[0]||(i[0]=d=>t.newNPC())},"Add NPC"),e("div",null,[e("label",null,[m(" Filter By Chapter: "),$(l,{modelValue:t.filterByChapter,"onUpdate:modelValue":i[1]||(i[1]=d=>t.filterByChapter=d),options:t.availableChapters,name:"filterByChapter"},{default:f(()=>[$(s,{value:"all"},{default:f(()=>[m("All")]),_:1})]),_:1},8,["modelValue","options"])])]),(n(!0),a(M,null,U(t.filteredNPCs,d=>(n(),a("div",{key:d.id,class:"card"},[e("h3",null,[d.editMode?r("",!0):(n(),a("span",Qs,u(d.name),1)),d.editMode?h((n(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":_=>d.name=_},null,8,Ys)),[[p,d.name]]):r("",!0),e("button",{class:"btn-symbol btn-sm",onClick:_=>t.switchEditMode(d)},"\u270E",8,Zs),e("button",{class:"btn-symbol btn-sm",onClick:_=>t.deleteNPC(d)},"\u{1F5D1}",8,xs),e("button",{type:"button",class:"btn btn-primary float-right",onClick:_=>d.show=!d.show},[d.show?(n(),a("span",tl,"\u25B2")):r("",!0),d.show?r("",!0):(n(),a("span",ol,"\u25BC"))],8,el)]),d.show?(n(),a("div",sl,[e("div",ll,[e("label",nl,[al,d.editMode?r("",!0):(n(),a("span",il,u(d.job),1)),d.editMode?h((n(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":_=>d.job=_},null,8,dl)),[[p,d.job]]):r("",!0)]),e("label",rl,[cl,d.editMode?r("",!0):(n(),a("span",ul,u(d.relation),1)),d.editMode?h((n(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":_=>d.relation=_},null,8,hl)),[[p,d.relation]]):r("",!0)]),e("label",ml,[d.editMode?r("",!0):(n(),D(o,{key:0,to:d.link,target:"_blank"},{default:f(()=>[_l]),_:2},1032,["to"])),d.editMode?(n(),a("strong",pl,"Link to Stats")):r("",!0),d.editMode?h((n(),a("input",{key:2,type:"text",class:"form-control","onUpdate:modelValue":_=>d.link=_},null,8,bl)),[[p,d.link]]):r("",!0)])]),e("div",kl,[e("label",vl,[Cl,d.editMode?r("",!0):(n(),a("span",$l,u(d.location),1)),d.editMode?h((n(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":_=>d.location=_},null,8,yl)),[[p,d.location]]):r("",!0)]),e("label",fl,[gl,d.editMode?r("",!0):(n(!0),a(M,{key:0},U(d.chapters,_=>(n(),a("span",{key:_},u(_),1))),128)),d.editMode?(n(),D(c,{key:1,modelValue:d.chapters,"onUpdate:modelValue":_=>d.chapters=_,options:t.availableChapters},{default:f(()=>[$(k,{value:"all"},{default:f(()=>[m("All")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","options"])):r("",!0)])]),e("div",Ml,[e("label",Ul,[wl,d.editMode?r("",!0):(n(),a("span",{key:0,innerHTML:t.marked.parse(d.history)},null,8,Vl)),d.editMode?h((n(),a("textarea",{key:1,"onUpdate:modelValue":_=>d.history=_,class:"form-control"},null,8,Tl)),[[p,d.history]]):r("",!0)])]),e("div",Sl,[e("label",El,[Ll,d.editMode?r("",!0):(n(),a("span",{key:0,innerHTML:t.marked.parse(d.motivations)},null,8,Al)),d.editMode?h((n(),a("textarea",{key:1,"onUpdate:modelValue":_=>d.motivations=_,class:"form-control"},null,8,Hl)),[[p,d.motivations]]):r("",!0)])])])):r("",!0)]))),128))])}const Pl=A(Js,[["render",Nl]]),Dl={setup(){const t=E(),i=X(),{campaigns:b,current:C,currentChapter:w,campaignCharacters:V}=L(t),{getUserInfo:s,isLoggedIn:l}=i,{getAllCampaigns:o,getAllCampaignsSilent:k,saveNewCampaign:c,saveCampaign:d,loadCampaign:_,loadCampaignById:v,loadCampaignByUrl:T,deleteCampaign:H,newCampaign:N}=t;let P=C.buildmode;return R({title:"Campaign Builder"}),{campaigns:t,userinfo:i,allCampaigns:b,campaign:C,chapter:w,pcs:V,token:s,loggedin:l,buildmode:P,getAll:o,getAllSilent:k,saveNew:c,save:d,load:_,loadById:v,loadByUrl:T,deleteCamp:H,newCamp:N}},components:{notes:jo,pcmanager:Gs,npcmanager:Pl,runner:G,modal:q},data:function(){return{comp:this,showChapters:!0,creArray:[],charArray:[],runnerKey:0,activeTab:0,modalProps:{isActive:!1}}},watch:{campaign:{handler(){this.campaign._id&&this.loggedin&&this.save()},deep:!0}},methods:{loadEncounter(t){this.creArray=t.substr(t.search("runner/")+7).split("&"),this.charArray=this.pcs,this.runnerKey++,this.activeTab=3,window.scroll(1,300)},showLoadModal(){this.modalProps.isActive=!0}},created(){this.getAllSilent().then(()=>{this.$route.params.campaign&&this.loadByUrl({url:this.$route.params.campaign})})}},Bl={class:"col-sm-12"},Il={class:"btn-group"},Rl={key:0},Fl={key:1},jl={class:"table table-striped"},zl=e("tr",null,[e("th",null,"Campaign Name"),e("th",null,"-")],-1),Kl=["onClick"],Ol=["onClick"];function Wl(t,i,b,C,w,V){const s=y("notes"),l=y("b-tab"),o=y("pcmanager"),k=y("npcmanager"),c=y("runner"),d=y("b-tabs"),_=y("modal");return n(),a("div",Bl,[e("div",Il,[t.campaign._id?(n(),a("button",{key:0,class:"btn btn-primary",onClick:i[0]||(i[0]=v=>t.save())},"Save")):r("",!0),t.campaign._id?r("",!0):(n(),a("button",{key:1,class:"btn btn-primary",onClick:i[1]||(i[1]=v=>t.saveNew())},"Save New")),e("button",{class:"btn btn-success",onClick:i[2]||(i[2]=v=>{t.getAllSilent(),t.showLoadModal()})},"Load"),e("button",{class:"btn btn-warning",onClick:i[3]||(i[3]=v=>t.newCamp())},"New Campaign"),e("button",{class:"btn btn-primary",onClick:i[4]||(i[4]=v=>t.showChapters=!t.showChapters)},[t.showChapters?(n(),a("span",Rl,"Hide")):(n(),a("span",Fl,"Show")),m(" Chapters")])]),$(d,{modelValue:t.activeTab,"onUpdate:modelValue":i[5]||(i[5]=v=>t.activeTab=v)},{default:f(()=>[$(l,{title:"Notes"},{default:f(()=>[$(s,{buildmode:t.buildmode,"show-chapters":t.showChapters},null,8,["buildmode","show-chapters"])]),_:1}),$(l,{title:"PC Manager"},{default:f(()=>[$(o)]),_:1}),$(l,{title:"NPCs"},{default:f(()=>[$(k,{buildmode:t.buildmode},null,8,["buildmode"])]),_:1}),$(l,{title:"Encounter Runner"},{default:f(()=>[(n(),D(c,{"cre-array":t.creArray,"char-array":t.charArray,key:t.runnerKey},null,8,["cre-array","char-array"]))]),_:1})]),_:1},8,["modelValue"]),$(_,{id:"campaignmodal",title:"Load File from Server",modalProps:t.modalProps},{default:f(()=>[e("table",jl,[zl,(n(!0),a(M,null,U(t.allCampaigns,v=>(n(),a("tr",{key:v._id},[e("td",null,[e("a",{class:"clickable",onClick:T=>{t.load({campaign:v,comp:t.comp}),t.modalProps.isActive=!1}},u(v.title),9,Kl)]),e("td",null,[e("input",{type:"button",onClick:T=>t.deleteCamp(v),class:"btn btn-danger",value:"X"},null,8,Ol)])]))),128))])]),_:1},8,["modalProps"])])}const Jl=A(Dl,[["render",Wl]]);export{Jl as default};
