import{M as L,s as A,B as F,m as B,_ as H,o as n,c as a,a as e,e as m,t as u,d as r,n as h,v as p,F as U,r as w,q as E,A as M,C as W,z as R,g as X,h as f,i as y,w as g,p as q,f as G,K as D,k as J,l as Q}from"./index.js";import Y from"./runner.js";import"./creaturecalc.js";const Z={setup(){const t=L(),{current:i,currentChapter:b}=A(t),{addChapter:C,addEncounterToChapter:V,loadChapter:S,moveEncounterUp:s,moveEncounterDown:l,moveChapterUp:o,moveChapterDown:k,deleteEncounter:c,deleteChapter:d,addSection:_,deleteSection:v,addEncounterToSection:T,deleteEncounterFromSection:N,moveEncounterUpInSection:P,moveEncounterDownInSection:I,moveEncounterFromSectionToSection:j,moveEncounterFromChapterToSection:z,moveSectionUp:K,moveSectionDown:O}=t;return F({title:"Campaign Notes"}),{campaign:i,chapter:b,addChapter:C,addEncounter:V,loadChapter:S,moveEnUp:s,moveEnDown:l,moveChUp:o,moveChDown:k,deleteCampaignEncounter:c,deleteChapter:d,addSection:_,deleteSection:v,addEncounterToSection:T,deleteEncounterFromSection:N,moveEncounterUpInSection:P,moveEncounterDownInSection:I,moveEncounterFromSectionToSection:j,moveEncounterFromChapterToSection:z,moveSectionUp:K,moveSectionDown:O,marked:B}},props:["buildmode","showChapters"],data:function(){return{comp:this,section2:{title:"Please Select a Section",id:0}}},methods:{loadEncounter(t){this.$parent.$parent.$parent.loadEncounter(t)}}};const x={key:0,class:"col-sm-12"},ee={class:"notes"},te={key:0},oe={key:1,class:"row"},se={class:"col-sm-6"},le={class:"col-sm-6"},ne={class:"row"},ae={key:0,class:"col-sm-3"},ie={class:"sidenav nav flex-column nav-pill"},de=["onClick"],re=["onClick"],ce=["onClick"],ue=["onClick"],he={key:0},me={key:1,class:"row"},_e={class:"col-sm-12"},pe={key:0},be=["href"],ke=["onClick"],ve=["onClick"],Ce=["onClick"],$e=["onClick"],ye={class:"form-check"},fe=["onUpdate:modelValue"],ge=e("label",{class:"form-check-label"},"Complete",-1),Me={class:"form-check"},Ue=["onUpdate:modelValue"],we=e("label",{class:"form-check-label"},"Hide",-1),Ve={key:0,style:{float:"right","max-width":"40%"}},Se=["src","alt"],Te=["innerHTML"],Ee=["innerHTML"],Le=e("h4",null,"Session Notes",-1),Ae=["onUpdate:modelValue"],He={key:1},Ne={class:"row"},Pe={class:"col-sm-6"},Ie=e("label",null,"Name",-1),De=["onClick"],Be=["onClick"],Re=["onClick"],Fe=["onUpdate:modelValue"],je={class:"col-sm-6"},ze=e("label",null,"Runner Link",-1),Ke=["onUpdate:modelValue"],Oe={class:"row"},We={class:"col-sm-6"},Xe=e("label",null,"Image URL",-1),qe=["onUpdate:modelValue"],Ge={class:"col-sm-4"},Je=e("label",null,"Flags",-1),Qe={class:"form-check"},Ye=["onUpdate:modelValue"],Ze=e("label",{class:"form-check-label"},"Random",-1),xe={class:"form-check"},et=["onUpdate:modelValue"],tt=e("label",{class:"form-check-label"},"Complete",-1),ot={class:"row"},st={class:"col-sm-6"},lt=e("label",null,"Encounter Text (markdown allowed)",-1),nt=["onUpdate:modelValue"],at=["innerHTML"],it=e("label",null,"Potential Treasure (markdown allowed)",-1),dt=["onUpdate:modelValue"],rt=["onClick"],ct={key:0},ut=["onClick"],ht=["onClick"],mt=["onClick"],_t={class:"form-check"},pt=["onUpdate:modelValue"],bt=e("label",{class:"form-check-label"},"Complete",-1),kt={class:"form-check"},vt=["onUpdate:modelValue"],Ct=e("label",{class:"form-check-label"},"Hide",-1),$t=["innerHTML"],yt={key:1},ft={class:"row"},gt={class:"col-sm-12"},Mt=e("label",null,"Title",-1),Ut=["onClick"],wt=["onClick"],Vt=["onClick"],St=["onClick"],Tt=["onUpdate:modelValue"],Et={class:"form-check"},Lt=["onUpdate:modelValue"],At=e("label",{class:"form-check-label"},"Hide",-1),Ht={key:0,class:"row"},Nt={class:"col-sm-6"},Pt=e("label",null,"Section Description (markdown allowed)",-1),It=["onUpdate:modelValue"],Dt=["innerHTML"],Bt={key:2},Rt={key:0},Ft=["href"],jt=["onClick"],zt=["onClick"],Kt=["onClick"],Ot=["onClick"],Wt={class:"form-check"},Xt=["onUpdate:modelValue"],qt=e("label",{class:"form-check-label"},"Complete",-1),Gt={class:"form-check"},Jt=["onUpdate:modelValue"],Qt=e("label",{class:"form-check-label"},"Hide",-1),Yt={key:0,style:{float:"right","max-width":"40%"}},Zt=["src","alt"],xt=["innerHTML"],eo=["innerHTML"],to=e("h4",null,"Session Notes",-1),oo=["onUpdate:modelValue"],so={key:1},lo=e("hr",null,null,-1),no={class:"row"},ao={class:"col-sm-6"},io=e("label",null,"Name",-1),ro=["onClick"],co=["onClick"],uo=["onClick"],ho=["onClick"],mo=["onUpdate:modelValue"],_o={class:"col-sm-6"},po=e("label",null,"Runner Link",-1),bo=["onUpdate:modelValue"],ko={class:"row"},vo={class:"col-sm-6"},Co=e("label",null,"Image URL",-1),$o=["onUpdate:modelValue"],yo={class:"col-sm-4"},fo=e("label",null,"Flags",-1),go={class:"form-check"},Mo=["onUpdate:modelValue"],Uo=e("label",{class:"form-check-label"},"Complete",-1),wo={class:"row"},Vo={class:"col-sm-6"},So=e("label",null,"Encounter Text (markdown allowed)",-1),To=["onUpdate:modelValue"],Eo=["innerHTML"],Lo=e("label",null,"Potential Treasure (markdown allowed)",-1),Ao=["onUpdate:modelValue"],Ho=["value"],No=["onClick"],Po=["onClick"],Io={key:3,class:"row"},Do=e("hr",null,null,-1),Bo={class:"btn-group"},Ro=["onClick"],Fo={class:"row"},jo=e("hr",null,null,-1),zo={class:"btn-group"};function Ko(t,i,b,C,V,S){return n(),a("div",null,[t.campaign?(n(),a("div",x,[e("div",ee,[t.campaign.buildmode?r("",!0):(n(),a("h1",te,[m(u(t.campaign.title)+" ",1),e("button",{onClick:i[0]||(i[0]=s=>t.campaign.buildmode=!0),class:"btn btn-primary"},"\u270E")])),t.campaign.buildmode?(n(),a("div",oe,[e("label",se,[m(" Campaign Title "),h(e("input",{type:"text","onUpdate:modelValue":i[1]||(i[1]=s=>t.campaign.title=s),class:"form-control"},null,512),[[p,t.campaign.title]]),m(),e("button",{onClick:i[2]||(i[2]=s=>t.campaign.buildmode=!1),class:"btn btn-primary"},"Done")]),e("label",le,[m(" URI (campaign information will be reachable via https://elthelas.com/tools/campaigns/"+u(t.campaign.url)+" ",1),h(e("input",{type:"text","onUpdate:modelValue":i[3]||(i[3]=s=>t.campaign.url=s),class:"form-control"},null,512),[[p,t.campaign.url]])])])):r("",!0),e("div",ne,[t.showChapters?(n(),a("div",ae,[e("nav",ie,[(n(!0),a(U,null,w(t.campaign.chapters,(s,l)=>(n(),a("li",{class:"navitem",key:s.id},[e("a",{href:"#",onClick:o=>t.loadChapter(s)},"Chapter "+u(l)+": "+u(s.title),9,de),e("button",{onClick:o=>t.moveChUp(l)},"\u2191",8,re),e("button",{onClick:o=>t.moveChDown(l)},"\u2193",8,ce),e("button",{onClick:o=>t.deleteChapter(l)},"\u{1F5D1}",8,ue)]))),128))]),e("button",{class:"btn btn-primary",onClick:i[4]||(i[4]=s=>t.addChapter()),style:{"margin-top":"12px"}},"Add Chapter")])):r("",!0),e("div",{class:E(t.showChapters?"col-sm-9":"col-sm-12")},[t.chapter.buildmode?r("",!0):(n(),a("h2",he,[m(u(t.chapter.title)+" ",1),e("button",{onClick:i[5]||(i[5]=s=>t.chapter.buildmode=!0),class:"btn btn-primary"},"\u270E")])),t.chapter.buildmode?(n(),a("div",me,[e("label",_e,[m(" Chapter Title "),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":i[6]||(i[6]=s=>t.chapter.title=s)},null,512),[[p,t.chapter.title]])]),e("button",{onClick:i[7]||(i[7]=s=>t.chapter.buildmode=!1),class:"btn btn-primary"},"Done")])):r("",!0),(n(!0),a(U,null,w(t.chapter.encounters,(s,l)=>(n(),a("div",{key:s.id,class:E(s.complete?"complete":"")},[s.buildmode?r("",!0):(n(),a("div",pe,[e("h3",null,[e("a",{href:s.link,target:"_blank"},u(s.name),9,be),e("button",{onClick:o=>t.moveEnUp(l)},"\u2191",8,ke),e("button",{onClick:o=>t.moveEnDown(l)},"\u2193",8,ve),e("button",{onClick:o=>t.loadEncounter(s.link),class:"btn btn-success"},"Run in Tab",8,Ce)]),e("button",{class:"btn btn-primary",onClick:o=>{s.buildmode=!0}},"\u270E",8,$e),e("div",ye,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.complete=o},null,8,fe),[[M,s.complete]]),ge]),e("div",Me,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.closed=o},null,8,Ue),[[M,s.closed]]),we]),s.image&&!s.closed?(n(),a("div",Ve,[e("img",{src:s.image,alt:s.name},null,8,Se)])):r("",!0),s.closed?r("",!0):(n(),a("div",{key:1,innerHTML:t.marked.parse(s.text)},null,8,Te)),s.closed?r("",!0):(n(),a("div",{key:2,innerHTML:t.marked.parse(s.treasure)},null,8,Ee)),e("div",null,[Le,h(e("textarea",{"onUpdate:modelValue":o=>s.sessionnotes=o,class:"form-control"},null,8,Ae),[[p,s.sessionnotes]])])])),s.buildmode?(n(),a("div",He,[e("div",Ne,[e("div",Pe,[Ie,e("button",{onClick:o=>t.moveEnUp(l)},"\u2191",8,De),e("button",{onClick:o=>t.moveEnDown(l)},"\u2193",8,Be),e("button",{onClick:o=>t.deleteEncounter(l)},"\u{1F5D1}",8,Re),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o=>s.name=o},null,8,Fe),[[p,s.name]])]),e("div",je,[ze,h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o=>s.link=o},null,8,Ke),[[p,s.link]])])]),e("div",Oe,[e("div",We,[Xe,h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o=>s.image=o},null,8,qe),[[p,s.image]])]),e("div",Ge,[Je,e("div",Qe,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.random=o},null,8,Ye),[[M,s.random]]),Ze]),e("div",xe,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.complete=o},null,8,et),[[M,s.complete]]),tt])])]),e("div",ot,[e("div",st,[lt,h(e("textarea",{"onUpdate:modelValue":o=>s.text=o,class:"form-control encounterbox"},null,8,nt),[[p,s.text]])]),e("div",{class:"col-sm-6",innerHTML:t.marked.parse(s.text)},null,8,at)]),e("div",null,[it,h(e("textarea",{"onUpdate:modelValue":o=>s.treasure=o,class:"form-control"},null,8,dt),[[p,s.treasure]])]),e("button",{onClick:o=>s.buildmode=!1,class:"btn btn-primary"},"Done",8,rt)])):r("",!0)],2))),128)),(n(!0),a(U,null,w(t.chapter.sections,(s,l)=>(n(),a("div",{key:s.id,class:E(s.complete?"complete":"")},[s.buildmode?r("",!0):(n(),a("div",ct,[e("h3",null,[m(u(s.title)+" ",1),e("button",{onClick:o=>t.moveSectionUp(l),class:"btn btn-sm"},"\u2191",8,ut),e("button",{onClick:o=>t.moveSectionDown(l),class:"btn btn-sm"},"\u2193",8,ht),e("button",{onClick:o=>s.buildmode=!0,class:"btn btn-sm"},"\u270E",8,mt)]),e("div",_t,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.complete=o},null,8,pt),[[M,s.complete]]),bt]),e("div",kt,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.hidden=o},null,8,vt),[[M,s.hidden]]),Ct]),s.hidden?r("",!0):(n(),a("div",{key:0,innerHTML:t.marked.parse(s.description)},null,8,$t))])),s.buildmode?(n(),a("div",yt,[e("div",ft,[e("div",gt,[Mt,e("button",{onClick:o=>t.moveSectionUp(l),class:"btn btn-sm"},"\u2191",8,Ut),e("button",{onClick:o=>t.moveSectionDown(l),class:"btn btn-sm"},"\u2193",8,wt),e("button",{onClick:o=>t.deleteSection(s),class:"btn btn-sm"},"\u{1F5D1}",8,Vt),e("button",{onClick:o=>s.buildmode=!1,class:"btn btn-sm"},"Done",8,St),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o=>s.title=o},null,8,Tt),[[p,s.title]])])]),e("div",Et,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o=>s.hidden=o},null,8,Lt),[[M,s.hidden]]),At]),s.hidden?r("",!0):(n(),a("div",Ht,[e("div",Nt,[Pt,h(e("textarea",{"onUpdate:modelValue":o=>s.description=o,class:"form-control encounterbox"},null,8,It),[[p,s.description]])]),e("div",{class:"col-sm-6",innerHTML:t.marked.parse(s.description)},null,8,Dt)]))])):r("",!0),s.hidden?r("",!0):(n(),a("div",Bt,[(n(!0),a(U,null,w(s.encounters,(o,k)=>(n(),a("div",{key:o.id,class:E(o.complete?"complete":"")},[o.buildmode?r("",!0):(n(),a("div",Rt,[e("h4",null,[e("a",{href:o.link,target:"_blank"},u(o.name),9,Ft),e("button",{onClick:c=>t.moveEncounterUpInSection({section:s,index:k}),class:"btn btn-xs"},"\u2191",8,jt),e("button",{onClick:c=>t.moveEncounterDownInSection({section:s,index:k}),class:"btn btn-xs"},"\u2193",8,zt),e("button",{onClick:c=>t.loadEncounter(o.link),class:"btn btn-success btn-xs"},"Run in Tab",8,Kt),e("button",{onClick:c=>o.buildmode=!0,class:"btn btn-xs"},"\u270E",8,Ot)]),e("div",Wt,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":c=>o.complete=c},null,8,Xt),[[M,o.complete]]),qt]),e("div",Gt,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":c=>o.closed=c},null,8,Jt),[[M,o.closed]]),Qt]),o.image&&!o.closed?(n(),a("div",Yt,[e("img",{src:o.image,alt:o.name},null,8,Zt)])):r("",!0),o.closed?r("",!0):(n(),a("div",{key:1,innerHTML:t.marked.parse(o.text)},null,8,xt)),o.closed?r("",!0):(n(),a("div",{key:2,innerHTML:t.marked.parse(o.treasure)},null,8,eo)),e("div",null,[to,h(e("textarea",{"onUpdate:modelValue":c=>o.sessionnotes=c,class:"form-control"},null,8,oo),[[p,o.sessionnotes]])])])),o.buildmode?(n(),a("div",so,[lo,e("div",no,[e("div",ao,[io,e("button",{onClick:c=>t.moveEncounterUpInSection({section:s,index:k}),class:"btn btn-xs"},"\u2191",8,ro),e("button",{onClick:c=>t.moveEncounterDownInSection({section:s,index:k}),class:"btn btn-sm"},"\u2193",8,co),e("button",{onClick:c=>t.deleteEncounterFromSection({section:s,encounter:o}),class:"btn btn-xs"},"\u{1F5D1}",8,uo),e("button",{onClick:c=>o.buildmode=!1,class:"btn btn-xs"},"Done",8,ho),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.name=c},null,8,mo),[[p,o.name]])]),e("div",_o,[po,h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.link=c},null,8,bo),[[p,o.link]])])]),e("div",ko,[e("div",vo,[Co,h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.image=c},null,8,$o),[[p,o.image]])]),e("div",yo,[fo,e("div",go,[h(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":c=>o.complete=c},null,8,Mo),[[M,o.complete]]),Uo])])]),e("div",wo,[e("div",Vo,[So,h(e("textarea",{"onUpdate:modelValue":c=>o.text=c,class:"form-control"},null,8,To),[[p,o.text]])]),e("div",{class:"col-sm-6",innerHTML:t.marked.parse(o.text)},null,8,Eo)]),e("div",null,[Lo,h(e("textarea",{"onUpdate:modelValue":c=>o.treasure=c,class:"form-control"},null,8,Ao),[[p,o.treasure]])]),e("div",null,[m(" Move to Section "),h(e("select",{"onUpdate:modelValue":i[8]||(i[8]=c=>t.section2=c),class:"form-control form-control-sm"},[(n(!0),a(U,null,w(t.chapter.sections,c=>(n(),a("option",{key:c.id,value:c},u(s.title),9,Ho))),128))],512),[[W,t.section2]]),e("button",{class:"btn btn-success btn-sm",onClick:c=>t.moveEncounterFromSectionToSection({section1:s,section2:t.section2,encounter:o})},"Go",8,No),e("button",{class:"btn btn-primary btn-sm",onClick:c=>t.addEncounterToSection({section:s,index:k+1})},"Add Encounter After This One",8,Po)])])):r("",!0)],2))),128))])),s.hidden?r("",!0):(n(),a("div",Io,[Do,e("div",Bo,[e("button",{class:"btn btn-primary",onClick:o=>t.addEncounterToSection({section:s,index:s.encounters.length})},"Add Encounter",8,Ro)])]))],2))),128)),e("div",Fo,[jo,e("div",zo,[e("button",{class:"btn btn-primary",onClick:i[9]||(i[9]=s=>t.addSection())},"Add Section")])])],2)])])])):r("",!0)])}const Oo=H(Z,[["render",Ko]]),Wo={setup(){const t=L(),{current:i,campaignCharacters:b}=A(t),{invitePCToCampaign:C,fetchCampaignCharacter:V}=t,{skillMod:S,statMod:s,saveMod:l,statTotal:o,initMod:k,acCalc:c,profbonus:d,armorAC:_}=X;return{campaign:i,pcs:b,invitePC:C,fetchCampaignCharacter:V,skillMod:S,statMod:s,saveMod:l,statTotal:o,initMod:k,acCalc:c,armorAC:_,profbonus:d,marked:B}},data:function(){return{pcid:""}},methods:{addToCampaign(){this.campaign.playercharacters.push(this.pcid),this.fetchCampaignCharacter(this.pcid),this.pcid=""},reloadCharacter(t){let i=this.pcs.findIndex(b=>b._id===t._id);this.pcs.splice(i,1),this.fetchCampaignCharacter(t._id)},rollCheck(t){let i=R.roll("1d20").total,b=R.roll("1d20").total;alert("Base Roll: "+(i+t)+" ("+i+" + "+t+`)
Adv/Dis Roll: `+(b+t)+" ("+b+" + "+t+")")},removeFromCampaign(t){let i=this.campaign.playercharacters.findIndex(C=>C===t._id);this.campaign.playercharacters.splice(i,1);let b=this.pcs.findIndex(C=>C._id===t._id);this.pcs.splice(b,1)}}};const $=t=>(q("data-v-a027a002"),t=t(),G(),t),Xo={class:"row"},qo={class:"btn-group"},Go=["onClick"],Jo=["onClick"],Qo={class:"row"},Yo={class:"col-6"},Zo={class:"charsheet-static center"},xo=$(()=>e("br",null,null,-1)),es={class:"col-6"},ts={class:"charsheet-static center"},os={key:0},ss={class:"abilitytable"},ls=$(()=>e("thead",null,[e("tr",null,[e("th",null,"Ability"),e("th",null,"Score"),e("th",null,"Mod"),e("th",null,"Save")])],-1)),ns=$(()=>e("th",null,"STR",-1)),as=["onClick"],is={key:0},ds=["onClick"],rs={key:0},cs=$(()=>e("th",null,"DEX",-1)),us=["onClick"],hs={key:0},ms=["onClick"],_s={key:0},ps=$(()=>e("th",null,"CON",-1)),bs=["onClick"],ks={key:0},vs=["onClick"],Cs={key:0},$s=$(()=>e("th",null,"INT",-1)),ys=["onClick"],fs={key:0},gs=["onClick"],Ms={key:0},Us=$(()=>e("th",null,"WIS",-1)),ws=["onClick"],Vs={key:0},Ss=["onClick"],Ts={key:0},Es=$(()=>e("th",null,"CHA",-1)),Ls=["onClick"],As={key:0},Hs=["onClick"],Ns={key:0},Ps={class:"abilitytable"},Is=$(()=>e("thead",null,[e("tr",null,[e("th",null,"Skill"),e("th",null,"Mod")])],-1)),Ds=["onClick"],Bs={key:0},Rs={class:"charsheet-static"},Fs=$(()=>e("h5",null,"Proficiencies and Languages",-1)),js={style:{"font-size":"9px","margin-bottom":"2px"}},zs=$(()=>e("strong",null,"Armor: ",-1)),Ks={style:{"font-size":"9px","margin-bottom":"2px"}},Os=$(()=>e("strong",null,"Weapons: ",-1)),Ws={style:{"font-size":"9px","margin-bottom":"2px"}},Xs=$(()=>e("strong",null,"Tools: ",-1)),qs={style:{"font-size":"9px","margin-bottom":"2px"}},Gs=$(()=>e("strong",null,"Saves: ",-1)),Js=["innerHTML"];function Qs(t,i,b,C,V,S){const s=f("router-link");return n(),a("div",null,[m(" PC Manager "),h(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=l=>t.pcid=l)},null,512),[[p,t.pcid]]),e("button",{class:"btn btn-success",onClick:i[1]||(i[1]=l=>t.addToCampaign())},"Add PC"),e("div",Xo,[(n(!0),a(U,null,w(t.pcs,l=>(n(),a("div",{key:l._id,class:"col-sm-3"},[e("h4",null,[y(s,{to:"/tools/charbuilder/"+l._id,target:"_blank"},{default:g(()=>[m(u(l.name),1)]),_:2},1032,["to"])]),e("div",qo,[e("button",{onClick:o=>t.reloadCharacter(l),class:"btn btn-success"},"Reload",8,Go),e("button",{onClick:o=>t.removeFromCampaign(l),class:"btn btn-danger"},"Remove",8,Jo)]),e("div",Qo,[e("div",Yo,[e("div",Zo,[m(" AC"),xo,m(u(t.acCalc(l)),1)])]),e("div",es,[e("div",ts,[m(" Initiative: "),t.initMod(l)>-1?(n(),a("span",os,"+")):r("",!0),m(u(t.initMod(l)),1)])])]),e("table",ss,[ls,e("tbody",null,[e("tr",null,[ns,e("td",null,u(t.statTotal(l,0)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,0))},[t.statMod(l,0)>-1?(n(),a("span",is,"+")):r("",!0),m(u(t.statMod(l,0)),1)],8,as)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,0))},[t.saveMod(l,0)>-1?(n(),a("span",rs,"+")):r("",!0),m(u(t.saveMod(l,0)),1)],8,ds)])]),e("tr",null,[cs,e("td",null,u(t.statTotal(l,1)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,1))},[t.statMod(l,1)>-1?(n(),a("span",hs,"+")):r("",!0),m(u(t.statMod(l,1)),1)],8,us)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,1))},[t.saveMod(l,1)>-1?(n(),a("span",_s,"+")):r("",!0),m(u(t.saveMod(l,1)),1)],8,ms)])]),e("tr",null,[ps,e("td",null,u(t.statTotal(l,2)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,2))},[t.statMod(l,2)>-1?(n(),a("span",ks,"+")):r("",!0),m(u(t.statMod(l,2)),1)],8,bs)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,2))},[t.saveMod(l,2)>-1?(n(),a("span",Cs,"+")):r("",!0),m(u(t.saveMod(l,2)),1)],8,vs)])]),e("tr",null,[$s,e("td",null,u(t.statTotal(l,3)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,3))},[t.statMod(l,3)>-1?(n(),a("span",fs,"+")):r("",!0),m(u(t.statMod(l,3)),1)],8,ys)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,3))},[t.saveMod(l,3)>-1?(n(),a("span",Ms,"+")):r("",!0),m(u(t.saveMod(l,3)),1)],8,gs)])]),e("tr",null,[Us,e("td",null,u(t.statTotal(l,4)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,4))},[t.statMod(l,4)>-1?(n(),a("span",Vs,"+")):r("",!0),m(u(t.statMod(l,4)),1)],8,ws)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,4))},[t.saveMod(l,4)>-1?(n(),a("span",Ts,"+")):r("",!0),m(u(t.saveMod(l,4)),1)],8,Ss)])]),e("tr",null,[Es,e("td",null,u(t.statTotal(l,5)),1),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.statMod(l,5))},[t.statMod(l,5)>-1?(n(),a("span",As,"+")):r("",!0),m(u(t.statMod(l,5)),1)],8,Ls)]),e("td",null,[e("button",{onClick:o=>t.rollCheck(t.saveMod(l,5))},[t.saveMod(l,5)>-1?(n(),a("span",Ns,"+")):r("",!0),m(u(t.saveMod(l,5)),1)],8,Hs)])])])]),e("table",Ps,[Is,e("tbody",null,[(n(!0),a(U,null,w(l.skills,o=>(n(),a("tr",{key:o.name},[e("th",null,u(o.name),1),e("td",null,[e("button",{onClick:k=>t.rollCheck(t.skillMod(l,o))},[t.skillMod(l,o)>-1?(n(),a("span",Bs,"+")):r("",!0),m(u(t.skillMod(l,o)),1)],8,Ds)])]))),128))])]),e("div",Rs,[Fs,e("p",js,[zs,m(u(l.charclasses[0].thisclass.proficiencies.armor.join(", ")),1)]),e("p",Ks,[Os,m(u(l.charclasses[0].thisclass.proficiencies.weapons.join(", ")),1)]),e("p",Ws,[Xs,m(u(l.charclasses[0].thisclass.proficiencies.tools.join(", ")),1)]),e("p",qs,[Gs,m(u(l.charclasses[0].thisclass.proficiencies["saving throws"].join(", ")),1)]),e("p",{innerHTML:l.proficiencies,style:{"font-size":"9px","margin-bottom":"2px"}},null,8,Js)])]))),128))])])}const Ys=H(Wo,[["render",Qs],["__scopeId","data-v-a027a002"]]),Zs={setup(){const t=L(),{current:i}=A(t);return{campaign:i,marked:B}},props:{buildmode:Boolean},computed:{availableChapters:function(){let t=[];return this.campaign.chapters.forEach(i=>{t.push({value:i.title,text:i.title})}),t},filteredNPCs:function(){let t=[];return this.campaign.npcs.forEach(i=>{(this.filterByChapter==="all"||i.chapters.includes("all")||i.chapters.includes(this.filterByChapter))&&t.push(i)}),t}},data:function(){return{filterByChapter:"all"}},methods:{newNPC(){this.campaign.npcs.push({id:Math.random(),name:"New NPC",editMode:!0,job:"",relation:"",link:"",skills:"",location:"",motivations:"",history:"",chapters:["all"],show:!0})},switchEditMode(t){t.editMode=!t.editMode},deleteNPC(t){let i=this.campaign.npcs.findIndex(b=>b.id===t.id);window.confirm("Are you sure you want to delete "+t.name+"?")&&this.campaign.npcs.splice(i,1)}}},xs={key:0},el=["onUpdate:modelValue"],tl=["onClick"],ol=["onClick"],sl=["onClick"],ll={key:0},nl={key:1},al={key:0},il={class:"row"},dl={class:"col-sm-2"},rl=e("strong",null,"Job: ",-1),cl={key:0},ul=["onUpdate:modelValue"],hl={class:"col-sm-3"},ml=e("strong",null,"Relation to Party:",-1),_l={key:0},pl=["onUpdate:modelValue"],bl={class:"col-sm-7"},kl=e("strong",null,"Link to Stats",-1),vl={key:1},Cl=["onUpdate:modelValue"],$l={class:"row"},yl={class:"col-sm-2"},fl=e("strong",null,"Location:",-1),gl={key:0},Ml=["onUpdate:modelValue"],Ul={class:"col-sm-10"},wl=e("strong",null,"Relevant Chapters:",-1),Vl={class:"row"},Sl={class:"col-sm-12"},Tl=e("strong",null,"History: ",-1),El=["innerHTML"],Ll=["onUpdate:modelValue"],Al={class:"row"},Hl={class:"col-sm-12"},Nl=e("strong",null,"Motivations: ",-1),Pl=["innerHTML"],Il=["onUpdate:modelValue"];function Dl(t,i,b,C,V,S){const s=f("b-form-radio"),l=f("b-form-radio-group"),o=f("router-link"),k=f("b-form-checkbox"),c=f("b-form-checkbox-group");return n(),a("div",null,[e("button",{onClick:i[0]||(i[0]=d=>t.newNPC())},"Add NPC"),e("div",null,[e("label",null,[m(" Filter By Chapter: "),y(l,{modelValue:t.filterByChapter,"onUpdate:modelValue":i[1]||(i[1]=d=>t.filterByChapter=d),options:t.availableChapters,name:"filterByChapter"},{default:g(()=>[y(s,{value:"all"},{default:g(()=>[m("All")]),_:1})]),_:1},8,["modelValue","options"])])]),(n(!0),a(U,null,w(t.filteredNPCs,d=>(n(),a("div",{key:d.id,class:"card"},[e("h3",null,[d.editMode?r("",!0):(n(),a("span",xs,u(d.name),1)),d.editMode?h((n(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":_=>d.name=_},null,8,el)),[[p,d.name]]):r("",!0),e("button",{class:"btn-symbol btn-sm",onClick:_=>t.switchEditMode(d)},"\u270E",8,tl),e("button",{class:"btn-symbol btn-sm",onClick:_=>t.deleteNPC(d)},"\u{1F5D1}",8,ol),e("button",{type:"button",class:"btn btn-primary float-right",onClick:_=>d.show=!d.show},[d.show?(n(),a("span",ll,"\u25B2")):r("",!0),d.show?r("",!0):(n(),a("span",nl,"\u25BC"))],8,sl)]),d.show?(n(),a("div",al,[e("div",il,[e("label",dl,[rl,d.editMode?r("",!0):(n(),a("span",cl,u(d.job),1)),d.editMode?h((n(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":_=>d.job=_},null,8,ul)),[[p,d.job]]):r("",!0)]),e("label",hl,[ml,d.editMode?r("",!0):(n(),a("span",_l,u(d.relation),1)),d.editMode?h((n(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":_=>d.relation=_},null,8,pl)),[[p,d.relation]]):r("",!0)]),e("label",bl,[d.editMode?r("",!0):(n(),D(o,{key:0,to:d.link,target:"_blank"},{default:g(()=>[kl]),_:2},1032,["to"])),d.editMode?(n(),a("strong",vl,"Link to Stats")):r("",!0),d.editMode?h((n(),a("input",{key:2,type:"text",class:"form-control","onUpdate:modelValue":_=>d.link=_},null,8,Cl)),[[p,d.link]]):r("",!0)])]),e("div",$l,[e("label",yl,[fl,d.editMode?r("",!0):(n(),a("span",gl,u(d.location),1)),d.editMode?h((n(),a("input",{key:1,type:"text",class:"form-control","onUpdate:modelValue":_=>d.location=_},null,8,Ml)),[[p,d.location]]):r("",!0)]),e("label",Ul,[wl,d.editMode?r("",!0):(n(!0),a(U,{key:0},w(d.chapters,_=>(n(),a("span",{key:_},u(_),1))),128)),d.editMode?(n(),D(c,{key:1,modelValue:d.chapters,"onUpdate:modelValue":_=>d.chapters=_,options:t.availableChapters},{default:g(()=>[y(k,{value:"all"},{default:g(()=>[m("All")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","options"])):r("",!0)])]),e("div",Vl,[e("label",Sl,[Tl,d.editMode?r("",!0):(n(),a("span",{key:0,innerHTML:t.marked.parse(d.history)},null,8,El)),d.editMode?h((n(),a("textarea",{key:1,"onUpdate:modelValue":_=>d.history=_,class:"form-control"},null,8,Ll)),[[p,d.history]]):r("",!0)])]),e("div",Al,[e("label",Hl,[Nl,d.editMode?r("",!0):(n(),a("span",{key:0,innerHTML:t.marked.parse(d.motivations)},null,8,Pl)),d.editMode?h((n(),a("textarea",{key:1,"onUpdate:modelValue":_=>d.motivations=_,class:"form-control"},null,8,Il)),[[p,d.motivations]]):r("",!0)])])])):r("",!0)]))),128))])}const Bl=H(Zs,[["render",Dl]]),Rl={setup(){const t=L(),i=J(),{campaigns:b,current:C,currentChapter:V,campaignCharacters:S}=A(t),{getUserInfo:s,isLoggedIn:l}=i,{getAllCampaigns:o,getAllCampaignsSilent:k,saveNewCampaign:c,saveCampaign:d,loadCampaign:_,loadCampaignById:v,loadCampaignByUrl:T,deleteCampaign:N,newCampaign:P}=t;let I=C.buildmode;return F({title:"Campaign Builder"}),{campaigns:t,userinfo:i,allCampaigns:b,campaign:C,chapter:V,pcs:S,token:s,loggedin:l,buildmode:I,getAll:o,getAllSilent:k,saveNew:c,save:d,load:_,loadById:v,loadByUrl:T,deleteCamp:N,newCamp:P}},components:{notes:Oo,pcmanager:Ys,npcmanager:Bl,runner:Y,modal:Q},data:function(){return{comp:this,showChapters:!0,creArray:[],charArray:[],runnerKey:0,activeTab:0,modalProps:{isActive:!1}}},watch:{campaign:{handler(){this.campaign._id&&this.loggedin&&this.save()},deep:!0}},methods:{loadEncounter(t){this.creArray=t.substr(t.search("runner/")+7).split("&"),this.charArray=this.pcs,this.runnerKey++,this.activeTab=3,window.scroll(1,300)},showLoadModal(){this.modalProps.isActive=!0}},created(){this.getAllSilent().then(()=>{this.$route.params.campaign&&this.loadByUrl({url:this.$route.params.campaign})})}},Fl={class:"col-sm-12"},jl={class:"btn-group"},zl={key:0},Kl={key:1},Ol={class:"table table-striped"},Wl=e("tr",null,[e("th",null,"Campaign Name"),e("th",null,"-")],-1),Xl=["onClick"],ql=["onClick"];function Gl(t,i,b,C,V,S){const s=f("notes"),l=f("b-tab"),o=f("pcmanager"),k=f("npcmanager"),c=f("runner"),d=f("b-tabs"),_=f("modal");return n(),a("div",Fl,[e("div",jl,[t.campaign._id?(n(),a("button",{key:0,class:"btn btn-primary",onClick:i[0]||(i[0]=v=>t.save())},"Save")):r("",!0),t.campaign._id?r("",!0):(n(),a("button",{key:1,class:"btn btn-primary",onClick:i[1]||(i[1]=v=>t.saveNew())},"Save New")),e("button",{class:"btn btn-success",onClick:i[2]||(i[2]=v=>{t.getAllSilent(),t.showLoadModal()})},"Load"),e("button",{class:"btn btn-warning",onClick:i[3]||(i[3]=v=>t.newCamp())},"New Campaign"),e("button",{class:"btn btn-primary",onClick:i[4]||(i[4]=v=>t.showChapters=!t.showChapters)},[t.showChapters?(n(),a("span",zl,"Hide")):(n(),a("span",Kl,"Show")),m(" Chapters")])]),y(d,{modelValue:t.activeTab,"onUpdate:modelValue":i[5]||(i[5]=v=>t.activeTab=v)},{default:g(()=>[y(l,{title:"Notes"},{default:g(()=>[y(s,{buildmode:t.buildmode,"show-chapters":t.showChapters},null,8,["buildmode","show-chapters"])]),_:1}),y(l,{title:"PC Manager"},{default:g(()=>[y(o)]),_:1}),y(l,{title:"NPCs"},{default:g(()=>[y(k,{buildmode:t.buildmode},null,8,["buildmode"])]),_:1}),y(l,{title:"Encounter Runner"},{default:g(()=>[(n(),D(c,{"cre-array":t.creArray,"char-array":t.charArray,key:t.runnerKey},null,8,["cre-array","char-array"]))]),_:1})]),_:1},8,["modelValue"]),y(_,{id:"campaignmodal",title:"Load File from Server",modalProps:t.modalProps},{default:g(()=>[e("table",Ol,[Wl,(n(!0),a(U,null,w(t.allCampaigns,v=>(n(),a("tr",{key:v._id},[e("td",null,[e("a",{class:"clickable",onClick:T=>{t.load({campaign:v,comp:t.comp}),t.modalProps.isActive=!1}},u(v.title),9,Xl)]),e("td",null,[e("input",{type:"button",onClick:T=>t.deleteCamp(v),class:"btn btn-danger",value:"X"},null,8,ql)])]))),128))])]),_:1},8,["modalProps"])])}const Zl=H(Rl,[["render",Gl]]);export{Zl as default};
