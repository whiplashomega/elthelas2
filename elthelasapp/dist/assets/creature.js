import{z as y,_,o,c as l,a as n,t as s,e as i,d,F as M,r as v}from"./index.js";const c={hp(e){let r=this.statMod(e,2),u=6.5;return e.size==="Tiny"?u=3.5:e.size==="Medium"||e.size==="Small"?u=4.5:e.size==="Large"&&(u=5.5),Math.floor((r+u)*e.hitdice)},statMod(e,r){return Math.floor(e.stats[r]/2)-5},ac(e){let r=Math.min(e.maxdex,this.statMod(e,1));return Number(e.ac)+r},prof(e){return Math.floor((e.hitdice-1)/4)+2},saveMod(e,r){return e.saves[r]?this.prof(e)+this.statMod(e,r):this.statMod(e,r)},init(e){return this.statMod(e,1)+Number(e.initmod)},skillMod(e,r){return r.prof*this.prof(e)+this.statMod(e,r.stat)+Number(r.magic)},passivePerception(e){let r=e.skills.filter(u=>u.name==="Perception")[0];return 10+this.skillMod(e,r)},attMod(e,r){return this.prof(e)+this.statMod(e,r.stat)+Number(r.bonus)},dmgBonus(e,r,u){return(u.addstat?this.statMod(e,r.stat):0)+Number(u.damagebonus)},saveDC(e,r){return 8+this.prof(e)+this.statMod(e,r.stat)},attackDPR(e,r){let u=r.attroll?r.damage.reduce((p,m)=>{let h=(this.attMod(e,r)+2)*.05,t=y.parse(m.dice);return(p+t.avgResult+this.dmgBonus(e,r,m))*h},0):0;return u+=r.save?r.savedamage.reduce((p,m)=>{let h=(this.saveDC(e,r)-5)*.05,t=y.parse(m.dice);return(p+t.avgResult+this.dmgBonus(e,r,m))*h},0):0,u},actionDPR(e,r){return r.attacks.reduce((u,p)=>u+this.attackDPR(e,p.attack)*p.num,0)},DPR(e){let r=0,u=0,p=0,m=0;return e.actions.forEach(h=>{if(h.type==="Standard"){let t=this.actionDPR(e,h);t>r&&(r=t)}if(h.type==="Legendary"){let t=this.actionDPR(e,h);t>u&&(u=t)}if(h.type==="Bonus"){let t=this.actionDPR(e,h);t>p&&(p=t)}}),m=r+u+p,console.log(m),m},offensiveCR(e){let r=this.DPR(e)/5;return r*=e.crmods.hasaoe?1.25:1,r},hitDieSize(e){return e.size==="Tiny"?6:e.size==="Small"||e.size==="Medium"?8:e.size==="Large"?10:12},defensiveCR(e){let r=Math.max(0,(this.ac(e)-9)*.05),u=0,p=0,m=0;for(var h in e.dr)e.dr[h]==="resistance"?u++:e.dr[h]==="immunity"?p++:e.dr[h]==="vulnerable"&&m++;let t=this.hp(e)/(1-r);return t*=1+.1*u+.2*p-.1*m,t*=e.crmods.regeneration?1.2:1,t*=1+e.pc*.2,t/25},cr(e){return((this.offensiveCR(e)+this.defensiveCR(e))/2).toPrecision(2)}},f={setup(){return{creaturecalc:c}},methods:{},computed:{attMod:e=>r=>c.attMod(e.creature,r),dmgBonus:e=>(r,u)=>c.dmgBonus(e.creature,r,u),saveDC:e=>r=>c.saveDC(e.creature,r),skillMod:e=>r=>c.skillMod(e.creature,r),saveMod:e=>r=>c.saveMod(e.creature,r),statMod:e=>r=>c.statMod(e.creature,r),hp(){return c.hp(this.creature)},ac(){return c.ac(this.creature)},hitDieSize(){return c.hitDieSize(this.creature)},prof(){return c.prof(this.creature)},init(){return c.init(this.creature)},passivePerception(){return c.passivePerception(this.creature)},cr(){return c.cr(this.creature)}},props:["creature"]},g={class:"row"},b={class:"col"},D=n("strong",null,"HP:",-1),k=n("br",null,null,-1),P=n("strong",null,"Armor:",-1),R={key:0},C=n("br",null,null,-1),z=n("strong",null,"Proficiency Bonus: ",-1),B=n("br",null,null,-1),S=n("strong",null,"Initiative: ",-1),N=n("br",null,null,-1),A={class:"col"},L=["src","alt"],I={class:"table table-sm"},T=n("tr",null,[n("th"),n("th",null,"STR"),n("th",null,"DEX"),n("th",null,"CON"),n("th",null,"INT"),n("th",null,"WIS"),n("th",null,"CHA")],-1),V=n("th",null,"Score",-1),$=n("th",null,"Mod",-1),E={key:0},F={key:0},H={key:0},w={key:0},j={key:0},O={key:0},W=n("th",null,"Save",-1),X={key:0},q={key:0},G={key:0},J={key:0},K={key:0},Q={key:0},U=n("br",null,null,-1),Y=n("br",null,null,-1),Z={key:0},x=n("br",null,null,-1),ee=n("br",null,null,-1),te={key:0},se=n("br",null,null,-1),ne={key:0},re=n("br",null,null,-1),oe={key:0},le=n("br",null,null,-1),ie={key:0},ue=n("br",null,null,-1),de=n("h5",null,"Features",-1),ae=n("h5",null,"Actions",-1),he={key:0},pe=n("h5",null,"Bonus Actions",-1),ce={key:0},me=n("h5",null,"Legendary Actions",-1),Me={key:0},ve=n("h5",null,"Attacks",-1),ye={key:0},_e={key:0},fe={key:1};function ge(e,r,u,p,m,h){return o(),l("div",null,[n("div",g,[n("div",b,[n("h6",null,s(e.creature.size)+" "+s(e.creature.type)+" ("+s(e.creature.subtype)+") "+s(e.creature.alignment),1),D,i(" "+s(e.hp)+" ("+s(e.creature.hitdice)+"d"+s(e.hitDieSize)+" + "+s(e.statMod(2)*e.creature.hitdice)+")",1),k,P,i(" AC "+s(e.ac)+", PC "+s(e.creature.pc)+" ( "+s(e.creature.acdesc)+" ",1),e.creature.maxdex!=99?(o(),l("span",R,"Max Dex "+s(e.creature.maxdex),1)):d("",!0),i(" )"),C,z,i(" +"+s(e.prof),1),B,S,i("+"+s(e.init),1),N]),n("div",A,[n("img",{src:e.creature.image,alt:e.creature.name,style:{"max-width":"100%","max-height":"175px"}},null,8,L)])]),n("table",I,[T,n("tr",null,[V,n("td",null,s(e.creature.stats[0]),1),n("td",null,s(e.creature.stats[1]),1),n("td",null,s(e.creature.stats[2]),1),n("td",null,s(e.creature.stats[3]),1),n("td",null,s(e.creature.stats[4]),1),n("td",null,s(e.creature.stats[5]),1)]),n("tr",null,[$,n("td",null,[e.statMod(0)>-1?(o(),l("span",E,"+")):d("",!0),i(s(e.statMod(0)),1)]),n("td",null,[e.statMod(1)>-1?(o(),l("span",F,"+")):d("",!0),i(s(e.statMod(1)),1)]),n("td",null,[e.statMod(2)>-1?(o(),l("span",H,"+")):d("",!0),i(s(e.statMod(2)),1)]),n("td",null,[e.statMod(3)>-1?(o(),l("span",w,"+")):d("",!0),i(s(e.statMod(3)),1)]),n("td",null,[e.statMod(4)>-1?(o(),l("span",j,"+")):d("",!0),i(s(e.statMod(4)),1)]),n("td",null,[e.statMod(5)>-1?(o(),l("span",O,"+")):d("",!0),i(s(e.statMod(5)),1)])]),n("tr",null,[W,n("td",null,[e.saveMod(0)>-1?(o(),l("span",X,"+")):d("",!0),i(s(e.saveMod(0)),1)]),n("td",null,[e.saveMod(1)>-1?(o(),l("span",q,"+")):d("",!0),i(s(e.saveMod(1)),1)]),n("td",null,[e.saveMod(2)>-1?(o(),l("span",G,"+")):d("",!0),i(s(e.saveMod(2)),1)]),n("td",null,[e.saveMod(3)>-1?(o(),l("span",J,"+")):d("",!0),i(s(e.saveMod(3)),1)]),n("td",null,[e.saveMod(4)>-1?(o(),l("span",K,"+")):d("",!0),i(s(e.saveMod(4)),1)]),n("td",null,[e.saveMod(5)>-1?(o(),l("span",Q,"+")):d("",!0),i(s(e.saveMod(5)),1)])])]),i(" Languages: "+s(e.creature.languages),1),U,i(" Senses: passive perception "+s(e.passivePerception)+" "+s(e.creature.senses),1),Y,i(" Skills: "),(o(!0),l(M,null,v(e.creature.skills,t=>(o(),l("span",{key:t.name},[t.prof?(o(),l("span",Z,s(t.name)+" +"+s(e.skillMod(t))+";\xA0",1)):d("",!0)]))),128)),x,i(" CR: "+s(e.cr),1),ee,i(" Immunities: "),(o(!0),l(M,null,v(e.creature.dr,(t,a)=>(o(),l("span",{key:a},[t=="immunity"?(o(),l("span",te,s(a)+"; ",1)):d("",!0)]))),128)),se,i(" Resistances: "),(o(!0),l(M,null,v(e.creature.dr,(t,a)=>(o(),l("span",{key:a},[t=="resistance"?(o(),l("span",ne,s(a)+"; ",1)):d("",!0)]))),128)),re,i(" Vulnerabilities: "),(o(!0),l(M,null,v(e.creature.dr,(t,a)=>(o(),l("span",{key:a},[t=="vulnerable"?(o(),l("span",oe,s(a)+"; ",1)):d("",!0)]))),128)),le,i(" Condition Immunities: "),(o(!0),l(M,null,v(e.creature.conditions,t=>(o(),l("span",{key:t.name},[t.value?(o(),l("span",ie,s(t.name)+"; ",1)):d("",!0)]))),128)),ue,de,(o(!0),l(M,null,v(e.creature.features,t=>(o(),l("p",{key:t.id},[n("strong",null,s(t.name)+". ",1),i(" "+s(t.description),1)]))),128)),ae,(o(!0),l(M,null,v(e.creature.actions,t=>(o(),l("div",{key:t.id},[t.type==="Standard"?(o(),l("p",he,[n("strong",null,s(t.name)+". ",1),i(" "+s(t.description),1)])):d("",!0)]))),128)),pe,(o(!0),l(M,null,v(e.creature.actions,t=>(o(),l("div",{key:t.id},[t.type==="Bonus"?(o(),l("p",ce,[n("strong",null,s(t.name)+". ",1),i(" "+s(t.description),1)])):d("",!0)]))),128)),me,(o(!0),l(M,null,v(e.creature.actions,t=>(o(),l("div",{key:t.id},[t.type==="Legendary"?(o(),l("p",Me,[n("strong",null,s(t.name)+". ",1),i(" "+s(t.description),1)])):d("",!0)]))),128)),ve,(o(!0),l(M,null,v(e.creature.attacks,t=>(o(),l("div",{key:t.id},[n("strong",null,s(t.name)+".",1),i(" "+s(t.type)+", Range "+s(t.range)+" ft. +"+s(e.attMod(t))+" to hit. Damage ",1),(o(!0),l(M,null,v(t.damage,a=>(o(),l("span",{key:a.dice+a.dtype},s(a.dice)+" + "+s(e.dmgBonus(t,a))+" "+s(a.dtype)+" damage; ",1))),128)),i(" "+s(t.extra)+" ",1),t.save?(o(),l("span",ye,[i("then make a DC "+s(e.saveDC(t))+" "+s(t.savestat)+" save or ",1),t.savedamage.length>0?(o(),l("span",_e,"take")):d("",!0),i(),(o(!0),l(M,null,v(t.savedamage,a=>(o(),l("span",{key:a.dice+a.dtype},s(a.dice)+" + "+s(e.dmgBonus(t,a))+" "+s(a.dtype)+" damage; ",1))),128)),i(),t.saveextra?(o(),l("span",fe,"and "+s(t.saveextra),1)):d("",!0)])):d("",!0)]))),128))])}const De=_(f,[["render",ge]]);export{De as c};
