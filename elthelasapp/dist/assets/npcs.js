import{B as p,N as y,s as b,m as f,_ as k,o as l,c as n,a as e,n as a,v as d,C as v,e as r,F as h,r as u,t as c,d as _}from"./index.js";const x={setup(){p({title:"NPCs of Elthelas"});const s=y();s.getAllNPCs();const{npcs:i}=b(s);return{npcs:i,marked:f,npcStore:s}},computed:{filterednpcs(){return this.npcs.filter(s=>{for(let i in s){if(this.living&&s.died||this.player&&s.player==="")return!1;if(typeof s[i]=="string"&&s[i].includes(this.filtertext))return!0;if(this.filtertext==="")return!0}return!1})}},data(){return{filtertext:"",living:!1,player:!1}},methods:{npc(){return{name:"",born:"",died:"",lastlocation:"",history:"",motivations:"",charid:"",player:"",campaigns:[],home:"",dmonly:!1,job:"",knownassociates:"",ancestry:"",flags:[],expand:!0,edit:!0}},addNPC(){this.npcs.push(this.npc())},addCampaign(s){s.campaigns.push({id:Math.random(),name:""})},removeCampaign(s,i){s.campaigns.splice(s.campaigns.indexOf(i),1)},save(s){s.edit=!1,s._id?this.npcStore.saveUpdate(s):this.npcStore.saveNew(s)},deleteNPC(s){window.confirm("Are you sure you want to delete this NPC? It cannot be recovered.")&&(s._id?this.npcStore.deleteNPC(s):this.npcs.splice(this.npcs.indexOf(s),1))}}},C={class:"col-12"},V={class:"row"},U={class:"col-3"},g={class:"col-3"},w={key:0},N={class:"row"},L={class:"col-4"},M=e("label",null,"Name",-1),P=["onUpdate:modelValue"],$={class:"col-4"},H=e("label",null,"Character Link",-1),T=["onUpdate:modelValue"],S={class:"col-4"},A=e("label",null,"Player",-1),B=["onUpdate:modelValue"],D={class:"row"},j={class:"col-4"},K=e("label",null,"Born",-1),E=["onUpdate:modelValue"],O={class:"col-4"},F=e("label",null,"Died",-1),J=["onUpdate:modelValue"],I={class:"col-4"},R=e("label",null,"Ancestry",-1),X=["onUpdate:modelValue"],q={class:"row"},z={class:"col-4"},G=e("label",null,"Last Known Location",-1),Q=["onUpdate:modelValue"],W={class:"col-4"},Y=e("label",null,"Home",-1),Z=["onUpdate:modelValue"],ee={class:"col-4"},te=e("label",null,"Job",-1),se=["onUpdate:modelValue"],oe={class:"row"},le={class:"col-6"},ne=e("label",null,"History",-1),ae=["onUpdate:modelValue"],ie={class:"col-6"},de=e("label",null,"Motivations",-1),re=["onUpdate:modelValue"],ce={class:"row"},_e={class:"col-6"},he=e("label",null,"Known Associates",-1),ue=["onUpdate:modelValue"],me={class:"col-6"},ve=e("label",null,"Met in Campaigns",-1),pe={class:"col-10"},ye=["onUpdate:modelValue"],be={class:"col-2"},fe=["onClick"],ke=["onClick"],xe={class:"btn-group"},Ce=["onClick"],Ve=["onClick"],Ue={key:1},ge={class:"card-title"},we=["href"],Ne=["onClick"],Le=["onClick"],Me={key:0},Pe={key:1},$e={key:0},He={key:0},Te={class:"row"},Se={class:"col-4"},Ae=e("br",null,null,-1),Be=e("br",null,null,-1),De={class:"col-4"},je=e("br",null,null,-1),Ke=e("br",null,null,-1),Ee={key:0},Oe=e("br",null,null,-1),Fe={key:1},Je=["innerHTML"],Ie={class:"row"},Re={class:"col-6"},Xe={key:0},qe=["innerHTML"],ze={key:1},Ge=["innerHTML"],Qe={class:"col-6"},We=e("h5",null,"Campaigns",-1),Ye=e("br",null,null,-1),Ze={class:"btn-group"};function et(s,i,tt,st,ot,lt){return l(),n(h,null,[e("div",C,[a(e("input",{type:"text",class:"form-control",placeholder:"Search","onUpdate:modelValue":i[0]||(i[0]=t=>s.filtertext=t)},null,512),[[d,s.filtertext]]),e("div",V,[e("div",U,[a(e("input",{type:"checkbox","onUpdate:modelValue":i[1]||(i[1]=t=>s.player=t)},null,512),[[v,s.player]]),r(" PC ")]),e("div",g,[a(e("input",{type:"checkbox","onUpdate:modelValue":i[2]||(i[2]=t=>s.living=t)},null,512),[[v,s.living]]),r(" Living Only ")])])]),(l(!0),n(h,null,u(s.filterednpcs,t=>(l(),n("div",{key:t._id,class:"card"},[t.edit?(l(),n("div",w,[e("div",N,[e("div",L,[M,a(e("input",{type:"text","onUpdate:modelValue":o=>t.name=o,class:"charsheet-text"},null,8,P),[[d,t.name]])]),e("div",$,[H,a(e("input",{type:"text","onUpdate:modelValue":o=>t.charid=o,class:"charsheet-text"},null,8,T),[[d,t.charid]])]),e("div",S,[A,a(e("input",{type:"text","onUpdate:modelValue":o=>t.player=o,class:"charsheet-text"},null,8,B),[[d,t.player]])])]),e("div",D,[e("div",j,[K,a(e("input",{type:"text","onUpdate:modelValue":o=>t.born=o,class:"charsheet-text"},null,8,E),[[d,t.born]])]),e("div",O,[F,a(e("input",{type:"text","onUpdate:modelValue":o=>t.died=o,class:"charsheet-text"},null,8,J),[[d,t.died]])]),e("div",I,[R,a(e("input",{type:"text","onUpdate:modelValue":o=>t.ancestry=o,class:"charsheet-text"},null,8,X),[[d,t.ancestry]])])]),e("div",q,[e("div",z,[G,a(e("input",{type:"text","onUpdate:modelValue":o=>t.lastlocation=o,class:"charsheet-text"},null,8,Q),[[d,t.lastlocation]])]),e("div",W,[Y,a(e("input",{type:"text","onUpdate:modelValue":o=>t.home=o,class:"charsheet-text"},null,8,Z),[[d,t.home]])]),e("div",ee,[te,a(e("input",{type:"text","onUpdate:modelValue":o=>t.job=o,class:"charsheet-text"},null,8,se),[[d,t.job]])])]),e("div",oe,[e("div",le,[ne,a(e("textarea",{"onUpdate:modelValue":o=>t.history=o,class:"charsheet-textarea"},null,8,ae),[[d,t.history]])]),e("div",ie,[de,a(e("textarea",{"onUpdate:modelValue":o=>t.motivations=o,class:"charsheet-textarea"},null,8,re),[[d,t.motivations]])])]),e("div",ce,[e("div",_e,[he,a(e("textarea",{"onUpdate:modelValue":o=>t.knownassociates=o,class:"charsheet-textarea"},null,8,ue),[[d,t.knownassociates]])]),e("div",me,[ve,(l(!0),n(h,null,u(t.campaigns,o=>(l(),n("div",{key:o.id,class:"row"},[e("div",pe,[a(e("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":m=>o.name=m},null,8,ye),[[d,o.name]])]),e("div",be,[e("button",{class:"btn btn-sm btn-danger",onClick:m=>s.removeCampaign(t,o)},"X",8,fe)])]))),128)),e("button",{onClick:o=>s.addCampaign(t),class:"btn btn-sm btn-primary"},"+",8,ke)])]),e("div",xe,[e("button",{class:"btn btn-primary",onClick:o=>s.save(t)},"Save",8,Ce),e("button",{class:"btn btn-danger",onClick:o=>s.deleteNPC(t)},"Delete",8,Ve)])])):(l(),n("div",Ue,[e("h4",ge,[e("a",{href:t.charid},c(t.name),9,we),r(),e("button",{class:"btn btn-warning",onClick:o=>t.edit=!0},"Edit",8,Ne),e("button",{type:"button",class:"btn btn-primary",style:{float:"right"},onClick:o=>t.expand=!t.expand},[t.expand?(l(),n("span",Me,"\u25B2")):_("",!0),t.expand?_("",!0):(l(),n("span",Pe,"\u25BC"))],8,Le)]),t.expand?(l(),n("div",$e,[t.player?(l(),n("h6",He,"Player: "+c(t.player),1)):_("",!0),e("div",Te,[e("div",Se,[r(" Last Known Location: "+c(t.lastlocation),1),Ae,r(" Home: "+c(t.home),1),Be,r(" Job: "+c(t.job),1)]),e("div",De,[r(" Ancestry: "+c(t.ancestry),1),je,r(" Born: "+c(t.born),1),Ke,t.died?(l(),n("span",Ee,[r("Died: "+c(t.died),1),Oe])):_("",!0)])]),t.history?(l(),n("h5",Fe,"History")):_("",!0),e("div",{innerHTML:s.marked.parse(t.history)},null,8,Je),e("div",Ie,[e("div",Re,[t.motivations?(l(),n("h5",Xe,"Motivations")):_("",!0),e("div",{innerHTML:s.marked.parse(t.motivations)},null,8,qe),t.knownassociates?(l(),n("h5",ze,"Known Associates")):_("",!0),e("div",{innerHTML:s.marked.parse(t.knownassociates)},null,8,Ge)]),e("div",Qe,[We,(l(!0),n(h,null,u(t.campaigns,o=>(l(),n("span",null,[r(c(o.name),1),Ye]))),256))])])])):_("",!0)]))]))),128)),e("div",Ze,[e("button",{class:"btn btn-primary",onClick:i[3]||(i[3]=t=>s.addNPC())},"+")])],64)}const at=k(x,[["render",et]]);export{at as default};
