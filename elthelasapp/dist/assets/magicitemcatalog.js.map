{"version":3,"file":"magicitemcatalog.js","sources":["../../src/views/ref/js/magicitemcatalog.js?vue&type=script&src=e43d6722&lang.js"],"sourcesContent":["import { useStaticsStore, useUserStore } from '@/stores/index';\nimport { marked } from '@/../node_modules/marked/lib/marked.esm.js';\nimport modal from '@/components/global/modal.vue';\n\nexport default {\n  setup() {\n    const statics = useStaticsStore();\n    const userinfo = useUserStore();\n    \n    const { magicitems, magicscrolls, magicwands, magicweapons, magicarmor, magicother, magiccommons, magicrares, magicveryrares, magiclegendaries } = statics;\n    \n    return {\n      userinfo,\n      \n      magicitems, magicscrolls, magicwands, magicweapons, magicarmor, magicother, magiccommons, magicrares, magicveryrares, magiclegendaries,\n      \n      marked\n    };\n  },\n  components: {\n    modal\n  },\n  computed: {\n    filteredWands () {\n      return this.magicwands.filter(this.magicitemfilter);\n    },\n    filteredScrolls () {\n      return this.magicscrolls.filter(this.magicitemfilter);\n    },\n    filteredWeapons () {\n      return this.magicweapons.filter(this.magicitemfilter);\n    },\n    filteredArmor () {\n      return this.magicarmor.filter(this.magicitemfilter);\n    },\n    filteredOther () {\n      return this.magicother.filter(this.magicitemfilter);\n    }\n  },\n  data: function() {\n    return {\n      magicitemtables: {\n        fields: [\n          { key: \"print\", label: \"Print\", sortable: false },\n          { key: \"Item\", label: \"Item\", sortable: true },\n          { key: \"Attunement\", label: \"Attunement\", sortable: true },\n          { key: \"Rarity\", label: \"Rarity\", sortable: true },\n          { key: \"Cost (gp)\", label: \"Cost (gp)\", sortable: true },\n          { key: \"instock\", label: \"In Stock\", sortable: true }\n        ],\n        filter: \"\",\n        filterBy: [ \"Item\", \"Type\", \"Attunement\", \"Rarity\", \"Cost (gp)\", \"Effect\" ],\n        filterRarity: [ \"Common\", \"Uncommon\", \"Rare\", \"Very Rare\", \"Legendary\" ],\n        filterCost: \"\",\n        sortBy: null,\n        sortDesc: false\n      },\n      modalProps: { isActive: false, title: \"\" },\n      magicItemModal: { Item: '', Rarity: '', instock: '', Effect: '', 'Cost (gp)': '', Attunement: '' },\n      instockonly: true,\n      toPrint: [],\n      printMode: false\n    };\n  },\n  methods: {\n    selectForPrint (item) {\n      item.print = !item.print;\n      if (item.print) {\n        item._rowVariant = 'success';\n      } else {\n        item._rowVariant = undefined;\n      }\n    },\n    printSelected () {\n      this.toPrint = this.magicitems.reduce((a, b) => {\n        if (b.print) {\n          a.push(b);\n        }\n        return a;\n      }, []);\n      this.printMode = true;\n    },\n    magicItemInfo (item, index, button) {\n      this.magicItemModal = item;\n      this.modalProps.isActive = true;\n      this.modalProps.title = item.Item;\n    },\n    resetMagicItemModal () {\n      this.magicItemModal = { Item: '', Rarity: '', instock: '', Effect: '', 'Cost (gp)': '', Attunement: '' };\n    },\n    instockfilter(a) {\n      if (this.instockonly && a.instock !== \"In Stock\") {\n        return false;\n      }\n      return true;\n    },\n    magicitemfilter(a) {\n      var filter = this.magicitemtables.filterBy;\n      var value = this.magicitemtables.filter;\n      if (this.instockfilter(a)) {\n        var inelement = filter.some((el) => {\n          for (var y in a) {\n            if (el === y && a[y].toString().toLowerCase().includes(value.toLowerCase())) {\n              if ((!this.magicitemtables.filterCost || Number(this.magicitemtables.filterCost) >= a[\"Cost (gp)\"]) && this.magicitemtables.filterRarity.includes(a.Rarity)) {\n                return true;\n              }\n            }\n          }\n        });\n        if ((\n          !value &&\n          (!this.magicitemtables.filterCost || Number(this.magicitemtables.filterCost)) >= a[\"Cost (gp)\"] &&\n          this.magicitemtables.filterRarity.includes(a.Rarity)) ||\n          inelement) {\n          return true;\n        }\n        return false;\n      }\n      return false;\n    }\n  }\n};\n"],"names":[],"mappings":"sLAIA,MAAe,CACb,OAAQ,CACN,KAAM,GAAU,IACV,EAAW,IAEX,CAAE,aAAY,eAAc,aAAY,eAAc,aAAY,aAAY,eAAc,aAAY,iBAAgB,oBAAqB,EAEnJ,MAAO,CACL,WAEA,aAAY,eAAc,aAAY,eAAc,aAAY,aAAY,eAAc,aAAY,iBAAgB,mBAEtH,WAGJ,WAAY,CACV,SAEF,SAAU,CACR,eAAiB,CACf,MAAO,MAAK,WAAW,OAAO,KAAK,kBAErC,iBAAmB,CACjB,MAAO,MAAK,aAAa,OAAO,KAAK,kBAEvC,iBAAmB,CACjB,MAAO,MAAK,aAAa,OAAO,KAAK,kBAEvC,eAAiB,CACf,MAAO,MAAK,WAAW,OAAO,KAAK,kBAErC,eAAiB,CACf,MAAO,MAAK,WAAW,OAAO,KAAK,mBAGvC,KAAM,UAAW,CACf,MAAO,CACL,gBAAiB,CACf,OAAQ,CACN,CAAE,IAAK,QAAS,MAAO,QAAS,SAAU,IAC1C,CAAE,IAAK,OAAQ,MAAO,OAAQ,SAAU,IACxC,CAAE,IAAK,aAAc,MAAO,aAAc,SAAU,IACpD,CAAE,IAAK,SAAU,MAAO,SAAU,SAAU,IAC5C,CAAE,IAAK,YAAa,MAAO,YAAa,SAAU,IAClD,CAAE,IAAK,UAAW,MAAO,WAAY,SAAU,KAEjD,OAAQ,GACR,SAAU,CAAE,OAAQ,OAAQ,aAAc,SAAU,YAAa,UACjE,aAAc,CAAE,SAAU,WAAY,OAAQ,YAAa,aAC3D,WAAY,GACZ,OAAQ,KACR,SAAU,IAEZ,WAAY,CAAE,SAAU,GAAO,MAAO,IACtC,eAAgB,CAAE,KAAM,GAAI,OAAQ,GAAI,QAAS,GAAI,OAAQ,GAAI,YAAa,GAAI,WAAY,IAC9F,YAAa,GACb,QAAS,GACT,UAAW,KAGf,QAAS,CACP,eAAgB,EAAM,CACpB,EAAK,MAAQ,CAAC,EAAK,MACnB,AAAI,EAAK,MACP,EAAK,YAAc,UAEnB,EAAK,YAAc,QAGvB,eAAiB,CACf,KAAK,QAAU,KAAK,WAAW,OAAO,CAAC,EAAG,IACpC,GAAE,OACJ,EAAE,KAAK,GAEF,GACN,IACH,KAAK,UAAY,IAEnB,cAAe,EAAM,EAAO,EAAQ,CAClC,KAAK,eAAiB,EACtB,KAAK,WAAW,SAAW,GAC3B,KAAK,WAAW,MAAQ,EAAK,MAE/B,qBAAuB,CACrB,KAAK,eAAiB,CAAE,KAAM,GAAI,OAAQ,GAAI,QAAS,GAAI,OAAQ,GAAI,YAAa,GAAI,WAAY,KAEtG,cAAc,EAAG,CACf,MAAI,OAAK,aAAe,EAAE,UAAY,aAKxC,gBAAgB,EAAG,CACjB,GAAI,GAAS,KAAK,gBAAgB,SAC9B,EAAQ,KAAK,gBAAgB,OACjC,GAAI,KAAK,cAAc,GAAI,CACzB,GAAI,GAAY,EAAO,KAAK,AAAC,GAAO,CAClC,OAAS,KAAK,GACZ,GAAI,IAAO,GAAK,EAAE,GAAG,WAAW,cAAc,SAAS,EAAM,gBACtD,EAAC,KAAK,gBAAgB,YAAc,OAAO,KAAK,gBAAgB,aAAe,EAAE,eAAiB,KAAK,gBAAgB,aAAa,SAAS,EAAE,QAClJ,MAAO,KAKf,MACE,IAAC,GACA,EAAC,KAAK,gBAAgB,YAAc,OAAO,KAAK,gBAAgB,cAAgB,EAAE,cACnF,KAAK,gBAAgB,aAAa,SAAS,EAAE,SAC7C,GAKJ,MAAO"}