var x=Object.defineProperty;var N=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var $=(e,s,i)=>s in e?x(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i,P=(e,s)=>{for(var i in s||(s={}))ee.call(s,i)&&$(e,i,s[i]);if(N)for(var i of N(s))te.call(s,i)&&$(e,i,s[i]);return e};import{g as se,l as oe,b as ne,m as le,c as ie,_ as re}from"./index.js";import{h as I,u as ae,m as U,i as k,o as u,c as d,f as t,k as l,p as v,M as y,L as ue,t as n,F as A,l as w,j as b,w as M,N as C,g as f,P as de,v as F,x as L}from"./vendor.js";import{c as B}from"./creaturecalc.js";const ce={name:"",tags:"",size:"",cr:"",type:"",subtype:"",alignment:"",ac:"",acdesc:"",hp:"",hpdesc:"",speed:"",str:"",dex:"",con:"",int:"",wis:"",cha:"",stats:[0,0,0,0,0,0],skills:"",saves:"",senses:"",damageimmunities:"",conditionimmunities:"",damageresistances:"",languages:"",locations:"",latlong:"",description:""},pe=[{cr:0,xp:10},{cr:.125,xp:25},{cr:.25,xp:50},{cr:.5,xp:100},{cr:1,xp:200},{cr:2,xp:450},{cr:3,xp:700},{cr:4,xp:1100},{cr:5,xp:1800},{cr:6,xp:2300},{cr:7,xp:2900},{cr:8,xp:3900},{cr:9,xp:5e3},{cr:10,xp:5900},{cr:11,xp:7200},{cr:12,xp:8400},{cr:13,xp:1e4},{cr:14,xp:11500},{cr:15,xp:13e3},{cr:16,xp:15e3},{cr:17,xp:18e3},{cr:18,xp:2e4},{cr:19,xp:22e3},{cr:20,xp:25e3},{cr:21,xp:33e3},{cr:22,xp:41e3},{cr:23,xp:5e4},{cr:24,xp:62e3},{cr:26,xp:9e4},{cr:30,xp:155e3}];function D(e){return!isNaN(B.hp(e))}function z(e){return!(e.speed.includes("ft")||e.speed.includes("feet")||e.senses.includes("ft")||e.senses.includes("feet")||e.description.includes("ft")||e.description.includes("feet"))}var he={setup(){const e=se(),s=oe(),i=ne(),{creatures:a}=I(e),{charlevel:h,accalc:c,getSpeedStat:r,getStatTotal:p,getStatMod:m,getSaveMod:g,getSkillMod:V,getHPTotal:T,getAttackBonus:o,getDamageBonus:_,totalslots:S,getInitMod:E,getCharacter:j,characters:R}=I(s),{loggedin:H,isLoggedIn:O,isAdmin:X,getUserInfo:Y}=i,{getFromServer:G,loadChar:W,selCharacter:q}=s,{getCreature:J,saveNewCreature:K,deleteCreature:Q,getAllCreatures:Z}=e;return Z(),ae({title:"Encounter Runner"}),{creatures:a,charlevel:h,accalc:c,getSpeedStat:r,getStatTotal:p,getStatMod:m,getSaveMod:g,getSkillMod:V,getHPTotal:T,getAttackBonus:o,getDamageBonus:_,totalslots:S,getInitMod:E,curcharacter:j,characters:R,token:H,loggedin:O,admin:X,userinfo:Y,getFromServer:G,loadChar:W,selCharacter:q,getCreature:J,saveNewCreature:K,deleteCreature:Q,creaturecalc:B,creatureStore:e}},props:{creArray:Array,charArray:Array},components:{modal:le},computed:{convertedcount(){return this.creatures.filter(e=>D(e)).filter(e=>z(e)).length},metriccount(){return this.creatures.filter(e=>z(e)).length},validhpcount(){return this.creatures.filter(e=>D(e)).length},unconvertedcount(){return this.creatures.filter(e=>!D(e)).length},filteredcreatures(){return this.creatures.filter(e=>{var s=this.creaturestable.filterValue.split(" ");let i=!0;if(this.typeFilter!==""&&e.type!==this.typeFilter||this.sizeFilter!==""&&e.size!==this.sizeFilter||this.crFilterMin>e.cr||this.crFilterMax<e.cr)return!1;if(this.converted){if(this.converted==="Yes"&&!D(e))return!1;if(this.converted==="No"&&D(e))return!1}if(this.metric){if(this.metric==="Yes"&&!z(e))return!1;if(this.metric==="No"&&z(e))return!1}return s.forEach(a=>{let h=this.creaturestable.filterBy.some(function(c){for(var r in e)if(c===r&&e[r]&&e[r].toString().toLowerCase().includes(a.toLowerCase()))return!0});this.creaturestable.filterValue&&!h&&(i=!1)}),!!i}).sort((e,s)=>e[this.creaturestable.sortBy]>s[this.creaturestable.sortBy]&&this.creaturestable.sortDesc===!1||e[this.creaturestable.sortBy]<s[this.creaturestable.sortBy]&&this.creaturestable.sortDesc===!0?1:-1)},statBlocks(){let e=[];return this.encountercreatures.forEach(s=>{s.ispc||e.findIndex(a=>a.name===s.name)===-1&&e.push(s)}),e},encountercreaturesinit(){return this.encountercreatures.sort((e,s)=>e.init>s.init?-1:1)},encounterlink(){return"/tools/runner/"+this.encountercreatures.map(e=>e.name.replace(/ /g,"").toLowerCase()).join("&")}},data(){return{creaturestable:{fields:[{key:"name",label:"Name",sortable:!0},{key:"size",label:"Size",sortable:!0},{key:"cr",label:"CR",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"subtype",label:"Subtype",sortable:!0},{key:"alignment",label:"Alignment",sortable:!0}],filterValue:"",sortBy:"name",sortDesc:!1,filterBy:["name","size","cr","subtype","alignment"],modalInfo:P({},ce),notupdatedonly:!1},modalProps:{isActive:!1},typeFilter:"",sizeFilter:"",crFilterMin:0,crFilterMax:40,nextIndex:0,partylevel:1,partysize:4,difficulty:"",xpvalue:0,terrain:1,adjustedxpvalue:0,aoe:!1,comp:this,encountercreatures:[],converted:!1,metric:!1}},methods:{del(e){confirm("are you sure you want to delete "+e.name+"? It cannot be recovered if you do.")+this.admin&&this.deleteCreature(e._id)},edit(e){confirm("are you sure you want to edit "+e.name+"?")+this.admin&&this.$router.push("/tools/creaturebuilder/"+e._id)},xpByCR(e){return pe.find(s=>s.cr===e).xp},calculateDifficulty(){for(var e=[25,50,75,125,250,300,350,450,550,600,800,1e3,1100,1250,1400,1600,2e3,2100,2400,2800],s=[50,100,150,250,500,600,750,900,1100,1200,1600,2e3,2200,2500,2800,3200,3900,4200,4900,5700],i=[75,150,225,375,750,900,1100,1400,1600,1900,2400,3e3,3400,3800,4300,4800,5900,6300,7300,8500],a=[100,200,400,500,1100,1400,1700,2100,2400,2800,3600,4500,5100,5700,6400,7200,8800,9500,10900,12700],h=e[this.partylevel-1]*this.partysize,c=s[this.partylevel-1]*this.partysize,r=i[this.partylevel-1]*this.partysize,p=a[this.partylevel-1]*this.partysize,m=0,g=0;g<this.encountercreatures.length;g++)this.encountercreatures[g].ispc||(m+=this.xpByCR(this.encountercreatures[g].cr));this.xpvalue=m,m*=4/this.partysize,m*=1+this.encountercreatures.length*.1,m*=this.terrain*(1+.05*this.aoe*this.partysize),this.adjustedxpvalue=Math.floor(m),m<h?this.difficulty="too easy":m<c?this.difficulty="easy":m<r?this.difficulty="medium":m<p?this.difficulty="hard":m<p*1.5?this.difficulty="deadly":this.difficulty="nigh on impossible"},async addToEncounter(e){e=await this.getCreature(e._id);var s=Object.assign({},e);s.id=this.nextIndex,s.ispc=!1,this.nextIndex++,s.currenthp=B.hp(s),s.descr=U.parse(s.description),s.mini="",s.initMod=B.statMod(s,s.stats[1]),s.advantage=!1,s.disadvantage=!1,s.init=0,this.encountercreatures.push(s),this.calculateDifficulty()},removeCreature(e){this.encountercreatures=this.encountercreatures.filter(s=>s.id!==e.id),this.calculateDifficulty()},createSkillsArray(e){return e.skills.reduce((s,i)=>(i.prof>0&&s.push("+"+this.getSkillMod(i)+" "+i.name),s),[])},createDescription(e){let s=this,i=e.attacks.reduce((c,r)=>{let p="**"+r.name+":** "+r.type+", range "+r.range+", ";return s.getAttackBonus(r)>-1&&(p+="+"),p+=s.getAttackBonus(r)+" to hit ("+r.damage,s.getDamageBonus(r)>0?p+=" +"+s.getDamageBonus(r):s.getDamageBonus(r)<0&&(p+=" -"+s.getDamageBonus(r)),p+=" "+r.dtype+" damage ",r.damage2!==""&&(p+=" + "+r.damage2+" "+r.dtype2+" damage"),c+p+`

`},""),a=(c,r)=>c+"**"+r.name+":** "+r.description+`

`;i=e.feats.reduce(a,i),i=e.charclasses.reduce((c,r)=>(c=r.thisclass.features.reduce(a,c),c=r.selsubclass.features.reduce(a,c),c),i),e.race.traits&&(i=e.race.traits.reduce(a,i)),i=e.features.reduce(a,i);let h=`**Spells**

`;for(let c in e.spells)e.spells[c].length>0&&(h+="**"+c+"("+this.totalslots(c)+" slots):** "+e.spells[c].reduce((r,p)=>r+p.title+(p.prepared?"*":"")+", ","")+`

`);return h.length>14&&(i+=h),U.parse(i)},buildCreature(e,s){this.setCharacter(e);let i={id:this.nextIndex,name:e.name,size:"medium",type:"humanoid",ispc:s,subtype:e.race.singular,alignment:e.alignment,acdesc:this.accalc,speed:this.getSpeedStat(0)+" ft",str:this.getStatTotal(0)+0,dex:this.getStatTotal(1),con:this.getStatTotal(2),int:this.getStatTotal(3),wis:this.getStatTotal(4),cha:this.getStatTotal(5),strmod:this.getStatMod(0),dexmod:this.getStatMod(1),conmod:this.getStatMod(2),intmod:this.getStatMod(3),wismod:this.getStatMod(4),chamod:this.getStatMod(5),saves:"+"+this.getSaveMod(0)+" strength +"+this.getSaveMod(1)+" dexterity +"+this.getSaveMod(2)+" constitution +"+this.getSaveMod(3)+" intelligence +"+this.getSaveMod(4)+" wisdom +"+this.getSaveMod(5)+" charisma.",skills:this.createSkillsArray(e),senses:"",damageresistances:"",damageimmunities:"",conditionimmunities:"",languages:e.proficiencies,cr:this.charlevel(e)-1,descr:this.createDescription(e),mini:"",currenthp:e.hpcurrent,hpdesc:this.getHPTotal,initMod:this.getInitMod,advantage:!1,disadvantage:!1,init:0};this.encountercreatures.push(i),this.nextIndex++,this.calculateDifficulty()},async selCharacter(e){await this.loadChar({character:e,comp:this,passthrough:!0}).then(()=>{this.buildCreature(e,!1),this.$root.$emit("bv::hide::modal","servermodal")})},roll(){let e=[];this.encountercreatures.forEach(s=>{let i=e.findIndex(a=>a.name===s.name);if(i!==-1)s.init=e[i].init;else{let a=Number(s.initMod)+Math.floor(Math.random()*20)+1,h=Number(s.initMod)+Math.floor(Math.random()*20)+1;s.advantage&&!s.disadvantage?a>h?s.init=a:s.init=h:!s.advantage&&s.disadvantage?a<h?s.init=a:s.init=h:s.init=a,e.push(s)}})},getCreaturesOnMount(e){this.creatureStore.getAllCreatures().then(()=>{for(var s=0;s<e.length;s++){var i=this.creatures.filter(function(a){return a.name.toLowerCase().replace(/ /g,"")===e[s].toLowerCase().replace(/ /g,"")});i.length>0&&this.addToEncounter(i[0])}this.calculateDifficulty()})},async loadCharacters(e){e.forEach(s=>{this.buildCreature(s,!0)})}},mounted(){if(this.encountercreatures=[],this.$route.params.id){console.log("there is an encounter parameter");var e=this.$route.params.id.split("&");this.getCreaturesOnMount(e)}else typeof this.creArray!="undefined"&&this.creArray.length>0&&(console.log("running in campaign setting"),e=this.creArray,this.getCreaturesOnMount(e));typeof this.charArray!="undefined"&&this.charArray.length>0&&(this.loadCharacters(this.charArray),this.partysize=this.charArray.length,this.partylevel=ie.charlevel(this.charArray[0]))}};const me={class:"col-sm-12"},fe={class:"col-sm-9"},ve={class:"row"},ge={class:"col-sm-2"},_e=L('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option>',10),ye=[_e],be={class:"col-sm-2"},Ce=L('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option>',20),ke=[Ce],Me={class:"col-sm-2"},Se=t("option",{value:.75},"Player Advantage",-1),De=t("option",{value:1},"None",-1),Ae=t("option",{value:1.25},"Monster Advantage",-1),we=[Se,De,Ae],ze={class:"col-sm-2"},Be={class:"col-sm-4"},Ve=t("br",null,null,-1),Te={title:"This is the total XP of the monsters in this encounter, before adjustment."},Fe={title:"After adjustment, this is the amount of XP you should award to players."},Ne={class:"row"},$e=t("i",{class:"handle"},"\u2190\u2192",-1),Pe={class:"creature"},Ie={key:0},Ue={class:"row"},Le={class:"col-9"},Ee=t("strong",null,"Armor Class:",-1),je=t("br",null,null,-1),Re=t("strong",null,"Base HP:",-1),He=t("br",null,null,-1),Oe=t("strong",null,"Protection Points:",-1),Xe=t("br",null,null,-1),Ye=t("strong",null,"Speed:",-1),Ge={class:"col-3"},We=["src","alt"],qe={class:"table table-striped"},Je=t("thead",null,[t("tr",null,[t("th",null,"STR"),t("th",null,"DEX"),t("th",null,"CON"),t("th",null,"INT"),t("th",null,"WIS"),t("th",null,"CHA")])],-1),Ke={key:0},Qe={key:0},Ze={key:0},xe={key:0},et={key:0},tt={key:0},st={"data-v-if":"creature.saves"},ot=t("strong",null,"Saving Throws:",-1),nt=t("br",null,null,-1),lt={key:0},it=t("strong",null,"Skills:",-1),rt=t("br",null,null,-1),at=t("strong",null,"Senses:",-1),ut=t("br",null,null,-1),dt={key:1},ct=t("strong",null,"Damage Resistances:",-1),pt=t("br",null,null,-1),ht={key:2},mt=t("strong",null,"Damage Immunities:",-1),ft=t("br",null,null,-1),vt={key:3},gt=t("strong",null,"Damage Vulnerabilities:",-1),_t=t("br",null,null,-1),yt={key:4},bt=t("strong",null,"Condition Immunities:",-1),Ct=t("br",null,null,-1),kt=t("strong",null,"Languages:",-1),Mt=t("br",null,null,-1),St=t("strong",null,"Challenge:",-1),Dt=["innerHTML"],At=t("option",{value:""},"All",-1),wt=t("option",{value:"aberration"},"Aberration",-1),zt=t("option",{value:"beast"},"Beast",-1),Bt=t("option",{value:"celestial"},"Celestial",-1),Vt=t("option",{value:"construct"},"Construct",-1),Tt=t("option",{value:"dragon"},"Dragon",-1),Ft=t("option",{value:"elemental"},"Elemental",-1),Nt=t("option",{value:"fey"},"Fey",-1),$t=t("option",{value:"fiend"},"Fiend",-1),Pt=t("option",{value:"giant"},"Giant",-1),It=t("option",{value:"humanoid"},"Humanoid",-1),Ut=t("option",{value:"monstrosity"},"Monstrosity",-1),Lt=t("option",{value:"plant"},"Plant",-1),Et=t("option",{value:"ooze"},"Ooze",-1),jt=t("option",{value:"undead"},"Undead",-1),Rt=[At,wt,zt,Bt,Vt,Tt,Ft,Nt,$t,Pt,It,Ut,Lt,Et,jt],Ht=t("br",null,null,-1),Ot=t("option",{value:""},"All",-1),Xt=t("option",{value:"tiny"},"tiny",-1),Yt=t("option",{value:"small"},"small",-1),Gt=t("option",{value:"medium"},"medium",-1),Wt=t("option",{value:"large"},"large",-1),qt=t("option",{value:"huge"},"huge",-1),Jt=t("option",{value:"gargantuan"},"gargantuan",-1),Kt=t("option",{value:"colossal"},"colossal",-1),Qt=[Ot,Xt,Yt,Gt,Wt,qt,Jt,Kt],Zt=t("br",null,null,-1),xt=t("br",null,null,-1),es=t("br",null,null,-1),ts={class:"col-2"},ss=t("br",null,null,-1),os=t("br",null,null,-1),ns=t("br",null,null,-1),ls={class:"col-sm-2"},is=t("br",null,null,-1),rs=t("option",{value:"Yes"},"Yes",-1),as=t("option",{value:"No"},"No",-1),us=t("option",{value:!1},"Any",-1),ds=[rs,as,us],cs=t("br",null,null,-1),ps=t("option",{value:"Yes"},"Yes",-1),hs=t("option",{value:"No"},"No",-1),ms=t("option",{value:!1},"Any",-1),fs=[ps,hs,ms],vs=["disabled"],gs={class:"table table-striped table-responsive",id:"creaturetable"},_s=["onClick"],ys=["onClick"],bs=["onClick"],Cs={id:"inithptracker"},ks=["href"],Ms={class:"row"},Ss={class:"col-sm-5"},Ds={class:"col-sm-2"},As={class:"col-sm-5"},ws={class:"row"},zs={class:"col-sm-3"},Bs=["onUpdate:modelValue"],Vs={class:"col-sm-3"},Ts={class:"col-sm-3"},Fs=["onClick"],Ns={class:"table table-striped"},$s=t("tr",null,[t("th",null,"Character Name"),t("th",null,"Level"),t("th",null,"-")],-1),Ps=["onClick"];function Is(e,s,i,a,h,c){const r=k("b-col"),p=k("router-link"),m=k("b-form-input"),g=k("b-input-group"),V=k("b-row"),T=k("modal");return u(),d("div",me,[t("div",fe,[t("div",ve,[t("div",ge,[t("label",null,[l(" Party Size "),v(t("select",{class:"charsheet-text","onUpdate:modelValue":s[0]||(s[0]=o=>e.partysize=o),onChange:s[1]||(s[1]=o=>e.calculateDifficulty())},ye,544),[[y,e.partysize]])])]),t("div",be,[t("label",null,[l(" Average Level "),v(t("select",{class:"charsheet-text","onUpdate:modelValue":s[2]||(s[2]=o=>e.partylevel=o),onChange:s[3]||(s[3]=o=>e.calculateDifficulty())},ke,544),[[y,e.partylevel]])])]),t("div",Me,[t("label",null,[l(" Terrain "),v(t("select",{class:"charsheet-text","onUpdate:modelValue":s[4]||(s[4]=o=>e.terrain=o),onChange:s[5]||(s[5]=o=>e.calculateDifficulty())},we,544),[[y,e.terrain]])])]),t("div",ze,[t("label",null,[l(" Monster Has Powerful AoE "),v(t("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":s[6]||(s[6]=o=>e.aoe=o),onChange:s[7]||(s[7]=o=>e.calculateDifficulty())},null,544),[[ue,e.aoe]])])]),t("div",Be,[l(" Encounter Difficulty: "+n(e.difficulty)+" ",1),Ve,t("span",Te,"XP: "+n(e.xpvalue),1),l("\xA0\xA0 "),t("span",Fe,"Adjusted XP: "+n(e.adjustedxpvalue),1)])]),t("div",Ne,[(u(!0),d(A,null,w(e.statBlocks,o=>(u(),d("div",{key:o.id,class:"col-sm-4"},[t("h2",null,[l(n(o.name)+" ",1),$e]),t("div",Pe,[t("h4",null,[l(n(o.size)+" "+n(o.type),1),o.subtype?(u(),d("span",Ie," ("+n(o.subtype)+")",1)):f("",!0),l(", "+n(o.alignment),1)]),t("div",Ue,[t("div",Le,[Ee,l(" "+n(o.ac)+" ("+n(o.acdesc)+") ",1),je,Re,l(" "+n(e.creaturecalc.basehp(o)),1),He,Oe,l(" "+n(e.creaturecalc.pp(o)),1),Xe,Ye,l(" "+n(o.speed),1)]),t("div",Ge,[v(t("img",{src:o.image,alt:o.name},null,8,We),[[de,o.image]])])]),t("table",qe,[Je,t("tbody",null,[t("tr",null,[t("td",null,[l(n(o.stats[0])+" (",1),e.creaturecalc.statMod(o,0)>0?(u(),d("span",Ke,"+")):f("",!0),l(n(e.creaturecalc.statMod(o,0))+")",1)]),t("td",null,[l(n(o.stats[1])+" (",1),e.creaturecalc.statMod(o,1)>0?(u(),d("span",Qe,"+")):f("",!0),l(n(e.creaturecalc.statMod(o,1))+")",1)]),t("td",null,[l(n(o.stats[2])+" (",1),e.creaturecalc.statMod(o,2)>0?(u(),d("span",Ze,"+")):f("",!0),l(n(e.creaturecalc.statMod(o,2))+")",1)]),t("td",null,[l(n(o.stats[3])+" (",1),e.creaturecalc.statMod(o,3)>0?(u(),d("span",xe,"+")):f("",!0),l(n(e.creaturecalc.statMod(o,3))+")",1)]),t("td",null,[l(n(o.stats[4])+" (",1),e.creaturecalc.statMod(o,4)>0?(u(),d("span",et,"+")):f("",!0),l(n(e.creaturecalc.statMod(o,4))+")",1)]),t("td",null,[l(n(o.stats[5])+" (",1),e.creaturecalc.statMod(o,5)>0?(u(),d("span",tt,"+")):f("",!0),l(n(e.creaturecalc.statMod(o,5))+")",1)])])])]),t("p",null,[t("span",st,[ot,l(" "+n(o.saves)+" ",1),nt]),o.skills.length>0?(u(),d("span",lt,[it,l(" "+n(o.skills.join(", "))+" ",1),rt])):f("",!0),at,l(" "+n(o.senses)+" ",1),ut,o.damageresistances?(u(),d("span",dt,[ct,l(" "+n(o.damageresistances)+" ",1),pt])):f("",!0),o.damageimmunities?(u(),d("span",ht,[mt,l(" "+n(o.damageimmunities)+" ",1),ft])):f("",!0),o.damagevulnerabilities?(u(),d("span",vt,[gt,l(" "+n(o.damagevulnerabilities),1),_t])):f("",!0),o.conditionimmunities?(u(),d("span",yt,[bt,l(" "+n(o.conditionimmunities)+" ",1),Ct])):f("",!0),kt,l(" "+n(o.languages)+" ",1),Mt,St,l(" "+n(o.cr),1)]),t("div",{innerHTML:o.descr},null,8,Dt)])]))),128))]),b(V,null,{default:M(()=>[b(r,{md:"2"},{default:M(()=>[t("label",null,[l(" Type "),v(t("select",{"onUpdate:modelValue":s[8]||(s[8]=o=>e.typeFilter=o)},Rt,512),[[y,e.typeFilter]]),l(),Ht,l(" Size "),v(t("select",{"onUpdate:modelValue":s[9]||(s[9]=o=>e.sizeFilter=o)},Qt,512),[[y,e.sizeFilter]]),l(),Zt,l(" CR Min "),v(t("input",{type:"number","onUpdate:modelValue":s[10]||(s[10]=o=>e.crFilterMin=o),class:"charsheet-num"},null,512),[[F,e.crFilterMin]]),l(),xt,l(" Max "),v(t("input",{type:"number","onUpdate:modelValue":s[11]||(s[11]=o=>e.crFilterMax=o),class:"charsheet-num"},null,512),[[F,e.crFilterMax]]),es])]),_:1}),t("div",ts,[l(" Fully Converted: "+n(e.convertedcount),1),ss,l(" Metric: "+n(e.metriccount),1),os,l(" Valid HP: "+n(e.validhpcount),1),ns,l(" Unconverted: "+n(e.unconvertedcount),1)]),t("div",ls,[b(p,{to:"/tools/creaturebuilder",class:"btn btn-primary",style:{"margin-top":"10px"}},{default:M(()=>[l("New Creature")]),_:1}),is,v(t("select",{"onUpdate:modelValue":s[12]||(s[12]=o=>e.metric=o)},ds,512),[[y,e.metric]]),l(" Metric "),cs,v(t("select",{"onUpdate:modelValue":s[13]||(s[13]=o=>e.converted=o)},fs,512),[[y,e.converted]]),l(" Converted ")]),b(r,{md:"4",class:"my-1"},{default:M(()=>[b(g,null,{default:M(()=>[b(m,{modelValue:e.creaturestable.filterValue,"onUpdate:modelValue":s[14]||(s[14]=o=>e.creaturestable.filterValue=o),placeholder:"Type to Search"},null,8,["modelValue"]),t("button",{class:"btn btn-primary",disabled:!e.creaturestable.filterValue,onClick:s[15]||(s[15]=o=>e.creaturestable.filterValue="")},"Clear",8,vs)]),_:1}),l(" Results: "+n(e.filteredcreatures.length),1)]),_:1})]),_:1}),t("table",gs,[t("thead",null,[t("tr",null,[t("th",null,[t("a",{href:"#",onClick:s[16]||(s[16]=C(o=>{e.creaturestable.sortBy="name",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Name")]),t("th",null,[t("a",{href:"#",onClick:s[17]||(s[17]=C(o=>{e.creaturestable.sortBy="size",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Size")]),t("th",null,[t("a",{href:"#",onClick:s[18]||(s[18]=C(o=>{e.creaturestable.sortBy="cr",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"CR")]),t("th",null,[t("a",{href:"#",onClick:s[19]||(s[19]=C(o=>{e.creaturestable.sortBy="type",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Type")]),t("th",null,[t("a",{href:"#",onClick:s[20]||(s[20]=C(o=>{e.creaturestable.sortBy="subtype",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Subtype")]),t("th",null,[t("a",{href:"#",onClick:s[21]||(s[21]=C(o=>{e.creaturestable.sortBy="alignment",e.creaturestable.sortDesc=!e.creaturestable.sortDesc},["stop"]))},"Alignment")])])]),t("tbody",null,[(u(!0),d(A,null,w(e.filteredcreatures,(o,_)=>(u(),d("tr",{key:o._id},[t("td",null,[t("span",null,[t("a",{href:"#",onClick:C(S=>e.addToEncounter(o,_,S.target),["stop"])},n(o.name),9,_s),e.admin?(u(),d("button",{key:0,class:"btn btn-warning btn-sm",onClick:S=>e.edit(o)},"\u270E",8,ys)):f("",!0),e.admin?(u(),d("button",{key:1,class:"btn btn-sm btn-danger",onClick:S=>e.del(o)},"X",8,bs)):f("",!0)])]),t("td",null,n(o.size),1),t("td",null,n(o.cr),1),t("td",null,n(o.type),1),t("td",null,n(o.subtype),1),t("td",null,n(o.alignment),1)]))),128))])])]),t("div",Cs,[t("p",null,[t("a",{href:e.encounterlink},"Link to this Encounter",8,ks)]),(u(!0),d(A,null,w(e.encountercreaturesinit,o=>(u(),d("div",{key:o.id,class:"form-inline form-row"},[t("div",Ms,[t("div",Ss,n(o.name)+"\xA0",1),t("div",Ds,"AC "+n(o.ac),1),t("div",As,n(o.speed),1)]),t("div",ws,[t("div",zs,[v(t("input",{type:"number","onUpdate:modelValue":_=>o.currenthp=_,style:{"font-size":"0.7rem"},class:"form-control form-control-sm"},null,8,Bs),[[F,o.currenthp]])]),t("div",Vs," / "+n(e.creaturecalc.hp(o))+" ("+n(e.creaturecalc.basehp(o))+" + "+n(e.creaturecalc.pp(o))+") ",1),t("div",Ts,[t("button",{class:"close",type:"button",onClick:_=>e.removeCreature(o)},"\xD7",8,Fs)])])]))),128))]),b(T,{id:"servermodal",title:"Load File from Server",modalProps:e.modalProps},{default:M(()=>[t("table",Ns,[$s,(u(!0),d(A,null,w(e.characters,o=>(u(),d("tr",{key:o._id},[t("td",null,[t("a",{class:"clickable",onClick:_=>e.selCharacter(o)},n(o.name),9,Ps)]),t("td",null,n(e.charlevel(o)),1)]))),128))])]),_:1},8,["modalProps"])])}var Rs=re(he,[["render",Is]]);export{Rs as default};
