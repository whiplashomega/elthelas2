import{I as V,s as U,B as k,_ as S,o as n,c as i,a as t,n as s,v as u,E as y,e as o,F as f,r as M,d,t as l,b as C}from"./index.js";import{c}from"./creaturecalc.js";const D={setup(){const e=V(),{builderCreature:a}=U(e),{saveNewCreature:m,resetCreature:g,saveCreature:v,getCreatureForEdit:b}=e;return k({title:"Creature Builder"}),{creature:a,saveNewCreature:m,resetCreature:g,saveCreature:v,getCreature:b,creaturecalc:c}},methods:{loadimage(){if(document.getElementById("imageload")){var e=document.getElementById("imageload").files[0],a=new FileReader;a.addEventListener("load",()=>{this.creature.image=a.result},!1),e&&a.readAsDataURL(e)}},addTag(){this.creature.tags.push({id:Math.random(),name:""})},removeTag(e){this.creature.tags.splice(e,1)},addSkill(){this.creature.skills.push({id:Math.random(),value:""})},removeSkill(e){this.creature.skills.splice(e,1)},submitCreature(){this.creature._id?this.saveCreature(this.creature):this.saveNewCreature(this.creature),this.resetCreature(),this.$router.push("/tools/runner")},checkCreature(){let e=!0,a="";this.creature.ac==""&&(e=!1,a+="Must have a value for AC. "),e?this.submitCreature():alert(a)}},mounted(){this.$route.params.id&&this.getCreature(this.$route.params.id).then(()=>{if(console.log(this.creature.stats),this.creature.stats.length===0){this.creature.stats=[this.creature.str,this.creature.dex,this.creature.con,this.creature.int,this.creature.wis,this.creature.cha];var e=Math.random(),a="slashing";e<.34?a="bludgeoning":e<.67&&(a="piercing"),this.creature.damageresistances=this.creature.damageresistances.replace("bludgeoning, piercing, and slashing from nonmagical attacks",a),this.creature.damageimmunities=this.creature.damageimmunities.replace("bludgeoning, piercing, and slashing from nonmagical attacks",a),this.creature.damageresistances=this.creature.damageresistances.replace("bludgeoning, piercing, and slashing from nonmagical weapons",a),this.creature.damageimmunities=this.creature.damageimmunities.replace("bludgeoning, piercing, and slashing from nonmagical weapons",a),this.creature.acdesc.includes("chain shirt")&&this.creature.pc!=1?(this.creature.acdesc=this.creature.acdesc.replace("chain shirt","chain cuirass"),this.creature.ac=11+Math.max(0,Math.min(c.statMod(this.creature,1),4)),this.creature.pc=1,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.acdesc.includes("leather armor")?(this.creature.acdesc=this.creature.acdesc.replace("leather armor","leather cuirass"),this.creature.ac=11+Math.max(0,Math.min(c.statMod(this.creature,1),99)),this.creature.pc=0,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.acdesc.includes("studded leather")?(this.creature.acdesc=this.creature.acdesc.replace("studded leather","Leather Hauberk"),this.creature.ac=12+Math.max(Math.min(c.statMod(this.creature,1),4),0),this.creature.pc=0,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.acdesc.includes("chain mail")?(this.creature.acdesc=this.creature.acdesc.replace("chain mail","Chain Full Armor"),this.creature.ac=15+Math.max(Math.min(c.statMod(this.creature,1),1),0),this.creature.pc=4,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.acdesc.includes("splint mail")?(this.creature.acdesc=this.creature.acdesc.replace("splint mail","Scale Full Armor"),this.creature.ac=16+Math.max(Math.min(c.statMod(this.creature,1),1),0),this.creature.pc=3,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.acdesc.includes("scale mail")?(this.creature.acdesc=this.creature.acdesc.replace("scale mail","Scale Hauberk"),this.creature.ac=15+Math.max(Math.min(c.statMod(this.creature,1),2),0),this.creature.pc=1,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.acdesc.includes("splint armor")?(this.creature.acdesc=this.creature.acdesc.replace("splint armor","Scale Full Armor"),this.creature.ac=16+Math.max(Math.min(c.statMod(this.creature,1),1),0),this.creature.pc=3,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.acdesc.includes("breastplate")?(this.creature.acdesc=this.creature.acdesc.replace("breastplate","steel plate cuirass"),this.creature.ac=12+Math.max(Math.min(c.statMod(this.creature,1),3),0),this.creature.pc=2,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.acdesc.includes("plate")?(this.creature.acdesc=this.creature.acdesc.replace("plate","steel plate full armor"),this.creature.ac=16+Math.max(Math.min(c.statMod(this.creature,1),0),0),this.creature.pc=4,this.creature.ac+=this.creature.acdesc.includes("shield")?2:0):this.creature.pc=0}})}},w={class:"col-sm-12"},A={class:"row"},$={class:"col-sm-3"},T=t("label",null," Name ",-1),z=t("label",null," CR ",-1),F=t("label",null," Type ",-1),H=C('<option value="aberration">Aberration</option><option value="beast">Beast</option><option value="celestial">Celestial</option><option value="construct">Construct</option><option value="dragon">Dragon</option><option value="elemental">Elemental</option><option value="fey">Fey</option><option value="fiend">Fiend</option><option value="giant">Giant</option><option value="humanoid">Humanoid</option><option value="monstrosity">Monstrosity</option><option value="plant">Plant</option><option value="ooze">Ooze</option><option value="undead">Undead</option>',14),B=[H],E=t("label",null," Subtype ",-1),N=t("label",null,"AC",-1),P=t("label",null,"AC Description",-1),I=t("label",null,"Speed",-1),L=t("label",null,"Tags",-1),R={class:"col-sm-10"},X=["onUpdate:modelValue"],G={class:"col-sm-2"},O=["onClick"],W={style:{"margin-top":"10px"}},j={id:"imageupload"},q={class:"row print-hide"},J=t("input",{type:"file",id:"imageload",class:"col-sm"},null,-1),K={class:"col-sm"},Q={class:"btn-group",style:{}},Y={class:"col-sm-3"},Z=t("label",null," Size ",-1),_=C('<option value="tiny">Tiny</option><option value="small">Small</option><option value="medium">Medium</option><option value="large">Large</option><option value="huge">Huge</option><option value="gargantuan">Gargantuan</option><option value="colossal">Colossal</option>',7),x=[_],ee=t("label",null," Alignment ",-1),te=t("label",null,"HP (deprecated)",-1),ae=t("label",null,"HP Description (deprecated)",-1),re=t("label",null,"Hit Dice:",-1),le={key:0},se={key:1},ue={key:2},ne={key:3},ie={key:4},oe={key:5},ce={key:6},de=t("label",null,"HP: ",-1),he=t("label",null,"Base: ",-1),pe=t("label",null,"PP/Hitdie",-1),me=t("label",null,"Saves",-1),ge={class:"row"},ve=t("label",null,"Skills",-1),be={class:"col-sm-10"},ye=["onUpdate:modelValue"],fe={class:"col-sm-2"},Me=["onClick"],Ce={style:{"margin-top":"10px"}},Ve=["src","alt"],Ue={class:"col-sm-6"},ke={class:"table table-striped table-sm"},Se=t("thead",null,[t("tr",null,[t("th"),t("th",null,"STR"),t("th",null,"DEX"),t("th",null,"CON"),t("th",null,"INT"),t("th",null,"WIS"),t("th",null,"CHA")])],-1),De=t("th",null,"Score (dep)",-1),we=t("th",null,"Score",-1),Ae=t("th",null,"Mod",-1),$e=t("th",null,"w/ Prof",-1),Te=t("th",null,"w/ Exp",-1),ze=t("th",null,"Save DC",-1),Fe=t("tr",null,null,-1),He=t("label",null,"Actions, and Abilities",-1),Be=t("label",null,"Description and Fluff",-1);function Ee(e,a,m,g,v,b){return n(),i("div",w,[t("div",A,[t("div",$,[t("div",null,[T,s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[0]||(a[0]=r=>e.creature.name=r)},null,512),[[u,e.creature.name]])]),t("div",null,[z,s(t("input",{type:"number",min:"0",max:"30",class:"charsheet-text","onUpdate:modelValue":a[1]||(a[1]=r=>e.creature.cr=r)},null,512),[[u,e.creature.cr]])]),t("div",null,[F,s(t("select",{"onUpdate:modelValue":a[2]||(a[2]=r=>e.creature.type=r),class:"charsheet-text"},B,512),[[y,e.creature.type]])]),t("div",null,[E,s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[3]||(a[3]=r=>e.creature.subtype=r)},null,512),[[u,e.creature.subtype]])]),t("div",null,[N,s(t("input",{type:"number",class:"charsheet-text","onUpdate:modelValue":a[4]||(a[4]=r=>e.creature.ac=r)},null,512),[[u,e.creature.ac]])]),t("div",null,[P,s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[5]||(a[5]=r=>e.creature.acdesc=r)},null,512),[[u,e.creature.acdesc]])]),t("div",null,[I,s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[6]||(a[6]=r=>e.creature.speed=r)},null,512),[[u,e.creature.speed]])]),t("div",null,[t("label",null,[o(" Damage Resistances "),s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[7]||(a[7]=r=>e.creature.damageresistances=r)},null,512),[[u,e.creature.damageresistances]])]),t("label",null,[o(" Damage Immunities "),s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[8]||(a[8]=r=>e.creature.damageimmunities=r)},null,512),[[u,e.creature.damageimmunities]])]),t("label",null,[o(" Damage Vulnerabilities "),s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[9]||(a[9]=r=>e.creature.damagevulnerabilities=r)},null,512),[[u,e.creature.damagevulnerabilities]])]),t("label",null,[o(" Condition Immunities "),s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[10]||(a[10]=r=>e.creature.conditionimmunities=r)},null,512),[[u,e.creature.conditionimmunities]])])]),L,(n(!0),i(f,null,M(e.creature.tags,(r,p)=>(n(),i("div",{key:r.id,class:"clearfix row"},[t("div",R,[s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":h=>r.name=h},null,8,X),[[u,r.name]])]),t("div",G,[t("button",{class:"btn btn-danger btn-sm",onClick:h=>e.removeTag(p)},"X",8,O)])]))),128)),t("div",W,[t("button",{class:"btn btn-primary btn-sm",onClick:a[11]||(a[11]=r=>e.addTag())},"Add Tag")]),t("div",j,[t("div",q,[J,t("div",K,[t("input",{type:"button",onClick:a[12]||(a[12]=r=>e.loadimage()),class:"btn btn-success",value:"upload image"})])])]),t("div",Q,[t("button",{class:"btn btn-success",onClick:a[13]||(a[13]=r=>e.checkCreature())},"Submit"),t("button",{class:"btn btn-warning",onClick:a[14]||(a[14]=r=>e.resetForm())},"Reset")])]),t("div",Y,[t("div",null,[Z,s(t("select",{"onUpdate:modelValue":a[15]||(a[15]=r=>e.creature.size=r),class:"charsheet-text"},x,512),[[y,e.creature.size]])]),t("div",null,[ee,s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[16]||(a[16]=r=>e.creature.alignment=r)},null,512),[[u,e.creature.alignment]])]),t("div",null,[te,s(t("input",{type:"number",class:"charsheet-text","onUpdate:modelValue":a[17]||(a[17]=r=>e.creature.hp=r)},null,512),[[u,e.creature.hp]])]),t("div",null,[ae,s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[18]||(a[18]=r=>e.creature.hpdesc=r)},null,512),[[u,e.creature.hpdesc]])]),t("div",null,[re,s(t("input",{type:"number",class:"charsheet-num","onUpdate:modelValue":a[19]||(a[19]=r=>e.creature.hitdice=r)},null,512),[[u,e.creature.hitdice]]),o("d"),e.creature.size==="tiny"?(n(),i("span",le,"4")):d("",!0),e.creature.size==="small"?(n(),i("span",se,"6")):d("",!0),e.creature.size==="medium"?(n(),i("span",ue,"8")):d("",!0),e.creature.size==="large"?(n(),i("span",ne,"10")):d("",!0),e.creature.size==="huge"?(n(),i("span",ie,"12")):d("",!0),e.creature.size==="gargantuan"?(n(),i("span",oe,"20")):d("",!0),e.creature.size==="colossal"?(n(),i("span",ce,"20")):d("",!0),o(),de,o(" "+l(e.creaturecalc.hp(e.creature))+" ",1),he,o(" "+l(e.creaturecalc.basehp(e.creature))+" PP: "+l(e.creaturecalc.pp(e.creature)),1)]),t("div",null,[pe,s(t("input",{type:"number",class:"charsheet-text","onUpdate:modelValue":a[20]||(a[20]=r=>e.creature.pc=r)},null,512),[[u,e.creature.pc]])]),t("div",null,[me,s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[21]||(a[21]=r=>e.creature.saves=r)},null,512),[[u,e.creature.saves]])]),t("div",ge,[t("label",null,[o(" Languages "),s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[22]||(a[22]=r=>e.creature.languages=r)},null,512),[[u,e.creature.languages]])]),t("label",null,[o(" Senses "),s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[23]||(a[23]=r=>e.creature.senses=r)},null,512),[[u,e.creature.senses]])]),t("label",null,[o(" Locations "),s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":a[24]||(a[24]=r=>e.creature.locations=r)},null,512),[[u,e.creature.locations]])]),ve,(n(!0),i(f,null,M(e.creature.skills,(r,p)=>(n(),i("div",{key:r.id,class:"clearfix row"},[t("div",be,[s(t("input",{type:"text",class:"charsheet-text","onUpdate:modelValue":h=>r.value=h},null,8,ye),[[u,r.value]])]),t("div",fe,[t("button",{class:"btn btn-danger btn-sm",onClick:h=>e.removeSkill(p)},"X",8,Me)])]))),128)),t("div",Ce,[t("button",{class:"btn btn-primary btn-sm",onClick:a[25]||(a[25]=r=>e.addSkill())},"Add Skill")])]),e.creature.image?(n(),i("img",{key:0,src:e.creature.image,alt:e.creature.name,style:{"max-width":"100%"}},null,8,Ve)):d("",!0)]),t("label",Ue,[o(" Ability Scores "),t("table",ke,[Se,t("tbody",null,[t("tr",null,[De,t("td",null,l(e.creature.str),1),t("td",null,l(e.creature.dex),1),t("td",null,l(e.creature.con),1),t("td",null,l(e.creature.int),1),t("td",null,l(e.creature.wis),1),t("td",null,l(e.creature.cha),1)]),t("tr",null,[we,t("td",null,[s(t("input",{type:"number",class:"charsheet-num",style:{"margin-right":"0"},"onUpdate:modelValue":a[26]||(a[26]=r=>e.creature.stats[0]=r)},null,512),[[u,e.creature.stats[0]]])]),t("td",null,[s(t("input",{type:"number",class:"charsheet-num",style:{"margin-right":"0"},"onUpdate:modelValue":a[27]||(a[27]=r=>e.creature.stats[1]=r)},null,512),[[u,e.creature.stats[1]]])]),t("td",null,[s(t("input",{type:"number",class:"charsheet-num",style:{"margin-right":"0"},"onUpdate:modelValue":a[28]||(a[28]=r=>e.creature.stats[2]=r)},null,512),[[u,e.creature.stats[2]]])]),t("td",null,[s(t("input",{type:"number",class:"charsheet-num",style:{"margin-right":"0"},"onUpdate:modelValue":a[29]||(a[29]=r=>e.creature.stats[3]=r)},null,512),[[u,e.creature.stats[3]]])]),t("td",null,[s(t("input",{type:"number",class:"charsheet-num",style:{"margin-right":"0"},"onUpdate:modelValue":a[30]||(a[30]=r=>e.creature.stats[4]=r)},null,512),[[u,e.creature.stats[4]]])]),t("td",null,[s(t("input",{type:"number",class:"charsheet-num",style:{"margin-right":"0"},"onUpdate:modelValue":a[31]||(a[31]=r=>e.creature.stats[5]=r)},null,512),[[u,e.creature.stats[5]]])])]),t("tr",null,[Ae,t("td",null,l(e.creaturecalc.statMod(e.creature,0)),1),t("td",null,l(e.creaturecalc.statMod(e.creature,1)),1),t("td",null,l(e.creaturecalc.statMod(e.creature,2)),1),t("td",null,l(e.creaturecalc.statMod(e.creature,3)),1),t("td",null,l(e.creaturecalc.statMod(e.creature,4)),1),t("td",null,l(e.creaturecalc.statMod(e.creature,5)),1)]),t("tr",null,[$e,t("td",null,l(e.creaturecalc.attMod(e.creature,0)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,1)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,2)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,3)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,4)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,5)),1)]),t("tr",null,[Te,t("td",null,l(e.creaturecalc.attMod(e.creature,0)+e.creaturecalc.prof(e.creature)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,1)+e.creaturecalc.prof(e.creature)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,2)+e.creaturecalc.prof(e.creature)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,3)+e.creaturecalc.prof(e.creature)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,4)+e.creaturecalc.prof(e.creature)),1),t("td",null,l(e.creaturecalc.attMod(e.creature,5)+e.creaturecalc.prof(e.creature)),1)]),t("tr",null,[ze,t("td",null,l(e.creaturecalc.saveDC(e.creature,0)),1),t("td",null,l(e.creaturecalc.saveDC(e.creature,1)),1),t("td",null,l(e.creaturecalc.saveDC(e.creature,2)),1),t("td",null,l(e.creaturecalc.saveDC(e.creature,3)),1),t("td",null,l(e.creaturecalc.saveDC(e.creature,4)),1),t("td",null,l(e.creaturecalc.saveDC(e.creature,5)),1)]),Fe])]),t("div",null,[He,s(t("textarea",{class:"form-control",style:{"min-height":"600px"},"onUpdate:modelValue":a[32]||(a[32]=r=>e.creature.description=r)},null,512),[[u,e.creature.description]])]),t("div",null,[Be,s(t("textarea",{class:"form-control",style:{"min-height":"600px"},"onUpdate:modelValue":a[33]||(a[33]=r=>e.creature.fluff=r)},null,512),[[u,e.creature.fluff]])])])])])}const Ie=S(D,[["render",Ee]]);export{Ie as default};
